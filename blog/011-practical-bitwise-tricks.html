<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, maximum-scale=5, viewport-fit=cover"
		/>

		<!-- Favicons -->
		<link rel="icon" type="image/png" href="../favicon-96x96.png" sizes="96x96" />
		<link rel="icon" type="image/svg+xml" href="../favicon.svg" />
		<link rel="shortcut icon" href="../favicon.ico" />
		<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png" />
		<meta name="apple-mobile-web-app-title" content="Maltsev.Space" />
		<link rel="manifest" href="../site.webmanifest" />
		
		<link href="../_app/immutable/assets/tag-cloud.9eHMj42z.css" rel="stylesheet">
		<link href="../_app/immutable/assets/0.B79WhaIa.css" rel="stylesheet">
		<link href="../_app/immutable/assets/posts.BYtmJbQG.css" rel="stylesheet">
		<link href="../_app/immutable/assets/7.D6pSgkrC.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.BvDvSQpW.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CT8MUnV_.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/gyb-OID8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CYgJF_JY.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.DcQk_lIL.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dp1pzeXC.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BCMB_Ehz.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/SAcZ1d6Y.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.BNgylvZQ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/RyRWtDiS.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DtceAkGI.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B1Lznyga.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/7.CqqNFX33.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CizBzfIe.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CflHgYeH.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/2qmKEckJ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DNSHY1Ls.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CqXCg_-O.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CrqJlAdt.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B5RX4T5s.js"><!--[--><link rel="alternate" type="application/rss+xml" title="Aleksey Maltsev's Blog" href="/rss.xml"> <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"><!--]--><!--[--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous"><!--]--><!--[--><meta name="description" content="An opinionated and short collection of bitwise tricks that make sense at an average 1x engineer's code."> <link rel="canonical" href="https://maltsev.space/blog/011-practical-bitwise-tricks"> <!--[!--><meta name="robots" content="index, follow"><!--]--> <meta property="og:type" content="article"> <meta property="og:title" content="Practical Bitwise Tricks in Everyday Code | MALTSEV.SPACE"> <meta property="og:description" content="An opinionated and short collection of bitwise tricks that make sense at an average 1x engineer's code."> <meta property="og:image" content="https://maltsev.space/images/posts/011-practical-bitwise-tricks/hero.jpg"> <meta property="og:image:alt" content="Practical Bitwise Tricks in Everyday Code - Blog post hero image"> <meta property="og:url" content="https://maltsev.space/blog/011-practical-bitwise-tricks"> <meta property="og:site_name" content="MALTSEV.SPACE"> <meta property="og:locale" content="en_US"> <!--[--><!--[--><meta property="article:published_time" content="2025-07-07T00:00:00.000Z"><!--]--> <!--[!--><!--]--> <!--[--><meta property="article:author" content="Aleksey Maltsev"><!--]--> <meta property="article:section" content="Technology"> <!--[--><meta property="article:tag" content="Bitwise tricks"><meta property="article:tag" content="Bitwise operations"><meta property="article:tag" content="Bitwise"><!--]--><!--]--> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title" content="Practical Bitwise Tricks in Everyday Code | MALTSEV.SPACE"> <meta name="twitter:description" content="An opinionated and short collection of bitwise tricks that make sense at an average 1x engineer's code."> <meta name="twitter:image" content="https://maltsev.space/images/posts/011-practical-bitwise-tricks/hero.jpg"> <meta name="twitter:image:alt" content="Practical Bitwise Tricks in Everyday Code - Blog post hero image"> <meta name="twitter:site" content="@axel_user"> <meta name="twitter:creator" content="@axel_user">  <!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Aleksey Maltsev","jobTitle":"Senior Software Engineer","description":"Senior Software Engineer focused on distributed systems and highload applications","url":"https://maltsev.space/","image":"https://maltsev.space/images/ava.jpg","sameAs":["https://github.com/AxelUser","https://www.linkedin.com/in/dev-alexey-maltsev/"]}</script><!----> <!--[!--><!--]--> <!--[--><!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Practical Bitwise Tricks in Everyday Code","description":"An opinionated and short collection of bitwise tricks that make sense at an average 1x engineer's code.","image":"https://maltsev.space/images/posts/011-practical-bitwise-tricks/hero.jpg","author":{"@context":"https://schema.org","@type":"Person","name":"Aleksey Maltsev","jobTitle":"Senior Software Engineer","description":"Senior Software Engineer focused on distributed systems and highload applications","url":"https://maltsev.space/","image":"https://maltsev.space/images/ava.jpg","sameAs":["https://github.com/AxelUser","https://www.linkedin.com/in/dev-alexey-maltsev/"]},"publisher":{"@context":"https://schema.org","@type":"Person","name":"Aleksey Maltsev","jobTitle":"Senior Software Engineer","description":"Senior Software Engineer focused on distributed systems and highload applications","url":"https://maltsev.space/","image":"https://maltsev.space/images/ava.jpg","sameAs":["https://github.com/AxelUser","https://www.linkedin.com/in/dev-alexey-maltsev/"]},"url":"https://maltsev.space/blog/011-practical-bitwise-tricks","datePublished":"2025-07-07T00:00:00.000Z","dateModified":"2025-07-07T00:00:00.000Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://maltsev.space/blog/011-practical-bitwise-tricks"},"keywords":["Bitwise tricks","Bitwise operations","Bitwise"]}</script><!----><!--]--><!--]--><title>Practical Bitwise Tricks in Everyday Code | MALTSEV.SPACE</title>
	</head>

	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><div class="space-layout svelte-144yekp"><header class="svelte-yqzv1j"><nav class="space-container svelte-yqzv1j"><div class="logo svelte-yqzv1j"><a href="/" class="svelte-yqzv1j">MALTSEV.SPACE</a></div> <ul class="nav-links svelte-yqzv1j"><li><a class="nav-link svelte-yqzv1j" href="/">Home</a></li> <li><a class="nav-link svelte-yqzv1j" href="/about">About</a></li> <li><a class="nav-link svelte-yqzv1j" href="/art">Gallery</a></li> <li><a class="nav-link svelte-yqzv1j" href="/blog">Blog</a></li></ul> <div class="nav-actions svelte-yqzv1j"><a href="/rss.xml" class="rss-link nav-link svelte-yqzv1j" aria-label="RSS Feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="lucide-icon lucide lucide-rss"><!--[--><!----><path d="M4 11a9 9 0 0 1 9 9"><!----></path><!----><!----><path d="M4 4a16 16 0 0 1 16 16"><!----></path><!----><!----><circle cx="5" cy="19" r="1"><!----></circle><!----><!--]--><!----><!----></svg><!----></a> <div class="theme-switch svelte-awph5w"><button class="theme-button svelte-awph5w" title="Light theme" aria-label="Light theme"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-icon lucide lucide-sun"><!--[--><!----><circle cx="12" cy="12" r="4"><!----></circle><!----><!----><path d="M12 2v2"><!----></path><!----><!----><path d="M12 20v2"><!----></path><!----><!----><path d="m4.93 4.93 1.41 1.41"><!----></path><!----><!----><path d="m17.66 17.66 1.41 1.41"><!----></path><!----><!----><path d="M2 12h2"><!----></path><!----><!----><path d="M20 12h2"><!----></path><!----><!----><path d="m6.34 17.66-1.41 1.41"><!----></path><!----><!----><path d="m19.07 4.93-1.41 1.41"><!----></path><!----><!--]--><!----><!----></svg><!----></button> <button class="theme-button svelte-awph5w" title="Dark theme" aria-label="Dark theme"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-icon lucide lucide-moon"><!--[--><!----><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"><!----></path><!----><!--]--><!----><!----></svg><!----></button> <button class="theme-button svelte-awph5w active" title="System theme" aria-label="System theme"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-icon lucide lucide-laptop"><!--[--><!----><path d="M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16"><!----></path><!----><!--]--><!----><!----></svg><!----></button></div><!----> <button class="mobile-menu-toggle svelte-yqzv1j" aria-label="Toggle menu"><!--[!--><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="lucide-icon lucide lucide-menu"><!--[--><!----><path d="M4 12h16"><!----></path><!----><!----><path d="M4 18h16"><!----></path><!----><!----><path d="M4 6h16"><!----></path><!----><!--]--><!----><!----></svg><!--]--></button></div></nav> <div class="mobile-nav svelte-yqzv1j"><ul class="svelte-yqzv1j"><li class="svelte-yqzv1j"><a class="nav-link svelte-yqzv1j" href="/">Home</a></li> <li class="svelte-yqzv1j"><a class="nav-link svelte-yqzv1j" href="/about">About</a></li> <li class="svelte-yqzv1j"><a class="nav-link svelte-yqzv1j" href="/art">Gallery</a></li> <li class="svelte-yqzv1j"><a class="nav-link svelte-yqzv1j" href="/blog">Blog</a></li></ul></div></header><!----> <div class="stars-background svelte-1xnwqdy"><!--[--><!--]--></div><!----> <main class="svelte-144yekp"><div class="space-container"><!----><!----> <div class="hero-background-container svelte-14gj9rq"><!--[--><img alt="Practical Bitwise Tricks in Everyday Code hero image placeholder" class="hero-image hero-placeholder-image svelte-14gj9rq"> <!--[!--><picture class="svelte-14gj9rq"><!--[--><source srcset="/_app/immutable/assets/hero.u8BEqUl_.avif 1x, /_app/immutable/assets/hero.LFrqv3X0.avif 2x" sizes="min(1536px, 100vw)" type="image/avif" class="svelte-14gj9rq"><source srcset="/_app/immutable/assets/hero.CKxIXTle.webp 1x, /_app/immutable/assets/hero.DAVKIi1O.webp 2x" sizes="min(1536px, 100vw)" type="image/webp" class="svelte-14gj9rq"><source srcset="/_app/immutable/assets/hero.ZY5Je-2-.jpg 1x, /_app/immutable/assets/hero.xHvcAvrs.jpg 2x" sizes="min(1536px, 100vw)" type="image/jpeg" class="svelte-14gj9rq"><!--]--> <img src="/_app/immutable/assets/hero.xHvcAvrs.jpg" alt="Practical Bitwise Tricks in Everyday Code hero image" loading="lazy" class="hero-image hero-background-image svelte-14gj9rq" width="1536" height="1024" onload="this.__e=event" onerror="this.__e=event"></picture><!--]--><!--]--> <div class="hero-content svelte-14gj9rq"><hgroup class="svelte-14gj9rq"><div class="post-meta svelte-14gj9rq"><time datetime="2024-06-15" class="publish-date svelte-14gj9rq">2025-07-07</time> <span class="meta-separator svelte-14gj9rq">•</span> <span class="author-name svelte-14gj9rq">by Aleksey Maltsev</span></div> <h1 class="space-title svelte-14gj9rq">Practical Bitwise Tricks in Everyday Code</h1> <!--[--><p class="post-preview svelte-14gj9rq">An opinionated and short collection of bitwise tricks that make sense at an average 1x engineer's code.</p><!--]--></hgroup></div></div><!----> <article class="svelte-13skhvo"><div class="post-navigation top-navigation svelte-13skhvo"><!--[--><a href="/blog" class="button primary medium svelte-1edpa7d"><!---->← Back to all posts<!----></a><!--]--><!----></div> <!--[!--><!--]--> <div class="prose"><p>I’m not exactly a big fan of writing bitwise operations everywhere. Don’t get me wrong, I still enjoy this kind of “brain gymnastics”, but sometimes it gets out of hand.</p> <p>Let me show you a classic example. Can you guess what this code does?</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">a </span><span style="color:#89DDFF;--shiki-dark:#F97583">^=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> b</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">b </span><span style="color:#89DDFF;--shiki-dark:#F97583">^=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> a</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">a </span><span style="color:#89DDFF;--shiki-dark:#F97583">^=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> b</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span></span></code></pre><!----> <p>Three XOR operations look neat, right? XOR tricks can be pretty cool when <a href="https://maltsev.space/blog/010-cuckoo-filters#fingerprints-and-partial-key-cuckoo-hashing" rel="nofollow">used properly</a>. But in this case, all it does is something very common in everyday code:</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;--shiki-dark:#F97583">var</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> temp</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> a</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">a </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> b</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">b </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> temp</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span></span></code></pre><!----> <p>Yep, just a plain old swap of two variables.</p> <p>I’ve used the XOR version maybe twice in my life: once during a university assignment and once in early job interviews (which I’d rather not relive, lol). So, which version do you think is easier to read?</p> <p>If you’re unsure, here’s the funnier part: the XOR version <a href="https://en.wikipedia.org/wiki/XOR_swap_algorithm#Reasons_for_avoidance_in_practice" rel="nofollow">isn’t even faster</a> thanks to how modern CPUs handle operations.</p> <p>Still, you’ll run into this kind of code, especially in tight loops in libraries or low-level systems. In this short article, I’ll walk you through some real-world bitwise operations I’ve seen in the wild, the ones that make sense, and the ones I occasionally write myself.</p> <h2 id="contents"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#contents">#</a>Contents</h2> <ul><li><a href="#case-1-multiplying-and-dividing-by-two">Case 1: Multiplying and Dividing by Two</a></li> <li><a href="#case-2-extracting-parts-of-a-big-value">Case 2: Extracting Parts of a Big Value</a></li> <li><a href="#case-3-modulo-operation-for-power-of-two-integers">Case 3: Modulo Operation for Power-of-Two Integers</a></li> <li><a href="#case-4-working-with-binary-flags">Case 4: Working with Binary Flags</a></li> <li><a href="#stay-hungry-reasonable">Stay <del>Hungry</del> Reasonable</a></li></ul> <h2 id="case-1-multiplying-and-dividing-by-two"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#case-1-multiplying-and-dividing-by-two">#</a>Case 1: Multiplying and Dividing by Two</h2> <p>Let’s start with a simple micro-optimization—replacing multiplication and division by powers of two with bitwise shifts.</p> <p>If you’re not yet comfortable with binary math, here’s the basic idea: binary numbers are built on powers of two. Each bit represents a multiplier of 2 raised to some power.</p> <p>For example, the binary number <code>1011</code> is interpreted like this:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>1</mn><mo>⋅</mo><msup><mn>2</mn><mn>3</mn></msup><mo>+</mo><mn>0</mn><mo>⋅</mo><msup><mn>2</mn><mn>2</mn></msup><mo>+</mo><mn>1</mn><mo>⋅</mo><msup><mn>2</mn><mn>1</mn></msup><mo>+</mo><mn>1</mn><mo>⋅</mo><msup><mn>2</mn><mn>0</mn></msup><mo>=</mo><mn>8</mn><mo>+</mo><mn>0</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>1</mn><mo>=</mo><mn>11</mn></mrow><annotation encoding="application/x-tex">1⋅2^3+0⋅2^2+1⋅2^1+1⋅2^0=8+0+2+1=11</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">11</span></span></span></span></span><!----></div> <p>You can think of each left shift (<code>&lt;&lt;</code>) as multiplying by 2, and each right shift (<code>>></code>) as dividing by 2 — just like moving the decimal point in base-10 multiplies or divides by 10.</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;--shiki-dark:#F97583">var</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> doubled</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> x </span><span style="color:#89DDFF;--shiki-dark:#F97583">&#x3C;&#x3C;</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 1</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // x * 2</span></span>
<span class="line"><span style="color:#FFCB6B;--shiki-dark:#F97583">var</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> half</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> x </span><span style="color:#89DDFF;--shiki-dark:#F97583">>></span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 1</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit">    // x / 2</span></span></code></pre><!----> <p>For example, if <code>var x = 6</code>, then:</p> <ul><li><code>x &lt;&lt; 1</code> becomes <code>12</code></li> <li><code>x >> 1</code> becomes <code>3</code></li></ul> <p>This works because shifting left fills in zeros on the right (doubling the value), while shifting right drops the least significant bit, i.e., halving it.</p> <h2 id="case-2-extracting-parts-of-a-big-value"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#case-2-extracting-parts-of-a-big-value">#</a>Case 2: Extracting Parts of a Big Value</h2> <p>Go on with another widespread use case. Imagine you’re working with a hashing function that gives you a 64-bit unsigned integer. But in your code, you actually need two 32-bit values instead. Maybe you want to use one for bucketing and the other for a cache key — whatever the case, you’d prefer to avoid hashing twice if you can just reuse the result.</p> <p>So, how do we split that big 64-bit value into smaller chunks?</p> <p>Again, the answer is <strong>bitwise shifts and binary masks:</strong></p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">ulong</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> hash</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 0x1122334455667788</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">uint</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> hi</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8"> (</span><span style="color:#89DDFF;--shiki-dark:#F97583">uint</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">)(</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">hash </span><span style="color:#89DDFF;--shiki-dark:#F97583">>></span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 32</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">);</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit">        // extract the upper 32 bits</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">uint</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> lo</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8"> (</span><span style="color:#89DDFF;--shiki-dark:#F97583">uint</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">)(</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">hash </span><span style="color:#89DDFF;--shiki-dark:#F97583">&#x26;</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 0xFFFFFFFF</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">);</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // extract the lower 32 bits</span></span></code></pre><!----> <p>Now <code>hi</code> contains <code>0x11223344</code> and <code>lo</code> contains <code>0x55667788</code>.</p> <p>So what exactly happens:</p> <ul><li><code>hash >> 32</code> shifts the 64-bit value 32 bits to the right, dropping the lower half, leaving just the upper 32 bits.</li> <li><code>hash &amp; 0xFFFFFFFF</code> masks the upper bits, keeping only the lower 32. The result of the bitwise AND will leave only those bits that are set both in the value and the mask. The upper bits will be reset in this example because they are all zero in the mask.</li></ul> <h2 id="case-3-modulo-operation-for-power-of-two-integers"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#case-3-modulo-operation-for-power-of-two-integers">#</a>Case 3: Modulo Operation for Power-of-Two Integers</h2> <p>This little trick always appears in real-world systems, especially in hash tables and circular buffers.</p> <p>Let’s say you want to map a hashed value to an index in an array:</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;--shiki-dark:#F97583">var</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> index</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> x </span><span style="color:#89DDFF;--shiki-dark:#F97583">%</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 8</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span></span></code></pre><!----> <p>Here, <code>x</code> is a large hashed integer (often 64 bits), and you want to map it into an array of 8 buckets. The modulo operation (<code>%</code>) is the obvious choice, but it’s not the fastest one.</p> <p>When the array size is a <strong>power of two</strong> — like 2, 4, 8, 16, and so on — you can use bitwise masking instead:</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;--shiki-dark:#F97583">var</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> index</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> x </span><span style="color:#89DDFF;--shiki-dark:#F97583">&#x26;</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 7</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // same as x % 8, but faster</span></span></code></pre><!----> <p>Because when the divisor is a power of two, the result of <code>x % N</code> is just the last few bits of <code>x</code>. In this example:</p> <ul><li><code>8</code> in binary is <code>1000</code>, so <code>8 - 1 = 7</code> is <code>0111</code> (<code>0b111</code>)</li> <li>Doing <code>x &amp; 0b111</code> keeps only the last 3 bits of <code>x</code>, which gives the same result as <code>x % 8</code></li></ul> <p>This is faster than the modulo operation, which usually requires a division under the hood.</p> <h2 id="case-4-working-with-binary-flags"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#case-4-working-with-binary-flags">#</a>Case 4: Working with Binary Flags</h2> <p>Bitwise flags are one of the oldest tricks and are still incredibly useful. They let you store and manipulate multiple boolean values in a single number. For example, if you change file permissions in Linux, you use binary flags.</p> <p>Instead of using a bunch of <code>bool</code> variables, you can just use bits to represent flags:</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#C792EA;--shiki-dark:#F97583">const</span><span style="color:#89DDFF;--shiki-dark:#F97583"> int</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> FlagRead</span><span style="color:#89DDFF;--shiki-dark:#F97583">   =</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 1</span><span style="color:#89DDFF;--shiki-dark:#F97583"> &#x3C;&#x3C;</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 0</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // 0001</span></span>
<span class="line"><span style="color:#C792EA;--shiki-dark:#F97583">const</span><span style="color:#89DDFF;--shiki-dark:#F97583"> int</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> FlagWrite</span><span style="color:#89DDFF;--shiki-dark:#F97583">  =</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 1</span><span style="color:#89DDFF;--shiki-dark:#F97583"> &#x3C;&#x3C;</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 1</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // 0010</span></span>
<span class="line"><span style="color:#C792EA;--shiki-dark:#F97583">const</span><span style="color:#89DDFF;--shiki-dark:#F97583"> int</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> FlagDelete</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 1</span><span style="color:#89DDFF;--shiki-dark:#F97583"> &#x3C;&#x3C;</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 2</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // 0100</span></span></code></pre><!----> <p>Each flag is a single bit turned on in a different position. Then, you can combine them using bitwise OR:</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;--shiki-dark:#F97583">var</span><span style="color:#FFCB6B;--shiki-dark:#B392F0"> permissions</span><span style="color:#89DDFF;--shiki-dark:#F97583"> =</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> FlagRead </span><span style="color:#89DDFF;--shiki-dark:#F97583">|</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> FlagWrite</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // 0001 | 0010 = 0011</span></span></code></pre><!----> <p>Now <code>permissions</code> hold both the “read” and “write” flags.</p> <p>To see if a specific flag is set, use bitwise AND:</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;--shiki-dark:#F97583;--shiki-dark-font-style:inherit">if</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8"> ((</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">permissions </span><span style="color:#89DDFF;--shiki-dark:#F97583">&#x26;</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> FlagRead</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">)</span><span style="color:#89DDFF;--shiki-dark:#F97583"> !=</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 0</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#E1E4E8">&#123;</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">    Console</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">.</span><span style="color:#82AAFF;--shiki-dark:#B392F0">WriteLine</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">(</span><span style="color:#89DDFF;--shiki-dark:#9ECBFF">"</span><span style="color:#C3E88D;--shiki-dark:#9ECBFF">Can read!</span><span style="color:#89DDFF;--shiki-dark:#9ECBFF">"</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">);</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#E1E4E8">&#125;</span></span></code></pre><!----> <p>If the flag bit is on, the result of the <code>&amp;</code> will be non-zero.</p> <p>To turn off a specific flag, use bitwise AND with the negated flag:</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">permissions </span><span style="color:#89DDFF;--shiki-dark:#F97583">&#x26;=</span><span style="color:#89DDFF;--shiki-dark:#F97583"> ~</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">FlagWrite</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // remove write access</span></span></code></pre><!----> <p>Here, <code>~FlagWrite</code> flips the bits of <code>FlagWrite</code>, ones become zeros and vice-versa, so the AND clears set bits in <code>FlagWrite</code>.</p> <p>You can also flip a flag on/off using XOR:</p> <!----><pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">permissions </span><span style="color:#89DDFF;--shiki-dark:#F97583">^=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> FlagDelete</span><span style="color:#89DDFF;--shiki-dark:#E1E4E8">;</span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit"> // toggles delete permission</span></span></code></pre><!----> <p>If the flag is off, it turns on; if it is on, it turns off.</p> <p>Using bit flags is super compact; for example, one 64-bit integer can store 64 flags. This is especially handy when packing lots of booleans into memory-efficient structures and implementing a general approach to <a href="https://maltsev.space/blog/001-binary-shifts-for-flags" rel="nofollow">C-flavored enums, e.g., in C#</a>.</p> <h2 id="stay-hungry-reasonable"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#stay-hungry-reasonable">#</a>Stay <del>Hungry</del> Reasonable</h2> <p>I hope this article gave you a useful peek into some real-world bitwise operations and shared some of my experience using them in practice.</p> <p>Bitwise tricks can be powerful, fun, and sometimes even elegant — but like many low-level optimizations, they come with a trade-off in <strong>readability</strong>.</p> <p>In most cases, writing code that’s easy to understand is far more valuable than squeezing out a few extra CPU cycles. Your future self or teammate will thank you when debugging that code six months later.</p> <p>So, use bitwise operations wisely. When things start looking too clever or cryptic, take a step back. A small, well-named function or abstraction helps distinguish between a clever trick and an unreadable mess.</p><!----></div> <footer class="post-footer svelte-13skhvo"><div class="post-navigation svelte-13skhvo"><!--[--><a href="/blog" class="button primary medium svelte-1edpa7d"><!---->← Back to all posts<!----></a><!--]--><!----></div> <!--[!--><!--]--> <div class="card default svelte-1f4837s"><!--[!--><!--]--> <div class="card-content svelte-1f4837s"><div class="share-message svelte-13skhvo">Enjoyed this post? Share it with the universe!</div> <div class="share-buttons svelte-13skhvo"><a class="link default share-link twitter svelte-blzdii" target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?text=Practical%20Bitwise%20Tricks%20in%20Everyday%20Code&amp;url=" aria-label="Share on Twitter"><!---->Twitter<!----> <!--[!--><!--]--></a><!----> <a class="link default share-link linkedin svelte-blzdii" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Practical%20Bitwise%20Tricks%20in%20Everyday%20Code&amp;url=" aria-label="Share on LinkedIn"><!---->LinkedIn<!----> <!--[!--><!--]--></a><!----> <a class="link default share-link facebook svelte-blzdii" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u=" aria-label="Share on Facebook"><!---->Facebook<!----> <!--[!--><!--]--></a><!----></div><!----></div> <!--[!--><!--]--></div><!----></footer></article><!----><!----></div></main> <footer class="svelte-1mbgpkc"><div class="space-container"><p class="space-text-small">© 2025 | Aleksey Maltsev</p></div></footer><!----></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_fas9zl = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.BvDvSQpW.js"),
						import("../_app/immutable/entry/app.DcQk_lIL.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 7],
							data: [null,{type:"data",data:{placeholderUrl:void 0},uses:{params:["slug"]}}],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
