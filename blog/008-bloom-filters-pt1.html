<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, maximum-scale=5, viewport-fit=cover"
		/>

		<!-- Favicons -->
		<link rel="icon" type="image/png" href="../favicon-96x96.png" sizes="96x96" />
		<link rel="icon" type="image/svg+xml" href="../favicon.svg" />
		<link rel="shortcut icon" href="../favicon.ico" />
		<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png" />
		<meta name="apple-mobile-web-app-title" content="Maltsev.Space" />
		<link rel="manifest" href="../site.webmanifest" />
		
		<link href="../_app/immutable/assets/one-column-layout.dk0RUYX7.css" rel="stylesheet">
		<link href="../_app/immutable/assets/tag-cloud.BFeWGeNI.css" rel="stylesheet">
		<link href="../_app/immutable/assets/0.Bz1Rqbdb.css" rel="stylesheet">
		<link href="../_app/immutable/assets/posts.BYtmJbQG.css" rel="stylesheet">
		<link href="../_app/immutable/assets/8.xEcK-EdQ.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.gYC26-Am.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DVbIxDW7.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/gL4yRitO.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dkazavay.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CYgJF_JY.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.CLSpLdjE.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dp1pzeXC.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/FC-Yzx7w.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Ix_iQA8O.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.D-UldnSQ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CgpvT9E8.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Cbg54n8Y.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DasYoi_Y.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/8.CGD7iKry.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CYcIynw4.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DTd9YT4P.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D4zUk_qf.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DNSHY1Ls.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BhAgQEr3.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BBRK2HUr.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/1kdzElit.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BnxOsVrN.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C0eIpL-d.js"><!--[--><link rel="alternate" type="application/rss+xml" title="Aleksey Maltsev's Blog" href="/rss.xml"> <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"><!--]--><!--[--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous"><!--]--><!--[--><meta name="description" content="How a tiny data structure cuts memory usage by 90% — while helping systems instantly check if data exists."> <link rel="canonical" href="https://maltsev.space/blog/008-bloom-filters-pt1"> <!--[!--><meta name="robots" content="index, follow"><!--]--> <meta property="og:type" content="article"> <meta property="og:title" content="Grokking Bloom Filters: The Classic Bloom Filter Demystified | MALTSEV.SPACE"> <meta property="og:description" content="How a tiny data structure cuts memory usage by 90% — while helping systems instantly check if data exists."> <meta property="og:image" content="https://maltsev.space/images/og/008-bloom-filters-pt1.jpg"> <meta property="og:image:alt" content="Grokking Bloom Filters: The Classic Bloom Filter Demystified - Grokking Bloom Filters: The Classic Bloom Filter Demystified"> <meta property="og:url" content="https://maltsev.space/blog/008-bloom-filters-pt1"> <meta property="og:site_name" content="MALTSEV.SPACE"> <meta property="og:locale" content="en_US"> <!--[--><!--[--><meta property="article:published_time" content="2025-06-09T00:00:00.000Z"><!--]--> <!--[!--><!--]--> <!--[--><meta property="article:author" content="Aleksey Maltsev"><!--]--> <meta property="article:section" content="Technology"> <!--[--><meta property="article:tag" content="Bloom filters"><meta property="article:tag" content="Probabilistic data structures"><meta property="article:tag" content="Hash functions"><meta property="article:tag" content="Bit arrays"><meta property="article:tag" content="Algorithms"><!--]--><!--]--> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title" content="Grokking Bloom Filters: The Classic Bloom Filter Demystified | MALTSEV.SPACE"> <meta name="twitter:description" content="How a tiny data structure cuts memory usage by 90% — while helping systems instantly check if data exists."> <meta name="twitter:image" content="https://maltsev.space/images/og/008-bloom-filters-pt1.jpg"> <meta name="twitter:image:alt" content="Grokking Bloom Filters: The Classic Bloom Filter Demystified - Grokking Bloom Filters: The Classic Bloom Filter Demystified"> <meta name="twitter:site" content="@axel_user"> <meta name="twitter:creator" content="@axel_user">  <!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Aleksey Maltsev","jobTitle":"Senior Software Engineer","description":"Senior Software Engineer focused on distributed systems and highload applications","url":"https://maltsev.space/","image":"https://maltsev.space/images/ava.jpg","sameAs":["https://github.com/AxelUser","https://www.linkedin.com/in/dev-alexey-maltsev/"]}</script><!----> <!--[!--><!--]--> <!--[--><!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Grokking Bloom Filters: The Classic Bloom Filter Demystified","description":"How a tiny data structure cuts memory usage by 90% — while helping systems instantly check if data exists.","image":"https://maltsev.space/images/og/008-bloom-filters-pt1.jpg","author":{"@context":"https://schema.org","@type":"Person","name":"Aleksey Maltsev","jobTitle":"Senior Software Engineer","description":"Senior Software Engineer focused on distributed systems and highload applications","url":"https://maltsev.space/","image":"https://maltsev.space/images/ava.jpg","sameAs":["https://github.com/AxelUser","https://www.linkedin.com/in/dev-alexey-maltsev/"]},"publisher":{"@context":"https://schema.org","@type":"Person","name":"Aleksey Maltsev","jobTitle":"Senior Software Engineer","description":"Senior Software Engineer focused on distributed systems and highload applications","url":"https://maltsev.space/","image":"https://maltsev.space/images/ava.jpg","sameAs":["https://github.com/AxelUser","https://www.linkedin.com/in/dev-alexey-maltsev/"]},"url":"https://maltsev.space/blog/008-bloom-filters-pt1","datePublished":"2025-06-09T00:00:00.000Z","dateModified":"2025-06-09T00:00:00.000Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://maltsev.space/blog/008-bloom-filters-pt1"},"keywords":["Bloom filters","Probabilistic data structures","Hash functions","Bit arrays","Algorithms"]}</script><!----><!--]--><!--]--><title>Grokking Bloom Filters: The Classic Bloom Filter Demystified | MALTSEV.SPACE</title>
	</head>

	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><div class="space-layout svelte-144yekp"><header class="svelte-1eq0cli"><div class="space-container nav-bar svelte-7gsxae"><div class="logo svelte-1eq0cli"><a href="/" class="svelte-1eq0cli">MALTSEV.SPACE</a></div> <ul class="nav-links svelte-1eq0cli"><li><a class="nav-link svelte-1eq0cli" href="/">Home</a></li> <li><a class="nav-link svelte-1eq0cli" href="/about">About</a></li> <li><a class="nav-link svelte-1eq0cli" href="/art">Gallery</a></li> <li><a class="nav-link svelte-1eq0cli" href="/blog">Blog</a></li></ul> <div class="nav-actions svelte-1eq0cli"><a href="/rss.xml" class="rss-link nav-link svelte-1eq0cli" aria-label="RSS Feed"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="lucide-icon lucide lucide-rss"><!--[--><!----><path d="M4 11a9 9 0 0 1 9 9"><!----></path><!----><!----><path d="M4 4a16 16 0 0 1 16 16"><!----></path><!----><!----><circle cx="5" cy="19" r="1"><!----></circle><!----><!--]--><!----><!----></svg><!----></a> <div class="theme-switch svelte-awph5w"><button class="theme-button svelte-awph5w" title="Light theme" aria-label="Light theme"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-icon lucide lucide-sun"><!--[--><!----><circle cx="12" cy="12" r="4"><!----></circle><!----><!----><path d="M12 2v2"><!----></path><!----><!----><path d="M12 20v2"><!----></path><!----><!----><path d="m4.93 4.93 1.41 1.41"><!----></path><!----><!----><path d="m17.66 17.66 1.41 1.41"><!----></path><!----><!----><path d="M2 12h2"><!----></path><!----><!----><path d="M20 12h2"><!----></path><!----><!----><path d="m6.34 17.66-1.41 1.41"><!----></path><!----><!----><path d="m19.07 4.93-1.41 1.41"><!----></path><!----><!--]--><!----><!----></svg><!----></button> <button class="theme-button svelte-awph5w" title="Dark theme" aria-label="Dark theme"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-icon lucide lucide-moon"><!--[--><!----><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"><!----></path><!----><!--]--><!----><!----></svg><!----></button> <button class="theme-button svelte-awph5w active" title="System theme" aria-label="System theme"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-icon lucide lucide-laptop"><!--[--><!----><path d="M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16"><!----></path><!----><!--]--><!----><!----></svg><!----></button></div><!----> <button class="mobile-menu-toggle svelte-1eq0cli" aria-label="Toggle menu"><!--[!--><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="lucide-icon lucide lucide-menu"><!--[--><!----><path d="M4 12h16"><!----></path><!----><!----><path d="M4 18h16"><!----></path><!----><!----><path d="M4 6h16"><!----></path><!----><!--]--><!----><!----></svg><!--]--></button></div><!----></div><!----> <div class="mobile-nav svelte-1eq0cli"><ul class="svelte-1eq0cli"><li class="svelte-1eq0cli"><a class="nav-link svelte-1eq0cli" href="/">Home</a></li> <li class="svelte-1eq0cli"><a class="nav-link svelte-1eq0cli" href="/about">About</a></li> <li class="svelte-1eq0cli"><a class="nav-link svelte-1eq0cli" href="/art">Gallery</a></li> <li class="svelte-1eq0cli"><a class="nav-link svelte-1eq0cli" href="/blog">Blog</a></li></ul></div></header><!----> <div class="stars-background svelte-17d2dmw"><!--[--><!--]--></div><!----> <main class="svelte-144yekp"><!--[!--><!----><!----> <div class="hero-background-container svelte-1hqqpnh"><!--[--><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAYAAABqBU3hAAAMEElEQVR4AQCBAH7/AD5fRv88XEP/OFc+/zRQN/8ySjL/M0cu/zZFLf88Ri7/Q0gw/0pKMv9PSjL/UUgw/1FELf9QPyj/Tjsl/005I/9OOiT/UT0n/1VCLP9YRzH/WUs2/1dMN/9SSzf/Skg0/0JFMP87QS3/NkAs/zNCLv80RTL/Nko3/zlPO/87UT7/AIEAfv8ARGRL/0JhR/8+W0L/OlU7/zhPNv85SzL/PEox/0JLMv9JTTT/T042/1RONv9XTDT/Vkgw/1VDLP9TPyj/Uj0m/1M9J/9WQSr/WkUv/11LNP9eTjn/XFA7/1dPOv9QTDf/SEk0/0BGMf87RTD/OUYy/zlKNf88Tzr/PlM//0BWQf8AgQB+/wBQbVL/TWlP/0lkSf9GXUL/Q1c9/0RTOf9HUjj/TVM5/1NUO/9aVjz/X1U8/2FTOv9gTzb/Xkox/1xGLf9cQyv/XEQs/19HL/9iTDT/ZVE6/2dVPv9lV0D/YFZA/1lTPf9RUDr/Sk03/0VMNv9DTjj/RFI8/0ZXQf9JW0X/S15I/wCBAH7/AF53W/9cc1f/WG5S/1RnS/9RYUX/Ul1B/1VbQP9aXEH/YV5C/2dfRP9sX0T/blxB/21YPf9rUzj/aE40/2dLMv9oTDL/ak41/25TOv9xWUD/cl1E/3FfR/9sX0b/ZlxE/15ZQf9XVz//UlY+/1BYQP9RXET/U2FJ/1ZlTv9YaFD/AIEAfv8AbYFj/2t9X/9nd1n/Y3BT/2BqTf9gZkn/Y2VH/2llSP9vZ0r/dWhL/3lnS/97ZUj/emBE/3hbPv91Vjr/dFM3/3RTN/92Vjr/elo//31gRf9+ZEr/fWdM/3lnTf9zZUv/bGJI/2VgRv9gYEb/X2JI/19mTP9ia1H/ZG9W/2ZyWP8AgQB+/wB7iGj/eIRl/3R+X/9weFj/bXFS/21tTv9wa0z/dmxN/3xtTv+Cbk//hm5P/4drTP+GZkj/g2BC/4BbPf9/WDr/f1g6/4FbPf+EX0L/h2VI/4lqTf+IbVD/hW1R/39sUP94ak3/cmhM/25oTP9sak7/bW5S/29zV/9yeFz/dHpe/wCBAH7/AIaMav+DiGb/f4Jg/3p7Wf94dVP/d3BP/3pvTf+Ab07/hnFP/4xyUf+QcVD/kW5N/5BpSP+NY0P/iV49/4daOv+HWjr/iV09/4xhQv+PZ0j/kmxN/5FwUf+OcVL/iXBR/4JuUP99bU7/eW1P/3dwUf94dFX/enla/319X/9/gGL/AIEAfv8AjItn/4qHZP+FgV7/gXpX/350UP9+b0z/gW5K/4ZuS/+McE3/knFO/5ZwTf+XbUv/lmhG/5JiQP+PXTr/jFk3/4xYNv+OWzn/kWA+/5RmRP+XbEr/l29O/5RxUP+PcVD/inBP/4RvTv+Ab07/f3JR/4B2Vf+Ce1r/hX9f/4eCYf8AgQB+/wCQhmH/jYNe/4l9WP+EdVD/gW9K/4BqRv+DaUT/iWlF/49rR/+VbUj/mWxI/5ppRf+ZZED/lV46/5JYNP+PVTH/jlQw/5BWM/+TWzj/l2I+/5loRP+abEn/l25L/5NuS/+Obkv/iG1K/4VuS/+EcU7/hXVS/4d6V/+Kflz/i4Fe/wCBAH7/AJB/Wf+NfFb/iXVP/4RuSP+BZ0H/gWM9/4NhPP+JYjz/j2Q+/5ZmQP+aZkD/m2M9/5peOf+WWDP/klIt/49OKf+OTSj/kFAr/5NVMP+WWzb/mWI9/5pmQf+YaUT/lGpF/49pRf+KaUT/h2pG/4ZtSP+HcU3/iXZS/4t7Vv+NfVn/AIEAfv8AkHdR/410Tf+IbUf/g2Y//4BfOP9/WjT/glkz/4haNP+PXDb/lV44/5leOP+bXDb/mVcx/5ZRK/+SSyX/jkch/41GIP+OSSP/kk4o/5VULv+YWzX/mWA6/5djPf+UZD7/j2Q+/4pkPv+HZT//hmhC/4dsRv+JcUv/i3VP/414Uv8AgQB+/wCPcEn/jGxF/4dlP/+CXjf/flcw/35SLP+BUSr/hlIs/41VLv+UVzD/mVcx/5tVL/+ZUSv/lksl/5FFH/+OQRv/jEAZ/41CG/+QRyD/lE0n/5dULf+YWTP/llw2/5NeN/+OXjf/il44/4ZfOf+FYjz/hmZA/4hrRf+Kb0n/i3JL/wCBAH7/AI9qRP+MZkD/h185/4JXMf9+UCr/fUsm/4BKJP+GSyb/jU4o/5RRK/+ZUiz/m1Aq/5pMJv+WRiD/kkAa/448Fv+MOxT/jTwW/5BBG/+TSCH/lk4o/5dTLf+VVzD/klgy/41ZMv+JWTP/hVo0/4RdNv+EYTr/hmY//4hqQ/+KbEX/AIEAfv8AkGVB/41hPf+IWjb/glIu/35LJv99RiL/gEUg/4ZGIv+OSSX/lU0o/5pOKf+cTSj/m0kj/5hDHv+TPRj/jzgT/403Ev+NORP/kD0Y/5NDHv+VSST/lk8p/5VSLP+RVC7/jVQu/4hVL/+EVjD/g1gy/4NcNv+FYTv/h2Q+/4hnQf8AgQB+/wCTY0D/j148/4pXNP+ETyz/f0ck/35DIP+BQR7/h0Mg/49GI/+WSSb/nEso/55KJ/+dRiP/mkEd/5U7F/+RNhL/jjQQ/442Ev+QOhb/k0Ab/5VGIv+WSyf/lE4q/5FQK/+MUCz/h1Es/4NSLf+CVC//glgz/4NcN/+FYDv/hmI9/wCBAH7/AJVhQP+RXDz/i1U0/4VMK/+BRCT/fz8f/4I+Hf+HPx7/j0Mi/5dHJf+dSSf/oEgm/59EI/+bPx3/lzkX/5I0Ev+PMhD/jzMR/5A3Ff+SPRr/lEMg/5VIJf+TSyj/j0wp/4pNKf+FTSr/gk4q/4BQLf9/UzD/gVg0/4JbOP+DXTr/AIEAfv8All9A/5JaPP+MUzT/hkkr/4FBI/9/PB7/gToc/4c8Hf+PQCH/l0Ql/51GJ/+gRSb/n0Ij/5w9Hf+XNxf/kjIS/48wEP+OMBD/jzQU/5E5Gf+TPx7/k0Qj/5FHJv+NSCf/iEgn/4NIJ/9/SSj/fUsq/3xPLf99UzH/f1Y0/4BYNv8AgQB+/wCWXED/klc7/4xPM/+FRir/fz4h/304HP9/Nhr/hTgb/407H/+VPyP/nEIl/59CJf+ePyL/mzoc/5Y0Fv+RLxH/jiwO/4wtD/+NMBL/jjUW/5A6HP+QPyD/jUIj/4lDJP+EQyT/f0Mk/3tEJP94Rib/eEkp/3lNLf96UDD/e1Iy/wCBAH7/AJRYPv+QUzr/iUsx/4JBKP98OR//ejMZ/3wxF/+CMhj/ijYc/5I6IP+YPSP/nD0j/5s6H/+YNRr/ky8U/44qD/+KKAz/iSgM/4krD/+KMBP/izUY/4s5Hf+JPB//hD0g/389IP96PSD/dT4g/3NAIv9yQyX/c0Yp/3RKLP91TC7/AIEAfv8AkVM8/41ON/+GRi7/fjwk/3gzG/92LRX/dysT/30sFP+FMBj/jTQc/5Q3H/+XOB//lzUc/5QwF/+PKhH/iiUM/4YiCf+EIgj/hCUL/4UqD/+GLxT/hTMY/4M2G/9/Nxz/eTcc/3Q3G/9vNxz/bTkd/2w8IP9sQCT/bkMn/25FKf8AgQB+/wCNTjn/iUk0/4JBK/96NiH/cy0X/3EnEf9yJQ//eCYQ/4AqFP+ILhj/jzIb/5IyG/+SMBj/jysT/4olDf+FIAj/gR0F/38dBP9/IAf/gCQL/4ApEP+ALRT/fTAW/3kxF/9zMRf/bjEX/2kxF/9nMxn/ZjYb/2Y5H/9oPSL/aD4k/wCBAH7/AIlKNv+FRTH/fjwo/3YyHv9wKRT/bSIO/24gC/9zIQz/eyUQ/4QqFP+LLRf/ji4Y/44rFf+LJhD/hiEK/4EcBf99GQL/exkB/3sbBP97IAj/fCQM/3spEP95KxP/dCwU/28sE/9pLBP/ZS0T/2IuFf9hMRj/YjUb/2M4Hv9jOiD/AYEAfv8Ah0g0/4NDL/98Oib/dC8c/20mEv9qIAz/bB0J/3EfCv95Ig7/gScS/4gqFv+MKxb/jCkT/4kkDv+EHgj/fxkD/3sWAP95FgD/eBkC/3kdBv96Igr/eSYO/3YpEf9yKhL/bCoR/2cpEf9iKhH/XywT/14uFv9fMhn/YDUc/2E3Hv/V27ZIOcHyxwAAAABJRU5ErkJggg==" alt="Grokking Bloom Filters: The Classic Bloom Filter Demystified hero image placeholder" class="hero-image hero-placeholder-image svelte-1hqqpnh"> <!--[!--><picture class="svelte-1hqqpnh"><!--[--><source srcset="/_app/immutable/assets/hero.DoVjsBJ1.avif 1x, /_app/immutable/assets/hero.Bl5KWx3w.avif 2x" sizes="min(1536px, 100vw)" type="image/avif" class="svelte-1hqqpnh"><source srcset="/_app/immutable/assets/hero.GWTMgIUX.webp 1x, /_app/immutable/assets/hero.Df6Q8ZJN.webp 2x" sizes="min(1536px, 100vw)" type="image/webp" class="svelte-1hqqpnh"><source srcset="/_app/immutable/assets/hero.i5YRCxmZ.jpg 1x, /_app/immutable/assets/hero.BjPMHwQe.jpg 2x" sizes="min(1536px, 100vw)" type="image/jpeg" class="svelte-1hqqpnh"><!--]--> <img src="/_app/immutable/assets/hero.BjPMHwQe.jpg" alt="Grokking Bloom Filters: The Classic Bloom Filter Demystified hero image" loading="lazy" class="hero-image hero-background-image svelte-1hqqpnh" width="1536" height="1024" onload="this.__e=event" onerror="this.__e=event"></picture><!--]--><!--]--> <div class="hero-content svelte-1hqqpnh"><hgroup class="svelte-1hqqpnh"><div class="post-meta svelte-1hqqpnh"><time datetime="2024-06-15" class="meta-item svelte-1hqqpnh">2025-06-09</time> <span class="meta-separator svelte-1hqqpnh">•</span> <span class="meta-item svelte-1hqqpnh">by Aleksey Maltsev</span> <!--[--><span class="meta-separator svelte-1hqqpnh">•</span> <span class="meta-item svelte-1hqqpnh">21 min</span><!--]--> <!--[--><span class="meta-separator svelte-1hqqpnh">•</span> <span class="meta-item svelte-1hqqpnh">1,694 views</span><!--]--></div> <h1 class="space-title svelte-1hqqpnh">Grokking Bloom Filters: The Classic Bloom Filter Demystified</h1> <!--[--><p class="post-preview svelte-1hqqpnh">How a tiny data structure cuts memory usage by 90% — while helping systems instantly check if data exists.</p><!--]--></hgroup></div></div><!----> <div class="space-container undefined svelte-7gsxae"><article class="svelte-16vu21h"><div class="post-navigation top-navigation svelte-16vu21h"><!--[--><a href="/blog" class="button primary medium svelte-1edpa7d"><!---->← Back to all posts<!----></a><!--]--><!----></div> <!--[--><!--[--><div class="series-banner svelte-2z90k"><div class="series-title svelte-2z90k">More from this series</div> <ol class="series-list svelte-2z90k"><!--[--><li class="series-item svelte-2z90k"><a href="/blog/008-bloom-filters-pt1" class="series-link svelte-2z90k">Grokking Bloom Filters: The Classic Bloom Filter Demystified</a></li><li class="series-item svelte-2z90k"><a href="/blog/009-counting-bloom-filters" class="series-link svelte-2z90k">Grokking Bloom Filters: Counting Bloom Filter</a></li><li class="series-item svelte-2z90k"><a href="/blog/010-cuckoo-filters" class="series-link svelte-2z90k">Cuckoo Filters: Better Than Bloom Filters?</a></li><!--]--></ol></div><!--]--><!--]--> <div class="prose"><p>There’s a special category of data structures known as probabilistic data structures — and I have a soft spot for some of them. One of my absolute favorites is the Bloom filter. It’s a beautifully simple concept that tackles a surprisingly common challenge: how can we quickly check whether something belongs to a set — without eating up loads of memory?</p> <p>Even though Bloom filters aren’t something most of us use directly in everyday business code, they quietly work behind the scenes in the infrastructure of modern distributed systems, databases, and web services.</p> <p>Instead of storing the actual data, Bloom filters use a clever combo of hash functions and bit arrays to give us lightning-fast answers to a very simple question: is this thing definitely not in the set — or is it maybe there?</p> <p>This post is a deep dive — it’s long, and we’ll take our time walking through how Bloom filters work, how they’re built, and how they behave. But if you’re just here to see it in action, feel free to jump straight to the <a href="#live-demo">interactive playground</a> and try it out yourself. Or, if you’re ready to tune your own Bloom filter, head over to the <a href="#play-with-the-numbers">calculator</a> to configure parameters for your use case.</p> <h2 id="contents"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#contents">#</a>Contents</h2> <ul><li><a href="#what-is-a-bloom-filter">What is a Bloom Filter?</a></li> <li><a href="#how-bloom-filters-work">How Bloom Filters Work</a> <ul><li><a href="#live-demo">Live Demo</a></li> <li><a href="#why-cant-we-delete">Why Can’t We Delete?</a></li> <li><a href="#can-it-scale">Can It Scale?</a></li></ul></li> <li><a href="#optimizing-hash-functions">Optimizing Hash Functions</a> <ul><li><a href="#double-hashing-approach">Double Hashing Approach</a></li> <li><a href="#wide-hash-split">Wide Hash Split</a></li> <li><a href="#recap">Recap</a></li></ul></li> <li><a href="#how-to-calculate-parameters">How to Calculate Parameters</a> <ul><li><a href="#the-false-positive-rate">The False Positive Rate</a></li> <li><a href="#how-parameters-affect-performance">How Parameters Affect Performance</a></li> <li><a href="#calculating-optimal-parameters">Calculating Optimal Parameters</a></li> <li><a href="#examples-with-calculations">Examples With Calculations</a></li> <li><a href="#play-with-the-numbers">Play With The Numbers</a></li></ul></li> <li><a href="#wrapping-up">Wrapping Up</a></li></ul> <h2 id="what-is-a-bloom-filter"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#what-is-a-bloom-filter">#</a>What is a Bloom Filter?</h2> <p>A Bloom filter is a space-efficient probabilistic data structure designed to test whether an element belongs to a set. The key insight behind Bloom filters is their fundamental trade-off: they can guarantee with absolute certainty that an element is <em>not</em> in the set, but when they report that an element <em>is</em> present, there’s a small chance this may be a false positive. This asymmetry makes them especially useful as a first-line filter in systems where false positives are acceptable, but false negatives are not.</p> <div class="callout" data-callout="info" data-collapsible="false"><div class="callout-title"><div class="callout-title-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div><div class="callout-title-text">Info</div></div><div class="callout-content"><p>If you’re not familiar with the terms <em>false positive</em> and <em>false negative</em>, here’s a quick translation:</p><ul><li>A <strong>false positive</strong> means the system says “yes, it’s here” when actually it’s not.</li> <li>A <strong>false negative</strong> means the system says “no, it’s not here” when actually it is.</li></ul></div></div> <p>The core idea is simple yet powerful. Rather than storing the actual elements, a Bloom filter keeps only hashed representations of the elements inside a compact bit array. This sacrifices some precision but delivers outstanding space efficiency and fast query times. For example, a typical Bloom filter with a 1% error rate requires just about 9.6 bits per element—regardless of the size of the elements themselves. That’s a significant improvement over traditional data structures like hash tables or hash sets, which must store the full data items.</p> <p>Bloom filters may report false positives — claiming an element is present when it isn’t — but they never report false negatives. This makes them extremely reliable for exclusion queries. This property has made Bloom filters invaluable in a wide range of applications, from web caching to database query optimization, where the cost of a false positive is far lower than the cost of missing a true member.</p> <h2 id="how-bloom-filters-work"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#how-bloom-filters-work">#</a>How Bloom Filters Work</h2> <p>The algorithm behind Bloom filters is elegantly built on three main components: a fixed-size bit array, multiple independent hash functions, and straightforward insertion and lookup operations. An empty Bloom filter starts as a bit array of <code>m</code> bits, all initialized to 0, and comes equipped with <code>k</code> different hash functions that map each element to exact <code>k</code> positions within the array. For optimal performance, these hash functions should ideally be independent and uniformly distributed.</p> <div class="callout" data-callout="info" data-collapsible="false"><div class="callout-title"><div class="callout-title-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div><div class="callout-title-text">Hash functions?</div></div><div class="callout-content"><p>A hash function is a function that takes an input (like a string or number) and deterministically maps it to a number within a fixed range — in this case, some positions in the bit array.
When we say that hash functions should be <strong>independent</strong>, we mean that knowing the output of one hash function doesn’t help you guess or calculate the output of another — each one works on its own, like rolling different dice.
And when we say they are <strong>uniformly distributed</strong>, we mean that they spread their results evenly across all possible positions, so no part of the resulting bit array gets overloaded with too many bits set.</p><p>Examples of commonly used hash functions include MurmurHash, xxHash, CityHash, or cryptographic ones like SHA-256 (though cryptographic hashes are usually overkill for Bloom filters).</p></div></div> <!----><pre class="mermaid">graph TD
    A["Element: 'apple'"] --> B["Hash Function 1<br/>h1('apple') = 3"]
    A --> C["Hash Function 2<br/>h2('apple') = 8"]  
    A --> D["Hash Function 3<br/>h3('apple') = 14"]
    
    B --> E["Bit Array Position 3"]
    C --> F["Bit Array Position 8"]
    D --> G["Bit Array Position 14"]
    
    E --> H["Set bit[3] = 1"]
    F --> I["Set bit[8] = 1"] 
    G --> J["Set bit[14] = 1"]
    
    H --> K["Bit Array:<br/>[0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0]"]
    I --> K
    J --> K
    
    style A fill:#5d5fef,color:#f8f9fa
    style K fill:#22d3ee,color:#212529</pre><!----> <p>Inserting an element is fast and deterministic: the element is fed into each of the <code>k</code> hash functions, producing <code>k</code> unique array positions. The bits at all these positions are then set to 1. No matter how many elements have already been inserted, this operation always requires exactly <code>k</code> hash calculations and <code>k</code> bit updates. The beauty of this approach is its simplicity—there’s no need for collision resolution or complex data structures.</p> <p>Lookup works similarly. To check whether an element might be in the set, the algorithm runs the element through the same <code>k</code> hash functions to obtain <code>k</code> positions. If any of these bits is 0, the element is definitely not in the set — this is guaranteed, since insertion would have set all these bits to 1.</p> <!----><pre class="mermaid">graph TD
    A["Query: 'banana'"] --> B["Hash Function 1<br/>h1('banana') = 3"]
    A --> C["Hash Function 2<br/>h2('banana') = 7"]  
    A --> D["Hash Function 3<br/>h3('banana') = 14"]
    
    B --> E["Check bit[3]<br/>Result: 1 ✓"]
    C --> F["Check bit[7]<br/>Result: 0 ✗"]
    D --> G["Check bit[14]<br/>Result: 1 ✓"]
    
    E --> H["Current Bit Array:<br/>[0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0]"]
    F --> H
    G --> H
    
    H --> I{"All bits = 1?"}
    I -->|"No, bit[7] = 0"| J["DEFINITELY NOT in set<br/>(No false negative)"]
    
    style A fill:#5d5fef,color:#f8f9fa
    style J fill:#dc2626,color:#f8f9fa
    style I fill:#f59e0b,color:#212529</pre><!----> <p>However, if all the bits are 1, the element <em>might</em> be in the set, but there’s also a chance that these bits were set by previous insertions of other elements. This creates the possibility of a false positive.</p> <!----><pre class="mermaid">graph TD
    A["Query: 'cherry'"] --> B["Hash Function 1<br/>h1('cherry') = 3"]
    A --> C["Hash Function 2<br/>h2('cherry') = 8"]  
    A --> D["Hash Function 3<br/>h3('cherry') = 14"]
    
    B --> E["Check bit[3]<br/>Result: 1 ✓"]
    C --> F["Check bit[8]<br/>Result: 1 ✓"]
    D --> G["Check bit[14]<br/>Result: 1 ✓"]
    
    E --> H["Current Bit Array:<br/>[0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0]"]
    F --> H
    G --> H
    
    H --> I{"All bits = 1?"}
    I -->|"Yes, all = 1"| J["POSSIBLY in set<br/>(Could be false positive)"]
    
    K["Note: 'cherry' was never inserted!<br/>But its hash positions match<br/>bits set by previous elements"]
    K -.-> J
    
    style A fill:#5d5fef,color:#f8f9fa
    style J fill:#fde047,color:#212529
    style I fill:#f59e0b,color:#212529
    style K fill:#d97706,color:#f8f9fa</pre><!----> <p>The math behind this comes from the probabilistic nature of hash collisions. As more elements are added, more bits get flipped to 1, which increases the chance that any random combination of <code>k</code> positions is already occupied, even for elements that were never inserted. That’s why the false positive rate grows with the number of elements, while the false negative rate stays at zero — if an element was inserted, it will always test as present.</p> <h3 id="live-demo"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#live-demo">#</a>Live Demo</h3> <p>Let’s get our hands dirty.</p> <p>In the interactive playground below, you can <strong>insert any string values into the Bloom filter</strong> and watch how it modifies the internal bit array. You can also <strong>check if a value is present</strong>, and see how Bloom filters may return <code>possibly present</code> even for things you never inserted — that’s our famous false positives in action.</p> <p>A few technical notes about this demo:</p> <ul><li>It uses a <strong>double hashing technique</strong> (which we’ll cover in more detail later). In short: instead of generating many completely separate hashes, it combines just two distinct hash functions to simulate any number of <code>k</code> hash functions. This approach is both efficient and widely used in real-world Bloom filters.</li> <li>For simplicity and to keep things visual, the filter here uses a very compact bit array — only <strong>16 bits</strong> (<code>m = 16</code>) and sets <code>k = 4</code> bit positions for each element.</li></ul> <p>Here’s what happens under the hood:</p> <ul><li>When you add a value: the filter applies the double hash to calculate <code>k</code> positions and flips the corresponding bits to <code>1</code>.</li> <li>When you check a value: it verifies if all these bits are still set to <code>1</code>. If yes — it says “maybe”; if any of them is <code>0</code> — it’s a definite “no”.</li></ul> <div class="bloom-filter-container svelte-1hmxjsx"><div class="layout svelte-1hmxjsx"><div class="main-content svelte-1hmxjsx"><div class="hash-display svelte-1hmxjsx"><div class="display-card svelte-ooecwa centered empty"><div class="label svelte-ooecwa">Hash 1:</div> <div class="value svelte-ooecwa fade">—</div> <!--[!--><!--]--> <!--[!--><!--]--></div><!----> <div class="display-card svelte-ooecwa centered empty"><div class="label svelte-ooecwa">Hash 2:</div> <div class="value svelte-ooecwa fade">—</div> <!--[!--><!--]--> <!--[!--><!--]--></div><!----></div> <div class="binary-display svelte-1hmxjsx"><label class="svelte-1hmxjsx">Mapped Bits:</label> <!--[!--><div class="binary-placeholder svelte-1hmxjsx"><span class="placeholder svelte-1hmxjsx">— Nothing yet —</span></div><!--]--></div> <!--[--><div class="input-section svelte-1hmxjsx"><div class="input-group svelte-qse8j9"><!--[!--><!--]--> <input id="input-q7gvvah3y" type="text" value="" placeholder="Enter any text..." class="svelte-qse8j9"></div><!----> <div class="button-group svelte-1hmxjsx"><!--[!--><button type="button" class="button primary medium svelte-1edpa7d" disabled><!---->Insert<!----></button><!--]--><!----> <!--[!--><button type="button" class="button primary medium svelte-1edpa7d" disabled><!---->Check<!----></button><!--]--><!----> <!--[!--><button type="button" class="button secondary medium svelte-1edpa7d"><!---->Reset<!----></button><!--]--><!----></div></div><!--]--> <!--[!--><!--]--> <div class="binary-display svelte-1hmxjsx"><label class="svelte-1hmxjsx">Bit Array:</label> <div class="binary-grid svelte-1hmxjsx"><!--[--><!--]--></div></div></div> <div class="parameters-column svelte-1hmxjsx"><div class="parameters-section svelte-5o5yhn sticky"><h3 class="svelte-5o5yhn">Parameters</h3> <!--[--><div class="display-card svelte-ooecwa compact"><div class="label svelte-ooecwa">k (Hash Functions):</div> <div class="value svelte-ooecwa">4</div> <!--[!--><!--]--> <!--[!--><!--]--></div><div class="display-card svelte-ooecwa compact"><div class="label svelte-ooecwa">m (Bit Array Size):</div> <div class="value svelte-ooecwa">16</div> <!--[!--><!--]--> <!--[!--><!--]--></div><!--]--></div><!----></div></div></div><!----> <h3 id="why-cant-we-delete"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#why-cant-we-delete">#</a>Why Can’t We Delete?</h3> <p>As you may have already noticed, we have <strong>INSERT</strong> and <strong>CHECK</strong> operations in Bloom filters, but I never mentioned a <strong>DELETE</strong> operation. That’s because — in the original design — we simply can’t. At least, not without breaking some of the guarantees that make Bloom filters useful in the first place. (Though, as we’ll see later in the series, there <em>are</em> variations of Bloom filters that support deletion.)</p> <p>The root of the problem is that multiple elements may hash to the same bit positions. When you attempt to delete an element by resetting its bits back to <code>0</code>, you risk clearing bits that may still be in use by other elements. Since Bloom filters are designed to avoid <strong>false negatives</strong>, any operation that might accidentally remove evidence of another element’s presence would break this guarantee.</p> <p>As one researcher <a href="https://www.math.umd.edu/~immortal/CMSC420/notes/bloomfilters.pdf" rel="nofollow">puts it nicely:</a></p> <div class="callout" data-callout="quote" data-collapsible="false"><div class="callout-title"><div class="callout-title-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"></path><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"></path></svg></div><div class="callout-title-text">Quote</div></div><div class="callout-content"><p>“There is no deletion basically because the only reasonable way to delete would be to hash the key and then set those corresponding bits to 0, but this could cause false negatives for other keys.”</p></div></div> <p>Let’s visualize this. Imagine a Bloom filter as a shared apartment building where multiple tenants (elements) occupy overlapping rooms (bit positions).</p> <ul><li>When Alice moves in, she gets keys to rooms <code>3</code>, <code>7</code>, and <code>12</code>.</li> <li>When Bob moves in, he gets keys to rooms <code>7</code>, <code>15</code>, and <code>23</code>.</li></ul> <p>Notice: both Alice and Bob share room <code>7</code>.</p> <p>Now, if Alice moves out and we naively “delete” her by switching off the lights (setting bits to <code>0</code>) in rooms <code>3</code>, <code>7</code>, and <code>12</code>, we inadvertently turn off room <code>7</code>, which Bob still needs.<br> The next time someone asks, “Is Bob still living here?” the system might falsely answer “No” — even though Bob never left. That’s a <strong>false negative</strong>, and Bloom filters are designed specifically to prevent that.</p> <!----><pre class="mermaid">graph TD
    A["Alice moves in"] --> A1["Gets keys to rooms:<br/>3, 7, 12"]
    B["Bob moves in"] --> B1["Gets keys to rooms:<br/>7, 15, 23"]
    
    A1 --> R["Room occupancy:<br/>Room 3: Alice<br/>Room 7: Alice + Bob<br/>Room 12: Alice<br/>Room 15: Bob<br/>Room 23: Bob"]
    B1 --> R
    
    R --> D["Alice moves out<br/>(Naive deletion)"]
    D --> D1["Turn off lights in<br/>rooms 3, 7, 12"]
    
    D1 --> P["Problem: Room 7 light<br/>is turned off but<br/>Bob still needs it!"]
    
    P --> Q["Next query: 'Is Bob here?'<br/>Checks rooms 7, 15, 23<br/>Room 7 is dark (0)<br/>Answer: NO"]
    
    Q --> F["FALSE NEGATIVE<br/>Bob never left!"]
    
    style A fill:#22d3ee,color:#212529
    style B fill:#22d3ee,color:#212529
    style D fill:#dc2626,color:#f8f9fa
    style F fill:#dc2626,color:#f8f9fa
    style P fill:#f59e0b,color:#212529</pre><!----> <p>Of course, for a quick and dirty workaround, an engineer might introduce a second “blacklist” Bloom filter to track deletions. When checking membership, an element would only be considered present if it’s in the main filter <strong>and</strong> not in the deletion filter. But sometimes this comes with its own trade-offs — and I’ll cover better solutions later, like <a href="https://maltsev.space/blog/009-counting-bloom-filters" rel="nofollow">Counting Bloom Filters</a> and <a href="https://maltsev.space/blog/010-cuckoo-filters" rel="nofollow">Cuckoo Filters</a>.</p> <h3 id="can-it-scale"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#can-it-scale">#</a>Can It Scale?</h3> <p>The second major limitation of standard Bloom filters is their <strong>fixed size</strong>. Once you create a Bloom filter, you can’t resize it on the fly without breaking its mathematical guarantees.</p> <p>Traditional Bloom filters require you to <strong>declare their size upfront</strong> — it’s a bit like booking an apartment based on how many guests you <em>think</em> might show up. This creates the classic “Goldilocks problem”:</p> <ul><li><strong>Underestimated capacity</strong>: You planned for 1M elements but end up with 1.2M? The false positive rate can shoot up to 20% or even higher.</li> <li><strong>Overestimated capacity</strong>: You reserved space for 10M elements but only store 1M? You’re wasting 90% of your allocated memory.</li></ul> <p>The <a href="https://gsd.di.uminho.pt/members/cbm/ps/dbloom.pdf" rel="nofollow">solution</a> — or rather, the workaround — is fairly straightforward: monitor the Bloom filter’s saturation. Once the false positive rate crosses an unacceptable threshold, you simply add another (larger) Bloom filter. To check membership, you query all filters in sequence until you get a match or exhaust them.</p> <h2 id="optimizing-hash-functions"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#optimizing-hash-functions">#</a>Optimizing Hash Functions</h2> <p>As we discussed earlier, the key to an efficient Bloom filter lies in having k independent and uniformly distributed hash functions. The more evenly they spread their outputs across the bit array, the lower the risk of false positives.</p> <p>While this idea is elegant in theory, it’s more complicated in practice — creating and computing many truly independent hash functions can be both conceptually challenging and computationally expensive.</p> <p>Designing good hash functions isn’t something most engineers do every day. Creating a brand new hash function that minimizes collisions and evenly spreads values across the bit array is far from trivial. And Bloom filters typically require at least two hash functions — sometimes even four or more depending on your workload and the nature of the data you’re adding.</p> <p>As you probably noticed in your day-to-day work, we rarely write our own math-heavy algorithms from scratch. Instead, we lean on solid, battle-tested abstractions: hashing libraries, built-in data structures, utility modules, etc. Even if you’re adventurous enough to roll out your own Bloom filter implementation, you probably don’t want to spend weeks designing hash functions from scratch — but you still want decent performance.</p> <p>On top of that, hash computation itself can get expensive, especially if you’re using cryptographic hashes like SHA-256. These functions are overkill for Bloom filters and introduce unnecessary overhead. Faster non-cryptographic hash functions like <strong>MurmurHash</strong> or <strong>xxHash</strong> are much better suited for this use case — but even then, if you naively calculate <em>k</em> separate hashes per element, the cost adds up.</p> <p>Let’s take a look at a simple, naive approach just to set the baseline:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h1 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> hash_function_1</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h2 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> hash_function_2</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">..</span><span style="color:#24292E;--shiki-dark:#E1E4E8">.</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> hk </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> hash_function_k</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span></code></pre><!----> <p>At first glance, problem solved: you’re generating multiple hash values by salting your input with different constants. It works, and it’s easy to implement. But this method has an important drawback — you need to compute <em>k</em> separate hashes for every element, which becomes costly for larger <em>k</em> values (say 10 or more) — especially if the hash function itself isn’t cheap.</p> <p>While this approach might be acceptable for use-cases where performance isn’t important, let’s be honest: for such cases, you probably don’t even need a Bloom filter — a plain old <code>Set</code> would do the job just fine.</p> <h3 id="double-hashing-approach"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#double-hashing-approach">#</a>Double Hashing Approach</h3> <p>Luckily, there’s a well-known trick to avoid computing <em>k</em> independent hash functions while still achieving almost the same statistical behavior. This method is often called <strong>double hashing</strong> or <strong>Kirsch-Mitzenmacher optimization</strong>, after the authors who <a href="https://www.eecs.harvard.edu/~michaelm/postscripts/rsa2008.pdf" rel="nofollow">formally analyzed it</a>.</p> <p>The idea is surprisingly simple: instead of calculating <em>k</em> totally independent hashes, you calculate just two independent hash functions, and then combine them to generate the rest.</p> <p>The formula goes like this:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>position</mtext><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>i</mi><mo>⋅</mo><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi></mrow><annotation encoding="application/x-tex">\text{position}_i(x) = (h_1(x) + i \cdot h_2(x)) \bmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">position</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><!----></div> <p>Where:</p> <ul><li><code>h1(x)</code> and <code>h2(x)</code> are two independent hash functions (or at least two reasonably uncorrelated ones).</li> <li><code>i</code> is the index of the hash function you want (ranging from 0 to k-1).</li> <li>Each resulting value is then typically reduced by modulo <code>m</code> (the bit array size) to map it into the bit array in case it’s larger than the bit array size.</li></ul> <p>In code, it may look something like this:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h1 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> hash1</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h2 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> hash2</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">for</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (i </span><span style="color:#D73A49;--shiki-dark:#F97583">in</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> until k) &#123;</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">    val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> position </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (h1 </span><span style="color:#D73A49;--shiki-dark:#F97583">+</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> i </span><span style="color:#D73A49;--shiki-dark:#F97583">*</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h2) </span><span style="color:#D73A49;--shiki-dark:#F97583">%</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m</span></span>
<span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">    setBit</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(position)</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">&#125;</span></span>
<span class="line"></span></code></pre><!----> <p>This approach has several nice properties:</p> <ul><li>You only calculate <strong>two</strong> hash functions per inserted element, no matter how many hash functions <em>k</em> you want.</li> <li>You get a whole sequence of hash values that are nicely spread across your bit array.</li> <li>The results are nearly as good as having fully independent hashes, at least for practical Bloom filter usage.</li></ul> <!----><pre class="mermaid">graph LR
    A["Element: 'data'"] --> B["h1('data') = 5"]
    A --> C["h2('data') = 3"]
    
    B --> D["position_0 = (5 + 0×3) % 16 = 5"]
    B --> E["position_1 = (5 + 1×3) % 16 = 8"]  
    B --> F["position_2 = (5 + 2×3) % 16 = 11"]
    B --> G["position_3 = (5 + 3×3) % 16 = 14"]
    
    C --> D
    C --> E
    C --> F
    C --> G
    
    D --> H["Set bits: 5, 8, 11, 14"]
    E --> H
    F --> H
    G --> H
    
    style A fill:#5d5fef,color:#f8f9fa
    style B fill:#495057,color:#f8f9fa
    style C fill:#495057,color:#f8f9fa
    style H fill:#22d3ee,color:#212529</pre><!----> <h4 id="why-does-double-hashing-work"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#why-does-double-hashing-work">#</a>Why does Double-Hashing Work?</h4> <p>Without diving too deep into math: Kirsch and Mitzenmacher showed that this sequence of hashes behaves <em>almost</em> like having <em>k</em> independent hashes for the purposes of a Bloom filter. The false-positive rate remains essentially the same, while computational cost is dramatically reduced.</p> <p>This optimization is commonly used in real-world Bloom filter implementations — for example, it’s part of <a href="https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/utils/BloomFilter.java" rel="nofollow">Cassandra’s BloomFilter implementation</a>.</p> <h4 id="but-what-if-h2-is-zero"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#but-what-if-h2-is-zero">#</a>But what if <code>h2</code> is zero?</h4> <p>Yeah… You may have already noticed a potential issue in our formula:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>position</mtext><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>i</mi><mo>⋅</mo><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi></mrow><annotation encoding="application/x-tex">\text{position}_i(x) = (h_1(x) + i \cdot h_2(x)) \bmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">position</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><!----></div> <p>If <code>h2(x)</code> happens to be zero, all your hashes collapse into the same value:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>position</mtext><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>i</mi><mo>⋅</mo><mn>0</mn><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi><mo>=</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi></mrow><annotation encoding="application/x-tex">\text{position}_i(x) = (h_1(x) + i \cdot 0) \bmod m = h_1(x) \bmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">position</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><!----></div> <p>How likely is that? Well, it depends, but not impossible.</p> <p>To protect yourself, many implementations include a tiny fix like:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (h2 </span><span style="color:#D73A49;--shiki-dark:#F97583">==</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) &#123;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    h2 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">&#125;</span></span></code></pre><!----> <p>This guarantees forward progress: even in the worst case you still generate <code>k</code> distinct bit positions.</p> <h4 id="h2x-and-m-should-be-coprime"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#h2x-and-m-should-be-coprime">#</a><code>h2(x)</code> and <code>m</code> Should Be Coprime</h4> <p>There’s one more sneaky issue that’s often overlooked when using the double hashing formula:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>position</mtext><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>i</mi><mo>⋅</mo><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi></mrow><annotation encoding="application/x-tex">\text{position}_i(x) = (h_1(x) + i \cdot h_2(x)) \bmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">position</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span><!----></div> <p>Everything seems fine… until one day your Bloom filter quietly becomes <em>less random than you expect</em>. This happens when <code>h2(x)</code> and <code>m</code> (the Bloom filter size) are not <strong>coprime</strong>.</p> <div class="callout" data-callout="info" data-collapsible="false"><div class="callout-title"><div class="callout-title-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div><div class="callout-title-text">What does “coprime” mean?</div></div><div class="callout-content"><p>Two numbers are coprime if they don’t share any common divisors except 1.
For example:</p><ul><li><code>9</code> and <code>16</code> are coprime.</li> <li><code>6</code> and <code>18</code> are <strong>not</strong> coprime (since they share divisor <code>6</code>).</li></ul></div></div> <p>If <code>h2(x)</code> and <code>m</code> share a common divisor, the sequence of hashes generated</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>h1(x), h1(x) + h2(x), h1(x) + 2*h2(x), ...</span></span></code></pre><!----> <p>will only cover part of the bit array. In other words: <strong>you won’t reach all possible bit positions</strong>.</p> <p>This leads to: fewer unique bits set → more collisions → higher false-positive rates → sad stakeholders.</p> <p>Let’s say you have:</p> <ul><li><code>m = 10</code></li> <li><code>h1(x) = 2</code></li> <li><code>h2(x) = 4</code> (notice that both <code>4</code> and <code>10</code> share divisor <code>2</code>)</li></ul> <p>Now calculate the hashes:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>(2 + 0*4) % 10 → 2  </span></span>
<span class="line"><span>(2 + 1*4) % 10 → 6  </span></span>
<span class="line"><span>(2 + 2*4) % 10 → 0  </span></span>
<span class="line"><span>(2 + 3*4) % 10 → 4  </span></span>
<span class="line"><span>(2 + 4*4) % 10 → 8  </span></span>
<span class="line"><span>(2 + 5*4) % 10 → 2  (cycle repeats)</span></span></code></pre><!----> <p>You never touch bit positions <code>1, 3, 5, 7, 9</code> — half of your bit array is completely unused!</p> <p>Ideally, choose <code>m</code> to be a <strong>prime number</strong> — then any <code>h2(x)</code> is automatically coprime with <code>m</code> (except if <code>h2(x) = 0</code> which we already handled earlier).</p> <p>Or, when <code>m</code> is not prime, ensure that your hash function produces <code>h2(x)</code> values that are statistically unlikely to share factors with <code>m</code>. A simple safety net is to force <code>h2(x)</code> to always be odd:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">if</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (h2 </span><span style="color:#D73A49;--shiki-dark:#F97583">%</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 2</span><span style="color:#D73A49;--shiki-dark:#F97583"> ==</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) &#123;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">    h2 </span><span style="color:#D73A49;--shiki-dark:#F97583">+=</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">&#125;</span></span></code></pre><!----> <p>This avoids most practical problems if <code>m</code> is a power of two (which is very common for bit arrays).</p> <p>Let’s walk through a small example where things work exactly as intended:</p> <ul><li><code>m = 10</code></li> <li><code>h1(x) = 2</code></li> <li><code>h2(x) = 7</code> (notice that <code>7</code> and <code>10</code> are coprime (they share no divisors except <code>1</code>)</li></ul> <p>Hash values be like that:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>(2 + 0*7) % 10 → 2  </span></span>
<span class="line"><span>(2 + 1*7) % 10 → 9  </span></span>
<span class="line"><span>(2 + 2*7) % 10 → 6  </span></span>
<span class="line"><span>(2 + 3*7) % 10 → 3  </span></span>
<span class="line"><span>(2 + 4*7) % 10 → 0  </span></span>
<span class="line"><span>(2 + 5*7) % 10 → 7  </span></span>
<span class="line"><span>(2 + 6*7) % 10 → 4  </span></span>
<span class="line"><span>(2 + 7*7) % 10 → 1  </span></span>
<span class="line"><span>(2 + 8*7) % 10 → 8  </span></span>
<span class="line"><span>(2 + 9*7) % 10 → 5</span></span></code></pre><!----> <p>Full cycle, no repeats — the bit array is fully covered.</p> <h3 id="wide-hash-split"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#wide-hash-split">#</a>Wide Hash Split</h3> <p>There’s another technique that sometimes gets used, especially in high-performance Bloom filters - wide hash split. A good example is <a href="https://github.com/google/guava/blob/master/guava/src/com/google/common/hash/BloomFilterStrategies.java" rel="nofollow">Google Guava</a>, where it works nicely alongside the double hashing approach.</p> <p>The core idea is also simple - instead of generating multiple completely separate hash values, you generate <strong>one wide hash output</strong> (e.g. 128 or 256 bits), and then split it into multiple pieces to simulate multiple hash functions.</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> wideHash </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> hash128</span><span style="color:#24292E;--shiki-dark:#E1E4E8">(</span><span style="color:#D73A49;--shiki-dark:#F97583">data</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h1 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (wideHash shr </span><span style="color:#005CC5;--shiki-dark:#79B8FF">0</span><span style="color:#24292E;--shiki-dark:#E1E4E8">)  </span><span style="color:#D73A49;--shiki-dark:#F97583">%</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m </span><span style="color:#6A737D;--shiki-dark:#6A737D">// or apply mask, if m is a power of two</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h2 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (wideHash shr </span><span style="color:#005CC5;--shiki-dark:#79B8FF">16</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">%</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h3 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (wideHash shr </span><span style="color:#005CC5;--shiki-dark:#79B8FF">32</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">%</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m</span></span>
<span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">val</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> h4 </span><span style="color:#D73A49;--shiki-dark:#F97583">=</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> (wideHash shr </span><span style="color:#005CC5;--shiki-dark:#79B8FF">48</span><span style="color:#24292E;--shiki-dark:#E1E4E8">) </span><span style="color:#D73A49;--shiki-dark:#F97583">%</span><span style="color:#24292E;--shiki-dark:#E1E4E8"> m</span></span></code></pre><!----> <h4 id="why-does-hash-split-work"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#why-does-hash-split-work">#</a>Why does hash split work?</h4> <p>Good hash functions like <strong>MurmurHash3 128-bit</strong>, <strong>CityHash128</strong>, or <strong>xxHash3 128-bit</strong> are designed to spread randomness across all bits, i.e. have avalanche effect, when small input changes drastically alter all output bits. So, the upper bits are just as random as the lower bits.</p> <p>Of course, like everything in Bloom filters — no free lunch:</p> <ul><li>The resulting hashes are <strong>not truly independent</strong>, just decorrelated, i.e. different enough. This may theoretically increase false positives slightly if your input data is highly correlated and the hash function doesn’t have good avalanche effect.</li> <li>You’re limited by how many slices you can get — e.g., 128-bit hash gives you at most 4×32-bit slices (or more if you slice into smaller chunks).</li></ul> <h3 id="recap"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#recap">#</a>Recap</h3> <table><thead><tr><th>Method</th><th># of Hash Calls</th><th>Speed</th><th>Independence</th></tr></thead><tbody><tr><td>k hashes</td><td>k</td><td>Slow</td><td>True</td></tr><tr><td>Double hashing</td><td>2</td><td>Fast</td><td>Almost</td></tr><tr><td>Wide hash split</td><td>1</td><td>Even faster</td><td>Almost</td></tr></tbody></table> <h2 id="how-to-calculate-parameters"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#how-to-calculate-parameters">#</a>How to Calculate Parameters</h2> <p>Strictly speaking, this section should be at the very beginning — but I didn’t want to scare you away with formulas too early. Since you’re still here, let’s finally dive into how to properly configure your Bloom filter.</p> <p>Some of the parameters you’ve already met, but let’s quickly recap:</p> <ol><li><strong>m</strong> — the size of the bit array (in bits)</li> <li><strong>n</strong> — the expected number of inserted elements</li> <li><strong>k</strong> — the number of hash functions and bit positions to set</li> <li><strong>p</strong> — the false positive probability (also called <strong>FPP</strong>)</li></ol> <p>These parameters are tightly interconnected — changing one affects the others, leading to trade-offs between memory usage, query speed, and accuracy.</p> <h3 id="the-false-positive-rate"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#the-false-positive-rate">#</a>The False Positive Rate</h3> <p>The false positive rate is arguably the most important characteristic of a Bloom filter. It represents the probability that the filter incorrectly reports an element as present when it actually isn’t. The theoretical false positive probability can be approximated by:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo>=</mo><msup><mrow><mo fence="true">(</mo><mn>1</mn><mo>−</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>k</mi><mi>n</mi><mi mathvariant="normal">/</mi><mi>m</mi></mrow></msup><mo fence="true">)</mo></mrow><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">p = \left(1 - e^{-kn/m}\right)^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.039em;vertical-align:-0.65em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">kn</span><span class="mord mtight">/</span><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.389em;"><span style="top:-3.6029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span></span><!----></div> <p>Where once again:</p> <ul><li><code>p</code> is the false positive probability</li> <li><code>k</code> is the number of hash functions and bit positions to set</li> <li><code>n</code> is the number of inserted elements</li> <li><code>m</code> is the size of the bit array</li></ul> <div class="callout" data-callout="warning" data-collapsible="false"><div class="callout-title"><div class="callout-title-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg></div><div class="callout-title-text">Warning</div></div><div class="callout-content"><p>It’s worth noting that this formula is an approximation. According to <a href="https://cglab.ca/~morin/publications/ds/bloom-submitted.pdf" rel="nofollow">detailed mathematical analysis</a>, the actual false positive rate is strictly larger than this approximation for any k ≥ 2.</p></div></div> <h3 id="how-parameters-affect-performance"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#how-parameters-affect-performance">#</a>How Parameters Affect Performance</h3> <h4 id="memory-usage"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#memory-usage">#</a>Memory Usage</h4> <p>The memory usage of a Bloom filter is directly proportional to <code>m</code>. This is one of its key strengths — excellent space efficiency compared to hash tables or sets.</p> <p>For <a href="https://valkey.io/blog/introducing-bloom-filters/" rel="nofollow">example</a>, let’s say you want to maintain 500 Bloom filters, each capable of holding 5 million elements. The total memory depends heavily on your target false positive rate:</p> <table><thead><tr><th>False Positive Rate</th><th>Total Memory</th><th>Memory Savings vs SET</th></tr></thead><tbody><tr><td>0.01 (1 in 100)</td><td>2.9 GB</td><td>98.08% saved</td></tr><tr><td>0.001 (1 in 1,000)</td><td>4.9 GB</td><td>96.80% saved</td></tr><tr><td>0.00001 (1 in 100,000)</td><td>7.8 GB</td><td>94.88% saved</td></tr></tbody></table> <h4 id="query-performance"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#query-performance">#</a>Query Performance</h4> <p>Both insertions and lookups require computing <code>k</code> hash functions and updating or reading <code>k</code> bits. Therefore, both operations have time complexity <code>O(k)</code>, assuming that hash function is some constant time operation. Since <code>k</code> is typically small (usually between 5 and 12), Bloom filters are extremely fast for membership checks, regardless of how many elements they contain.</p> <h3 id="calculating-optimal-parameters"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#calculating-optimal-parameters">#</a>Calculating Optimal Parameters</h3> <h4 id="optimal-size-m"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#optimal-size-m">#</a>Optimal Size (m)</h4> <p>If you know the expected number of elements (<code>n</code>) and your target false positive probability (<code>p</code>), you can compute the optimal size of the bit array as:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mo>=</mo><mo>−</mo><mfrac><mrow><mi>n</mi><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">m = -\frac{n \ln(p)}{(\ln(2))^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><!----></div> <p>Or approximately:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mo>≈</mo><mo>−</mo><mi>n</mi><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>⋅</mo><mn>2.08</mn></mrow><annotation encoding="application/x-tex">m \approx -n \ln(p) \cdot 2.08</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2.08</span></span></span></span></span><!----></div> <h4 id="optimal-number-of-hash-functions-k"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#optimal-number-of-hash-functions-k">#</a>Optimal Number of Hash Functions (k)</h4> <p>Once you have <code>m</code>, you can compute the optimal number of hash functions:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>=</mo><mfrac><mi>m</mi><mi>n</mi></mfrac><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k = \frac{m}{n} \ln(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span><!----></div> <p>Or approximately:</p> <div class="math math-display"><!----><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>≈</mo><mfrac><mi>m</mi><mi>n</mi></mfrac><mo>⋅</mo><mn>0.693</mn></mrow><annotation encoding="application/x-tex">k \approx \frac{m}{n} \cdot 0.693</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.693</span></span></span></span></span><!----></div> <p>Choosing this optimal <code>k</code> minimizes the false positive rate for your selected <code>m</code> and <code>n</code>.</p> <h3 id="examples-with-calculations"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#examples-with-calculations">#</a>Examples With Calculations</h3> <h4 id="example-1-calculating-size-and-hash-functions"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#example-1-calculating-size-and-hash-functions">#</a>Example 1: Calculating Size and Hash Functions</h4> <p>Given:</p> <ul><li><code>n = 100,000</code> (expected elements)</li> <li><code>p = 0.01</code> (1% false positive rate)</li></ul> <p>Calculate <code>m</code>:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>m = -(n * ln(p)) / (ln(2))^2</span></span>
<span class="line"><span>  = -(100,000 * ln(0.01)) / (ln(2))^2</span></span>
<span class="line"><span>  = -(100,000 * (-4.6052)) / (0.4809)</span></span>
<span class="line"><span>  ≈ 958,506 bits (≈ 117 KiB)</span></span></code></pre><!----> <p>Calculate <code>k</code>:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>k = (m / n) * ln(2)</span></span>
<span class="line"><span>  = (958,506 / 100,000) * 0.693</span></span>
<span class="line"><span>  ≈ 6.64 (≈ 7 hash functions)</span></span></code></pre><!----> <h4 id="example-2-calculating-false-positive-rate"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#example-2-calculating-false-positive-rate">#</a>Example 2: Calculating False Positive Rate</h4> <p>Given:</p> <ul><li><code>n = 100</code> (elements)</li> <li><code>m = 1,000</code> (bits)</li> <li><code>k = 4</code> (hash functions)</li></ul> <p>Calculate <code>p</code>:</p> <!----><pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>p = (1 - e^(-k * n / m))^k</span></span>
<span class="line"><span>  = (1 - e^(-4 * 100 / 1000))^4</span></span>
<span class="line"><span>  = (1 - e^(-0.4))^4</span></span>
<span class="line"><span>  = (1 - 0.6703)^4</span></span>
<span class="line"><span>  = (0.3297)^4</span></span>
<span class="line"><span>  ≈ 0.0118</span></span></code></pre><!----> <p>So the false positive rate is approximately <strong>1.18%</strong>.</p> <h3 id="play-with-the-numbers"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#play-with-the-numbers">#</a>Play With The Numbers</h3> <p>If you’re getting bored (or dizzy) with all these formulas — don’t worry. Instead of torturing your brain, let’s just throw your numbers into the calculator below and let it crunch everything for you.</p> <p>After all, you’re sitting right next to one of the most advanced calculators humanity ever built — <strong>for Christ’s sake, let it do the math.</strong></p> <div class="calculator-container svelte-9b9zo"><h2 class="svelte-9b9zo">Bloom Filter Parameter Calculator</h2> <div class="layout svelte-9b9zo"><div class="main-content svelte-9b9zo"><div class="input-section svelte-9b9zo"><h3 class="svelte-9b9zo">Input Parameters</h3> <div class="input-group svelte-qse8j9"><!--[--><label for="expected-elements" class="svelte-qse8j9">Expected Elements (n):</label><!--]--> <input id="expected-elements" type="number" value="100000" placeholder="100000" min="1" step="1" class="svelte-qse8j9"></div><!----> <div class="input-group svelte-qse8j9"><!--[--><label for="false-positive-rate" class="svelte-qse8j9">Target False Positive Rate (p):</label><!--]--> <input id="false-positive-rate" type="number" value="0.01" placeholder="0.01" min="0.000001" max="0.999999" step="0.001" class="svelte-qse8j9"></div><!----> <div class="mode-section svelte-9b9zo"><h4 class="svelte-9b9zo">Calculation Mode</h4> <div class="radio-group svelte-9b9zo"><label class="radio-label svelte-9b9zo"><input type="radio" checked value="optimal"> Calculate optimal parameters</label> <label class="radio-label svelte-9b9zo"><input type="radio" value="custom"> Use custom parameters</label></div></div> <!--[!--><!--]--></div> <div class="results-section svelte-9b9zo"><h3 class="svelte-9b9zo">Calculated Results</h3> <div class="results-grid svelte-9b9zo"><div class="display-card svelte-ooecwa elevated"><div class="label svelte-ooecwa">Bit Array Size (m)</div> <div class="value svelte-ooecwa">958,506</div> <!--[--><div class="unit svelte-ooecwa">bits</div><!--]--> <!--[!--><!--]--></div><!----> <div class="display-card svelte-ooecwa elevated"><div class="label svelte-ooecwa">Hash Functions (k)</div> <div class="value svelte-ooecwa">7</div> <!--[--><div class="unit svelte-ooecwa">functions</div><!--]--> <!--[!--><!--]--></div><!----> <div class="display-card svelte-ooecwa elevated"><div class="label svelte-ooecwa">Actual False Positive Rate</div> <div class="value svelte-ooecwa">1.0039%</div> <!--[--><div class="unit svelte-ooecwa">probability</div><!--]--> <!--[!--><!--]--></div><!----> <div class="display-card svelte-ooecwa elevated"><div class="label svelte-ooecwa">Memory Usage</div> <div class="value svelte-ooecwa">117.01 KiB</div> <!--[--><div class="unit svelte-ooecwa">total</div><!--]--> <!--[!--><!--]--></div><!----> <div class="display-card svelte-ooecwa elevated"><div class="label svelte-ooecwa">Bits per Element</div> <div class="value svelte-ooecwa">9.59</div> <!--[--><div class="unit svelte-ooecwa">bits/element</div><!--]--> <!--[!--><!--]--></div><!----> <div class="display-card svelte-ooecwa elevated"><div class="label svelte-ooecwa">Space Efficiency</div> <div class="value svelte-ooecwa">96.26%</div> <!--[!--><!--]--> <!--[--><div class="description svelte-ooecwa">vs naive storage (32 bits/element)</div><!--]--></div><!----></div></div></div> <div class="parameters-column svelte-9b9zo"><div class="parameters-section svelte-5o5yhn sticky"><h3 class="svelte-5o5yhn">Current Parameters</h3> <!--[--><div class="display-card svelte-ooecwa compact"><div class="label svelte-ooecwa">Expected Elements (n):</div> <div class="value svelte-ooecwa">100,000</div> <!--[!--><!--]--> <!--[!--><!--]--></div><div class="display-card svelte-ooecwa compact"><div class="label svelte-ooecwa">Target FPR (p):</div> <div class="value svelte-ooecwa">1.0000%</div> <!--[!--><!--]--> <!--[!--><!--]--></div><div class="display-card svelte-ooecwa compact"><div class="label svelte-ooecwa">Bit Array Size (m):</div> <div class="value svelte-ooecwa">958,506</div> <!--[!--><!--]--> <!--[!--><!--]--></div><div class="display-card svelte-ooecwa compact"><div class="label svelte-ooecwa">Hash Functions (k):</div> <div class="value svelte-ooecwa">7</div> <!--[!--><!--]--> <!--[!--><!--]--></div><!--]--></div><!----> <div class="parameters-section svelte-9b9zo"><h3 class="svelte-9b9zo">Quick Presets</h3> <div class="preset-buttons svelte-9b9zo"><!--[!--><button type="button" class="button primary medium svelte-1edpa7d"><!---->Small (1K, 1%)<!----></button><!--]--><!----> <!--[!--><button type="button" class="button primary medium svelte-1edpa7d"><!---->Medium (100K, 1%)<!----></button><!--]--><!----> <!--[!--><button type="button" class="button primary medium svelte-1edpa7d"><!---->Large (1M, 0.1%)<!----></button><!--]--><!----></div></div></div></div></div><!----> <h2 id="wrapping-up"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#wrapping-up">#</a>Wrapping Up</h2> <p>Every time I revisit Bloom filters, I’m reminded why computer science so often feels like magic. A simple structure — just a bit array and a handful of hash functions — yet it dances gracefully with probability to solve problems that could easily swallow gigabytes of memory if approached naively.</p> <p>And yet — this is only the beginning.</p> <p>As we move forward, we’ll see how this beautifully simple idea can be stretched, twisted, and extended to take on even bigger challenges.</p> <p>See you in the next parts — things are about to get even more interesting.</p><!----></div> <footer class="post-footer svelte-16vu21h"><div class="post-navigation svelte-16vu21h"><!--[--><a href="/blog" class="button primary medium svelte-1edpa7d"><!---->← Back to all posts<!----></a><!--]--><!----></div> <!--[--><!--[--><div class="series-banner svelte-2z90k"><div class="series-title svelte-2z90k">More from this series</div> <ol class="series-list svelte-2z90k"><!--[--><li class="series-item svelte-2z90k"><a href="/blog/008-bloom-filters-pt1" class="series-link svelte-2z90k">Grokking Bloom Filters: The Classic Bloom Filter Demystified</a></li><li class="series-item svelte-2z90k"><a href="/blog/009-counting-bloom-filters" class="series-link svelte-2z90k">Grokking Bloom Filters: Counting Bloom Filter</a></li><li class="series-item svelte-2z90k"><a href="/blog/010-cuckoo-filters" class="series-link svelte-2z90k">Cuckoo Filters: Better Than Bloom Filters?</a></li><!--]--></ol></div><!--]--><!--]--> <div class="card default svelte-1f4837s"><!--[!--><!--]--> <div class="card-content svelte-1f4837s"><div class="share-message svelte-16vu21h">Enjoyed this post? Share it with the universe!</div> <div class="share-buttons svelte-16vu21h"><a class="link default share-link twitter svelte-blzdii" target="_blank" rel="noopener noreferrer" href="https://twitter.com/intent/tweet?text=Grokking%20Bloom%20Filters%3A%20The%20Classic%20Bloom%20Filter%20Demystified&amp;url=" aria-label="Share on Twitter"><!---->Twitter<!----> <!--[!--><!--]--></a><!----> <a class="link default share-link linkedin svelte-blzdii" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/shareArticle?mini=true&amp;title=Grokking%20Bloom%20Filters%3A%20The%20Classic%20Bloom%20Filter%20Demystified&amp;url=" aria-label="Share on LinkedIn"><!---->LinkedIn<!----> <!--[!--><!--]--></a><!----> <a class="link default share-link facebook svelte-blzdii" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/sharer/sharer.php?u=" aria-label="Share on Facebook"><!---->Facebook<!----> <!--[!--><!--]--></a><!----></div><!----></div> <!--[!--><!--]--></div><!----></footer></article> <!--[--><div class="referenced-posts svelte-16vu21h"><h2 class="svelte-16vu21h">Want to read more?</h2> <div class="posts-grid svelte-1xu41xx"><!--[--><a href="/blog/010-cuckoo-filters" class="content-card-link svelte-1e8k5qp"><div class="card neon clickable content-card svelte-1f4837s"><!--[--><!--[!--><!--]--> <!--[!--><picture class="svelte-1f4837s"><!--[--><source srcset="/_app/immutable/assets/hero.B2uWPBry.avif 1x, /_app/immutable/assets/hero.CvZl82k-.avif 2x" sizes="min(800px, 30vw)" type="image/avif" class="svelte-1f4837s"><source srcset="/_app/immutable/assets/hero.DeK7qp3N.webp 1x, /_app/immutable/assets/hero.DuXFaxUH.webp 2x" sizes="min(800px, 30vw)" type="image/webp" class="svelte-1f4837s"><source srcset="/_app/immutable/assets/hero.BMxPsSDC.jpg 1x, /_app/immutable/assets/hero.DfuhpzPT.jpg 2x" sizes="min(800px, 30vw)" type="image/jpeg" class="svelte-1f4837s"><!--]--> <img src="/_app/immutable/assets/hero.DfuhpzPT.jpg" loading="lazy" class="cover-image real-image svelte-1f4837s" width="1536" height="1024" onload="this.__e=event" onerror="this.__e=event"></picture><!--]--><!--]--> <div class="card-content svelte-1f4837s"><!--[!--><!--]--> <div class="card-content svelte-1e8k5qp"><!--[--><span class="card-date svelte-1e8k5qp">2025-07-02</span><!--]--> <h3 class="card-title svelte-1e8k5qp">Cuckoo Filters: Better Than Bloom Filters?</h3> <p class="card-description svelte-1e8k5qp">Meet the data structure that refuses trade-offs: identical footprint to Bloom, fewer false positives, and deletion that works without overhead. Grab all three!</p> <!--[!--><!--]--> <!--[--><div class="card-tags svelte-1e8k5qp"><!--[--><span class="badge subtle small svelte-1ffaubh"><!---->Algorithms<!----></span><!--]--></div><!--]--></div><!----></div> <!--[--><div class="neon-border svelte-1f4837s"></div><!--]--></div><!----></a><a href="/blog/009-counting-bloom-filters" class="content-card-link svelte-1e8k5qp"><div class="card neon clickable content-card svelte-1f4837s"><!--[--><!--[!--><!--]--> <!--[!--><picture class="svelte-1f4837s"><!--[--><source srcset="/_app/immutable/assets/hero.C26rI2i_.avif 1x, /_app/immutable/assets/hero.D6jfd9Ks.avif 2x" sizes="min(800px, 30vw)" type="image/avif" class="svelte-1f4837s"><source srcset="/_app/immutable/assets/hero.gGcEr26K.webp 1x, /_app/immutable/assets/hero.CbtPvtgl.webp 2x" sizes="min(800px, 30vw)" type="image/webp" class="svelte-1f4837s"><source srcset="/_app/immutable/assets/hero.DW0JbtYI.jpg 1x, /_app/immutable/assets/hero.B3c6c-mK.jpg 2x" sizes="min(800px, 30vw)" type="image/jpeg" class="svelte-1f4837s"><!--]--> <img src="/_app/immutable/assets/hero.B3c6c-mK.jpg" loading="lazy" class="cover-image real-image svelte-1f4837s" width="1536" height="1024" onload="this.__e=event" onerror="this.__e=event"></picture><!--]--><!--]--> <div class="card-content svelte-1f4837s"><!--[!--><!--]--> <div class="card-content svelte-1e8k5qp"><!--[--><span class="card-date svelte-1e8k5qp">2025-06-24</span><!--]--> <h3 class="card-title svelte-1e8k5qp">Grokking Bloom Filters: Counting Bloom Filter</h3> <p class="card-description svelte-1e8k5qp">Bloom filters can't remove elements — unless you let them count.</p> <!--[!--><!--]--> <!--[--><div class="card-tags svelte-1e8k5qp"><!--[--><span class="badge subtle small svelte-1ffaubh"><!---->Algorithms<!----></span><!--]--></div><!--]--></div><!----></div> <!--[--><div class="neon-border svelte-1f4837s"></div><!--]--></div><!----></a><!--]--></div><!----></div><!--]--><!----></div><!----><!----><!--]--><!----></main> <footer class="svelte-1mbgpkc"><div class="space-container undefined svelte-7gsxae"><p class="space-text-small">© 2025 | Aleksey Maltsev</p><!----></div><!----></footer><!----></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_3glset = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.gYC26-Am.js"),
						import("../_app/immutable/entry/app.CLSpLdjE.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 8],
							data: [null,{type:"data",data:{placeholderUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAYAAABqBU3hAAAMEElEQVR4AQCBAH7/AD5fRv88XEP/OFc+/zRQN/8ySjL/M0cu/zZFLf88Ri7/Q0gw/0pKMv9PSjL/UUgw/1FELf9QPyj/Tjsl/005I/9OOiT/UT0n/1VCLP9YRzH/WUs2/1dMN/9SSzf/Skg0/0JFMP87QS3/NkAs/zNCLv80RTL/Nko3/zlPO/87UT7/AIEAfv8ARGRL/0JhR/8+W0L/OlU7/zhPNv85SzL/PEox/0JLMv9JTTT/T042/1RONv9XTDT/Vkgw/1VDLP9TPyj/Uj0m/1M9J/9WQSr/WkUv/11LNP9eTjn/XFA7/1dPOv9QTDf/SEk0/0BGMf87RTD/OUYy/zlKNf88Tzr/PlM//0BWQf8AgQB+/wBQbVL/TWlP/0lkSf9GXUL/Q1c9/0RTOf9HUjj/TVM5/1NUO/9aVjz/X1U8/2FTOv9gTzb/Xkox/1xGLf9cQyv/XEQs/19HL/9iTDT/ZVE6/2dVPv9lV0D/YFZA/1lTPf9RUDr/Sk03/0VMNv9DTjj/RFI8/0ZXQf9JW0X/S15I/wCBAH7/AF53W/9cc1f/WG5S/1RnS/9RYUX/Ul1B/1VbQP9aXEH/YV5C/2dfRP9sX0T/blxB/21YPf9rUzj/aE40/2dLMv9oTDL/ak41/25TOv9xWUD/cl1E/3FfR/9sX0b/ZlxE/15ZQf9XVz//UlY+/1BYQP9RXET/U2FJ/1ZlTv9YaFD/AIEAfv8AbYFj/2t9X/9nd1n/Y3BT/2BqTf9gZkn/Y2VH/2llSP9vZ0r/dWhL/3lnS/97ZUj/emBE/3hbPv91Vjr/dFM3/3RTN/92Vjr/elo//31gRf9+ZEr/fWdM/3lnTf9zZUv/bGJI/2VgRv9gYEb/X2JI/19mTP9ia1H/ZG9W/2ZyWP8AgQB+/wB7iGj/eIRl/3R+X/9weFj/bXFS/21tTv9wa0z/dmxN/3xtTv+Cbk//hm5P/4drTP+GZkj/g2BC/4BbPf9/WDr/f1g6/4FbPf+EX0L/h2VI/4lqTf+IbVD/hW1R/39sUP94ak3/cmhM/25oTP9sak7/bW5S/29zV/9yeFz/dHpe/wCBAH7/AIaMav+DiGb/f4Jg/3p7Wf94dVP/d3BP/3pvTf+Ab07/hnFP/4xyUf+QcVD/kW5N/5BpSP+NY0P/iV49/4daOv+HWjr/iV09/4xhQv+PZ0j/kmxN/5FwUf+OcVL/iXBR/4JuUP99bU7/eW1P/3dwUf94dFX/enla/319X/9/gGL/AIEAfv8AjItn/4qHZP+FgV7/gXpX/350UP9+b0z/gW5K/4ZuS/+McE3/knFO/5ZwTf+XbUv/lmhG/5JiQP+PXTr/jFk3/4xYNv+OWzn/kWA+/5RmRP+XbEr/l29O/5RxUP+PcVD/inBP/4RvTv+Ab07/f3JR/4B2Vf+Ce1r/hX9f/4eCYf8AgQB+/wCQhmH/jYNe/4l9WP+EdVD/gW9K/4BqRv+DaUT/iWlF/49rR/+VbUj/mWxI/5ppRf+ZZED/lV46/5JYNP+PVTH/jlQw/5BWM/+TWzj/l2I+/5loRP+abEn/l25L/5NuS/+Obkv/iG1K/4VuS/+EcU7/hXVS/4d6V/+Kflz/i4Fe/wCBAH7/AJB/Wf+NfFb/iXVP/4RuSP+BZ0H/gWM9/4NhPP+JYjz/j2Q+/5ZmQP+aZkD/m2M9/5peOf+WWDP/klIt/49OKf+OTSj/kFAr/5NVMP+WWzb/mWI9/5pmQf+YaUT/lGpF/49pRf+KaUT/h2pG/4ZtSP+HcU3/iXZS/4t7Vv+NfVn/AIEAfv8AkHdR/410Tf+IbUf/g2Y//4BfOP9/WjT/glkz/4haNP+PXDb/lV44/5leOP+bXDb/mVcx/5ZRK/+SSyX/jkch/41GIP+OSSP/kk4o/5VULv+YWzX/mWA6/5djPf+UZD7/j2Q+/4pkPv+HZT//hmhC/4dsRv+JcUv/i3VP/414Uv8AgQB+/wCPcEn/jGxF/4dlP/+CXjf/flcw/35SLP+BUSr/hlIs/41VLv+UVzD/mVcx/5tVL/+ZUSv/lksl/5FFH/+OQRv/jEAZ/41CG/+QRyD/lE0n/5dULf+YWTP/llw2/5NeN/+OXjf/il44/4ZfOf+FYjz/hmZA/4hrRf+Kb0n/i3JL/wCBAH7/AI9qRP+MZkD/h185/4JXMf9+UCr/fUsm/4BKJP+GSyb/jU4o/5RRK/+ZUiz/m1Aq/5pMJv+WRiD/kkAa/448Fv+MOxT/jTwW/5BBG/+TSCH/lk4o/5dTLf+VVzD/klgy/41ZMv+JWTP/hVo0/4RdNv+EYTr/hmY//4hqQ/+KbEX/AIEAfv8AkGVB/41hPf+IWjb/glIu/35LJv99RiL/gEUg/4ZGIv+OSSX/lU0o/5pOKf+cTSj/m0kj/5hDHv+TPRj/jzgT/403Ev+NORP/kD0Y/5NDHv+VSST/lk8p/5VSLP+RVC7/jVQu/4hVL/+EVjD/g1gy/4NcNv+FYTv/h2Q+/4hnQf8AgQB+/wCTY0D/j148/4pXNP+ETyz/f0ck/35DIP+BQR7/h0Mg/49GI/+WSSb/nEso/55KJ/+dRiP/mkEd/5U7F/+RNhL/jjQQ/442Ev+QOhb/k0Ab/5VGIv+WSyf/lE4q/5FQK/+MUCz/h1Es/4NSLf+CVC//glgz/4NcN/+FYDv/hmI9/wCBAH7/AJVhQP+RXDz/i1U0/4VMK/+BRCT/fz8f/4I+Hf+HPx7/j0Mi/5dHJf+dSSf/oEgm/59EI/+bPx3/lzkX/5I0Ev+PMhD/jzMR/5A3Ff+SPRr/lEMg/5VIJf+TSyj/j0wp/4pNKf+FTSr/gk4q/4BQLf9/UzD/gVg0/4JbOP+DXTr/AIEAfv8All9A/5JaPP+MUzT/hkkr/4FBI/9/PB7/gToc/4c8Hf+PQCH/l0Ql/51GJ/+gRSb/n0Ij/5w9Hf+XNxf/kjIS/48wEP+OMBD/jzQU/5E5Gf+TPx7/k0Qj/5FHJv+NSCf/iEgn/4NIJ/9/SSj/fUsq/3xPLf99UzH/f1Y0/4BYNv8AgQB+/wCWXED/klc7/4xPM/+FRir/fz4h/304HP9/Nhr/hTgb/407H/+VPyP/nEIl/59CJf+ePyL/mzoc/5Y0Fv+RLxH/jiwO/4wtD/+NMBL/jjUW/5A6HP+QPyD/jUIj/4lDJP+EQyT/f0Mk/3tEJP94Rib/eEkp/3lNLf96UDD/e1Iy/wCBAH7/AJRYPv+QUzr/iUsx/4JBKP98OR//ejMZ/3wxF/+CMhj/ijYc/5I6IP+YPSP/nD0j/5s6H/+YNRr/ky8U/44qD/+KKAz/iSgM/4krD/+KMBP/izUY/4s5Hf+JPB//hD0g/389IP96PSD/dT4g/3NAIv9yQyX/c0Yp/3RKLP91TC7/AIEAfv8AkVM8/41ON/+GRi7/fjwk/3gzG/92LRX/dysT/30sFP+FMBj/jTQc/5Q3H/+XOB//lzUc/5QwF/+PKhH/iiUM/4YiCf+EIgj/hCUL/4UqD/+GLxT/hTMY/4M2G/9/Nxz/eTcc/3Q3G/9vNxz/bTkd/2w8IP9sQCT/bkMn/25FKf8AgQB+/wCNTjn/iUk0/4JBK/96NiH/cy0X/3EnEf9yJQ//eCYQ/4AqFP+ILhj/jzIb/5IyG/+SMBj/jysT/4olDf+FIAj/gR0F/38dBP9/IAf/gCQL/4ApEP+ALRT/fTAW/3kxF/9zMRf/bjEX/2kxF/9nMxn/ZjYb/2Y5H/9oPSL/aD4k/wCBAH7/AIlKNv+FRTH/fjwo/3YyHv9wKRT/bSIO/24gC/9zIQz/eyUQ/4QqFP+LLRf/ji4Y/44rFf+LJhD/hiEK/4EcBf99GQL/exkB/3sbBP97IAj/fCQM/3spEP95KxP/dCwU/28sE/9pLBP/ZS0T/2IuFf9hMRj/YjUb/2M4Hv9jOiD/AYEAfv8Ah0g0/4NDL/98Oib/dC8c/20mEv9qIAz/bB0J/3EfCv95Ig7/gScS/4gqFv+MKxb/jCkT/4kkDv+EHgj/fxkD/3sWAP95FgD/eBkC/3kdBv96Igr/eSYO/3YpEf9yKhL/bCoR/2cpEf9iKhH/XywT/14uFv9fMhn/YDUc/2E3Hv/V27ZIOcHyxwAAAABJRU5ErkJggg==",views:1694,ogImagePath:"/images/og/008-bloom-filters-pt1.jpg"},uses:{params:["slug"]}}],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
