const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CamzhwYo.js","./DWQjbmj2.js","./Sxnieu_Z.js","./BS1gFY9q.js","./BajsC5iC.js","./DOpRDe-e.js","./CrmB1nin.js","./Ch7EQcu6.js","./BLE-GVTX.js","./BQ1yUwhz.js","./Fx9cdyna.js","./QP5EQZch.js","./BLwtxOm8.js","./pjV9FGZ0.js","./Btsb479O.js","./D5ekaOgh.js","./Dp1pzeXC.js","./CAz7My0s.js","./dbabM3Cl.js","./Gi6I4Gst.js","./Bqq0WE8X.js","./2mmdKLe-.js","./CjFMzbP-.js","./CmKTTxBW.js","./qeXIC3eA.js","./61Q8gS81.js","./BbsZzAbj.js","./CeiuZJ0a.js","./CvaQCpDt.js","./Cck-v5ms.js","./_CSIl-1n.js","./CX1shJk8.js","./CdUu-ZIH.js","./B7gt-3VW.js","./CiJ2LdPj.js","./BfweUt7U.js","./DrGJgFUT.js","./BY7v1xhs.js","./C5vTxv-M.js","./BWspesYA.js","./DLqOngTL.js","./BmDt7LiJ.js","./B0ty5lEO.js"])))=>i.map(i=>d[i]);
var Ey=Object.defineProperty;var Ay=(e,t,r)=>t in e?Ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _t=(e,t,r)=>Ay(e,typeof t!="symbol"?t+"":t,r);import{y as ru,t as Xt,s as Re,a as Dt,b as ri}from"./Bd1eUZv1.js";import{i as Ly}from"./BXHWvYr9.js";import{aN as My,y as Fy,Q as iu,X as Dy,R as yc,h as au,aO as $y,p as Ca,c as ct,r as st,t as rr,g as M,u as Tt,s as j,a as Sa,D as te,a4 as za,w as Oy,E as ft,n as Je,ad as Ry,f as Iy}from"./DMdOKcQ-.js";import{h as Et}from"./kEZwfia0.js";import{p as ee,i as Fr}from"./yPNQ-H0b.js";import{e as ca,i as ha,f as ua,r as eo,s as _r,B as ii}from"./8r4m7sgN.js";import{_ as St}from"./Dp1pzeXC.js";function Py(e,t,r=t){var i=My();ru(e,"input",a=>{var s=a?e.defaultValue:e.value;if(s=Fn(e)?Dn(s):s,r(s),i&&s!==(s=t())){var o=e.selectionStart,n=e.selectionEnd;e.value=s??"",n!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(n,e.value.length))}}),(au&&e.defaultValue!==e.value||Fy(t)==null&&e.value)&&r(Fn(e)?Dn(e.value):e.value),iu(()=>{var a=t();Fn(e)&&a===Dn(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}const Mn=new Set;function bc(e,t,r,i,a=i){var s=r.getAttribute("type")==="checkbox",o=e;let n=!1;if(t!==null)for(var c of t)o=o[c]??(o[c]=[]);o.push(r),ru(r,"change",()=>{var l=r.__value;s&&(l=xc(o,l,r.checked)),a(l)},()=>a(s?[]:null)),iu(()=>{var l=i();if(au&&r.defaultChecked!==r.checked){n=!0;return}s?(l=l||[],r.checked=l.includes(r.__value)):r.checked=$y(r.__value,l)}),Dy(()=>{var l=o.indexOf(r);l!==-1&&o.splice(l,1)}),Mn.has(o)||(Mn.add(o),yc(()=>{o.sort((l,h)=>l.compareDocumentPosition(h)===4?-1:1),Mn.delete(o)})),yc(()=>{if(n){var l;if(s)l=xc(o,l,r.checked);else{var h=o.find(u=>u.checked);l=h==null?void 0:h.__value}a(l)}})}function xc(e,t,r){for(var i=new Set,a=0;a<e.length;a+=1)e[a].checked&&i.add(e[a].__value);return r||i.delete(t),Array.from(i)}function Fn(e){var t=e.type;return t==="number"||t==="range"}function Dn(e){return e===""?null:+e}const Ny=16,zy=4;function Qa(e,t){let r=5381;for(let i=0;i<e.length;i++)r=(r<<5)+r+e.charCodeAt(i)>>>0;return r%t}function Ja(e,t){let r=0;for(let a=0;a<e.length;a++)r=e.charCodeAt(a)+(r<<6)+(r<<16)-r>>>0;let i=r%t;return i===0&&(i=1),t%2===0&&i%2===0&&(i=i===t-1?1:i+1),i}function qy(e,t){return(e%t+t)%t}function Oi(e,t,r){if(!e||t<=0||r<=0)return[];const i=Qa(e,t),a=Ja(e,t),s=[];for(let o=0;o<r;o++){const n=qy(i+o*a,t);s.push(n)}return s.sort((o,n)=>o-n)}class Wy{constructor(t,r){_t(this,"bitArray");_t(this,"size");_t(this,"numHashFunctions");this.size=t,this.numHashFunctions=r,this.bitArray=new Array(t).fill(!1)}generateInsertSteps(t){const r=[],i=Qa(t,this.size),a=Ja(t,this.size);r.push({type:"hash1",value:i}),r.push({type:"hash2",value:a});const s=Oi(t,this.size,this.numHashFunctions),o=new Array(this.size).fill("0");return s.forEach(n=>o[n]="1"),r.push({type:"binary",value:o.join("")}),s.forEach(n=>{const c=this.bitArray[n];r.push({type:"setBit",index:n,wasSet:c})}),r}generateCheckSteps(t){const r=[],i=Qa(t,this.size),a=Ja(t,this.size);r.push({type:"hash1",value:i}),r.push({type:"hash2",value:a});const s=Oi(t,this.size,this.numHashFunctions),o=new Array(this.size).fill("0");return s.forEach(n=>o[n]="1"),r.push({type:"binary",value:o.join("")}),s.forEach(n=>{r.push({type:"setBit",index:n,wasSet:this.bitArray[n]})}),r}insert(t){Oi(t,this.size,this.numHashFunctions).forEach(i=>{this.bitArray[i]=!0})}check(t){return Oi(t,this.size,this.numHashFunctions).every(i=>this.bitArray[i])}getBitArray(){return[...this.bitArray]}reset(){this.bitArray.fill(!1)}getHashValues(t){return{h1:Qa(t,this.size),h2:Ja(t,this.size)}}getBinaryRepresentation(t){const r=Oi(t,this.size,this.numHashFunctions),i=new Array(this.size).fill("0");return r.forEach(a=>i[a]="1"),i.join("")}getSize(){return this.size}}var Hy=Xt("<div> </div>"),jy=Xt('<span class="index svelte-rx78hf"> </span>'),Yy=Xt('<div class="bit-segment svelte-rx78hf"><div class="segment-bits svelte-rx78hf"></div> <div class="segment-indices svelte-rx78hf"></div></div>');function vc(e,t){Ca(t,!0);const r=ee(t,"type",3,"bitarray"),i=ee(t,"highlightedBits",19,()=>new Set),a=ee(t,"bitColors",19,()=>new Map);var s=Yy(),o=ct(s);ca(o,21,()=>t.bits,ha,(c,l,h)=>{var u=Hy();const p=Tt(()=>t.startIndex+h);let d;var m=ct(u,!0);st(u),rr(g=>{d=ua(u,1,"bit svelte-rx78hf",null,d,g),Re(m,r()==="binary"?M(l):M(l)?"1":"0")},[()=>({active:r()==="binary"&&M(l)==="1",set:r()==="bitarray"&&M(l)===!0,highlighted:i().has(M(p)),blue:a().get(M(p))==="blue",red:a().get(M(p))==="red"})]),Dt(c,u)}),st(o);var n=j(o,2);ca(n,21,()=>t.bits,ha,(c,l,h)=>{var u=jy();const p=Tt(()=>t.startIndex+h);var d=ct(u,!0);st(u),rr(()=>Re(d,M(p))),Dt(c,u)}),st(n),st(s),Dt(e,s),Sa()}var Uy=Xt('<div class="unit svelte-ooecwa"> </div>'),Gy=Xt('<div class="description svelte-ooecwa"> </div>'),Vy=Xt('<div><div class="label svelte-ooecwa"> </div> <div> </div> <!> <!></div>');function Qe(e,t){const r=ee(t,"variant",3,"default"),i=ee(t,"showEmpty",3,!0),a=Tt(()=>t.value===null||t.value===void 0||t.value===""),s=Tt(()=>M(a)&&!i()?"—":t.value);var o=Vy();let n;var c=ct(o),l=ct(c,!0);st(c);var h=j(c,2);let u;var p=ct(h,!0);st(h);var d=j(h,2);{var m=b=>{var x=Uy(),k=ct(x,!0);st(x),rr(()=>Re(k,t.unit)),Dt(b,x)};Fr(d,b=>{t.unit&&b(m)})}var g=j(d,2);{var y=b=>{var x=Gy(),k=ct(x,!0);st(x),rr(()=>Re(k,t.description)),Dt(b,x)};Fr(g,b=>{t.description&&b(y)})}st(o),rr((b,x)=>{n=ua(o,1,"display-card svelte-ooecwa",null,n,b),Re(l,t.label),u=ua(h,1,"value svelte-ooecwa",null,u,x),Re(p,M(s))},[()=>({compact:r()==="compact",elevated:r()==="elevated",centered:r()==="centered",empty:M(a)&&!i()}),()=>({fade:M(a)&&!i()})]),Dt(e,o)}var Xy=Xt('<label class="svelte-qse8j9"> </label>'),Ky=Xt('<div class="input-group svelte-qse8j9"><!> <input class="svelte-qse8j9"></div>');function Xi(e,t){Ca(t,!0);let r=ee(t,"value",15),i=ee(t,"type",3,"text"),a=ee(t,"disabled",3,!1),s=ee(t,"required",3,!1);const o=Tt(()=>t.id||`input-${Math.random().toString(36).substr(2,9)}`);var n=Ky(),c=ct(n);{var l=u=>{var p=Xy(),d=ct(p);st(p),rr(()=>{_r(p,"for",M(o)),Re(d,`${t.label??""}${s()?"*":""}`)}),Dt(u,p)};Fr(c,u=>{t.label&&u(l)})}var h=j(c,2);eo(h),st(n),rr(()=>{_r(h,"id",M(o)),_r(h,"type",i()),_r(h,"placeholder",t.placeholder),h.disabled=a(),_r(h,"min",t.min),_r(h,"max",t.max),_r(h,"step",t.step),h.required=s()}),Py(h,r),Dt(e,n),Sa()}var Zy=Xt('<div><h3 class="svelte-5o5yhn"> </h3> <!></div>');function su(e,t){const r=ee(t,"variant",3,"default"),i=ee(t,"cardVariant",3,"compact");var a=Zy();let s;var o=ct(a),n=ct(o,!0);st(o);var c=j(o,2);ca(c,17,()=>t.parameters,ha,(l,h)=>{Qe(l,{get label(){return M(h).label},get value(){return M(h).value},get unit(){return M(h).unit},get description(){return M(h).description},get variant(){return i()}})}),st(a),rr(l=>{s=ua(a,1,"parameters-section svelte-5o5yhn",null,s,l),Re(n,t.title)},[()=>({sticky:r()==="sticky"})]),Dt(e,a)}var Qy=Xt('<div class="binary-grid svelte-1hmxjsx"></div>'),Jy=Xt('<div class="binary-placeholder svelte-1hmxjsx"><span class="placeholder svelte-1hmxjsx">— Nothing yet —</span></div>'),t0=Xt('<div class="input-section svelte-1hmxjsx"><!> <div class="button-group svelte-1hmxjsx"><!> <!> <!></div></div>'),e0=Xt('<div class="result-display svelte-1hmxjsx"><span class="operation svelte-1hmxjsx"> </span> <span> </span></div>'),r0=Xt('<div class="bloom-filter-container svelte-1hmxjsx"><div class="layout svelte-1hmxjsx"><div class="main-content svelte-1hmxjsx"><div class="hash-display svelte-1hmxjsx"><!> <!></div> <div class="binary-display svelte-1hmxjsx"><label class="svelte-1hmxjsx">Mapped Bits:</label> <!></div> <!> <!> <div class="binary-display svelte-1hmxjsx"><label class="svelte-1hmxjsx">Bit Array:</label> <div class="binary-grid svelte-1hmxjsx"></div></div></div> <div class="parameters-column svelte-1hmxjsx"><!></div></div></div>');function i0(e,t){Ca(t,!0);const r=ee(t,"size",3,Ny),i=ee(t,"numHashFunctions",3,zy),a=ee(t,"stepDuration",3,1500),s=ee(t,"userInputEnabled",3,!0),o=ee(t,"autoAnimate",3,!0);let n=te(""),c=te(!1),l=te(za([])),h=te(null),u=te(null),p=te(null),d=te(null),m=te(""),g=te(za(new Set)),y=te(za(new Map)),b=Tt(()=>new Wy(r(),i())),x=te(za([]));Oy(()=>{ft(x,M(b).getBitArray(),!0)});const k=Tt(i),C=Tt(r);function S(){ft(p,null),ft(d,null),ft(m,""),M(g).clear(),M(y).clear(),ft(u,null)}async function v(pt,dt){if(!(M(c)||!dt.trim())){ft(c,!0),ft(h,pt,!0),S(),pt==="insert"?ft(l,M(b).generateInsertSteps(dt),!0):ft(l,M(b).generateCheckSteps(dt),!0);for(let vt=0;vt<M(l).length;vt++){const mt=M(l)[vt];switch(mt.type){case"hash1":ft(p,mt.value,!0);break;case"hash2":ft(d,mt.value,!0);break;case"binary":ft(m,mt.value,!0);break;case"setBit":M(g).add(mt.index),pt==="insert"?(M(y).set(mt.index,mt.wasSet?"red":"blue"),mt.wasSet||(M(x)[mt.index]=!0)):M(y).set(mt.index,mt.wasSet?"blue":"red"),ft(g,new Set(M(g)),!0),ft(y,new Map(M(y)),!0),ft(x,[...M(x)],!0);break}o()&&vt<M(l).length-1&&await new Promise(Yt=>setTimeout(Yt,a()))}pt==="insert"?(M(b).insert(dt),ft(u,!0)):ft(u,M(b).check(dt),!0),ft(x,M(b).getBitArray(),!0),o()&&setTimeout(()=>{M(g).clear(),M(y).clear(),ft(g,new Set,!0),ft(y,new Map,!0)},a()),ft(c,!1)}}async function _(){s()&&(await v("insert",M(n)),ft(n,""))}async function R(){s()&&(await v("check",M(n)),ft(n,""))}function P(){M(c)||(M(b).reset(),ft(x,M(b).getBitArray(),!0),S())}const $=Tt(()=>M(x).reduce((pt,dt,vt)=>{const mt=Math.floor(vt/4);return pt[mt]||(pt[mt]=[]),pt[mt].push(dt),pt},[])),A=Tt(()=>M(m).split("").reduce((pt,dt,vt)=>{const mt=Math.floor(vt/4);return pt[mt]||(pt[mt]=[]),pt[mt].push(dt),pt},[]));var z=r0(),I=ct(z),F=ct(I),L=ct(F),B=ct(L);Qe(B,{label:"Hash 1:",get value(){return M(p)},variant:"centered",showEmpty:!1});var D=j(B,2);Qe(D,{label:"Hash 2:",get value(){return M(d)},variant:"centered",showEmpty:!1}),st(L);var E=j(L,2),W=j(ct(E),2);{var H=pt=>{var dt=Qy();ca(dt,21,()=>M(A),ha,(vt,mt,Yt)=>{vc(vt,{get bits(){return M(mt)},startIndex:Yt*4,type:"binary"})}),st(dt),Dt(pt,dt)},G=pt=>{var dt=Jy();Dt(pt,dt)};Fr(W,pt=>{M(m)!==""?pt(H):pt(G,!1)})}st(E);var Z=j(E,2);{var it=pt=>{var dt=t0(),vt=ct(dt);Xi(vt,{get disabled(){return M(c)},placeholder:"Enter any text...",onkeydown:ue=>ue.key==="Enter"&&_(),get value(){return M(n)},set value(ue){ft(n,ue,!0)}});var mt=j(vt,2),Yt=ct(mt);const Le=Tt(()=>M(c)||!M(n).trim());ii(Yt,{intent:"primary",onclick:_,get disabled(){return M(Le)},children:(ue,vr)=>{Je();var We=ri("Insert");Dt(ue,We)},$$slots:{default:!0}});var nt=j(Yt,2);const Ot=Tt(()=>M(c)||!M(n).trim());ii(nt,{intent:"primary",onclick:R,get disabled(){return M(Ot)},children:(ue,vr)=>{Je();var We=ri("Check");Dt(ue,We)},$$slots:{default:!0}});var Wt=j(nt,2);ii(Wt,{intent:"secondary",onclick:P,get disabled(){return M(c)},children:(ue,vr)=>{Je();var We=ri("Reset");Dt(ue,We)},$$slots:{default:!0}}),st(mt),st(dt),Dt(pt,dt)};Fr(Z,pt=>{s()&&pt(it)})}var yt=j(Z,2);{var at=pt=>{var dt=e0(),vt=ct(dt),mt=ct(vt);st(vt);var Yt=j(vt,2);let Le;var nt=ct(Yt,!0);st(Yt),st(dt),rr(Ot=>{Re(mt,`${M(h)==="insert"?"Inserted":"Check"}:`),Le=ua(Yt,1,"result svelte-1hmxjsx",null,Le,Ot),Re(nt,M(h)==="insert"?"Element added":M(u)?"Possibly present":"Definitely not present")},[()=>({positive:M(u),negative:!M(u)})]),Dt(pt,dt)};Fr(yt,pt=>{M(u)!==null&&M(h)&&pt(at)})}var Ft=j(yt,2),$t=j(ct(Ft),2);ca($t,21,()=>M($),ha,(pt,dt,vt)=>{vc(pt,{get bits(){return M(dt)},startIndex:vt*4,type:"bitarray",get highlightedBits(){return M(g)},get bitColors(){return M(y)}})}),st($t),st(Ft),st(F);var Kt=j(F,2),jt=ct(Kt);const Bt=Tt(()=>[{label:"k (Hash Functions):",value:M(k)},{label:"m (Bit Array Size):",value:M(C)}]);su(jt,{title:"Parameters",get parameters(){return M(Bt)},variant:"sticky"}),st(Kt),st(I),st(z),Dt(e,z),Sa()}var a0=Xt('<div class="custom-params svelte-9b9zo"><!> <!></div>'),s0=Xt('<div class="calculator-container svelte-9b9zo"><h2 class="svelte-9b9zo">Bloom Filter Parameter Calculator</h2> <div class="layout svelte-9b9zo"><div class="main-content svelte-9b9zo"><div class="input-section svelte-9b9zo"><h3 class="svelte-9b9zo">Input Parameters</h3> <!> <!> <div class="mode-section svelte-9b9zo"><h4 class="svelte-9b9zo">Calculation Mode</h4> <div class="radio-group svelte-9b9zo"><label class="radio-label svelte-9b9zo"><input type="radio"> Calculate optimal parameters</label> <label class="radio-label svelte-9b9zo"><input type="radio"> Use custom parameters</label></div></div> <!></div> <div class="results-section svelte-9b9zo"><h3 class="svelte-9b9zo">Calculated Results</h3> <div class="results-grid svelte-9b9zo"><!> <!> <!> <!> <!> <!></div></div></div> <div class="parameters-column svelte-9b9zo"><!> <div class="parameters-section svelte-9b9zo"><h3 class="svelte-9b9zo">Quick Presets</h3> <div class="preset-buttons svelte-9b9zo"><!> <!> <!></div></div></div></div></div>');function n0(e,t){Ca(t,!0);const r=[],i=32;let a=te(1e5),s=te(.01),o=te(null),n=te(null),c=te("optimal");const l=Tt(()=>M(a)<=0||M(s)<=0||M(s)>=1?0:Math.ceil(-(M(a)*Math.log(M(s)))/Math.pow(Math.log(2),2))),h=Tt(()=>M(a)<=0||M(l)<=0?0:Math.max(1,Math.round(M(l)/M(a)*Math.log(2)))),u=Tt(()=>{const nt=M(c)==="optimal"?M(l):M(o)||M(l),Ot=M(c)==="optimal"?M(h):M(n)||M(h),Wt=M(a);return Wt<=0||nt<=0||Ot<=0?0:Math.pow(1-Math.exp(-Ot*Wt/nt),Ot)}),p=Tt(()=>{const nt=M(c)==="optimal"?M(l):M(o)||M(l);return Math.ceil(nt/8)}),d=Tt(()=>{const nt=M(c)==="optimal"?M(l):M(o)||M(l);return M(a)<=0?0:nt/M(a)});function m(nt,Ot=2){return nt===0?"0":nt<.01&&nt>0?nt.toExponential(2):nt.toLocaleString(void 0,{maximumFractionDigits:Ot})}function g(nt){return(nt*100).toFixed(4)+"%"}function y(nt){return nt<1024?`${nt} B`:nt<1024*1024?`${(nt/1024).toFixed(2)} KiB`:`${(nt/(1024*1024)).toFixed(2)} MiB`}var b=s0(),x=j(ct(b),2),k=ct(x),C=ct(k),S=j(ct(C),2);Xi(S,{label:"Expected Elements (n):",type:"number",min:1,step:"1",placeholder:"100000",id:"expected-elements",get value(){return M(a)},set value(nt){ft(a,nt,!0)}});var v=j(S,2);Xi(v,{label:"Target False Positive Rate (p):",type:"number",min:1e-6,max:.999999,step:"0.001",placeholder:"0.01",id:"false-positive-rate",get value(){return M(s)},set value(nt){ft(s,nt,!0)}});var _=j(v,2),R=j(ct(_),2),P=ct(R),$=ct(P);eo($),$.value=$.__value="optimal",Je(),st(P);var A=j(P,2),z=ct(A);eo(z),z.value=z.__value="custom",Je(),st(A),st(R),st(_);var I=j(_,2);{var F=nt=>{var Ot=a0(),Wt=ct(Ot);const ue=Tt(()=>M(l).toString());Xi(Wt,{label:"Bit Array Size (m):",type:"number",min:1,step:"1",get placeholder(){return M(ue)},id:"custom-m",get value(){return M(o)},set value(kr){ft(o,kr,!0)}});var vr=j(Wt,2);const We=Tt(()=>M(h).toString());Xi(vr,{label:"Hash Functions (k):",type:"number",min:1,step:"1",get placeholder(){return M(We)},id:"custom-k",get value(){return M(n)},set value(kr){ft(n,kr,!0)}}),st(Ot),Dt(nt,Ot)};Fr(I,nt=>{M(c)==="custom"&&nt(F)})}st(C);var L=j(C,2),B=j(ct(L),2),D=ct(B);const E=Tt(()=>m(M(c)==="optimal"?M(l):M(o)||M(l),0));Qe(D,{label:"Bit Array Size (m)",get value(){return M(E)},unit:"bits",variant:"elevated"});var W=j(D,2);const H=Tt(()=>M(c)==="optimal"?M(h):M(n)||M(h));Qe(W,{label:"Hash Functions (k)",get value(){return M(H)},unit:"functions",variant:"elevated"});var G=j(W,2);const Z=Tt(()=>g(M(u)));Qe(G,{label:"Actual False Positive Rate",get value(){return M(Z)},unit:"probability",variant:"elevated"});var it=j(G,2);const yt=Tt(()=>y(M(p)));Qe(it,{label:"Memory Usage",get value(){return M(yt)},unit:"total",variant:"elevated"});var at=j(it,2);const Ft=Tt(()=>m(M(d)));Qe(at,{label:"Bits per Element",get value(){return M(Ft)},unit:"bits/element",variant:"elevated"});var $t=j(at,2);const Kt=Tt(()=>`${m(100*(1-M(p)/(M(a)*i)))}%`);Qe($t,{label:"Space Efficiency",get value(){return M(Kt)},description:`vs naive storage (${i} bits/element)`,variant:"elevated"}),st(B),st(L),st(k);var jt=j(k,2),Bt=ct(jt);const pt=Tt(()=>[{label:"Expected Elements (n):",value:m(M(a),0)},{label:"Target FPR (p):",value:g(M(s))},{label:"Bit Array Size (m):",value:m(M(c)==="optimal"?M(l):M(o)||M(l),0)},{label:"Hash Functions (k):",value:M(c)==="optimal"?M(h):M(n)||M(h)}]);su(Bt,{title:"Current Parameters",get parameters(){return M(pt)},variant:"sticky",cardVariant:"compact"});var dt=j(Bt,2),vt=j(ct(dt),2),mt=ct(vt);ii(mt,{onclick:()=>{ft(a,1e3),ft(s,.01),ft(c,"optimal")},children:(nt,Ot)=>{Je();var Wt=ri("Small (1K, 1%)");Dt(nt,Wt)},$$slots:{default:!0}});var Yt=j(mt,2);ii(Yt,{onclick:()=>{ft(a,1e5),ft(s,.01),ft(c,"optimal")},children:(nt,Ot)=>{Je();var Wt=ri("Medium (100K, 1%)");Dt(nt,Wt)},$$slots:{default:!0}});var Le=j(Yt,2);ii(Le,{onclick:()=>{ft(a,1e6),ft(s,.001),ft(c,"optimal")},children:(nt,Ot)=>{Je();var Wt=ri("Large (1M, 0.1%)");Dt(nt,Wt)},$$slots:{default:!0}}),st(vt),st(dt),st(jt),st(x),st(b),bc(r,[],$,()=>M(c),nt=>ft(c,nt)),bc(r,[],z,()=>M(c),nt=>ft(c,nt)),Dt(e,b),Sa()}function o0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ts={exports:{}},l0=ts.exports,kc;function c0(){return kc||(kc=1,function(e,t){(function(r,i){e.exports=i()})(l0,function(){var r=1e3,i=6e4,a=36e5,s="millisecond",o="second",n="minute",c="hour",l="day",h="week",u="month",p="quarter",d="year",m="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var L=["th","st","nd","rd"],B=F%100;return"["+F+(L[(B-20)%10]||L[B]||L[0])+"]"}},k=function(F,L,B){var D=String(F);return!D||D.length>=L?F:""+Array(L+1-D.length).join(B)+F},C={s:k,z:function(F){var L=-F.utcOffset(),B=Math.abs(L),D=Math.floor(B/60),E=B%60;return(L<=0?"+":"-")+k(D,2,"0")+":"+k(E,2,"0")},m:function F(L,B){if(L.date()<B.date())return-F(B,L);var D=12*(B.year()-L.year())+(B.month()-L.month()),E=L.clone().add(D,u),W=B-E<0,H=L.clone().add(D+(W?-1:1),u);return+(-(D+(B-E)/(W?E-H:H-E))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:u,y:d,w:h,d:l,D:m,h:c,m:n,s:o,ms:s,Q:p}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},S="en",v={};v[S]=x;var _="$isDayjsObject",R=function(F){return F instanceof z||!(!F||!F[_])},P=function F(L,B,D){var E;if(!L)return S;if(typeof L=="string"){var W=L.toLowerCase();v[W]&&(E=W),B&&(v[W]=B,E=W);var H=L.split("-");if(!E&&H.length>1)return F(H[0])}else{var G=L.name;v[G]=L,E=G}return!D&&E&&(S=E),E||!D&&S},$=function(F,L){if(R(F))return F.clone();var B=typeof L=="object"?L:{};return B.date=F,B.args=arguments,new z(B)},A=C;A.l=P,A.i=R,A.w=function(F,L){return $(F,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var z=function(){function F(B){this.$L=P(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[_]=!0}var L=F.prototype;return L.parse=function(B){this.$d=function(D){var E=D.date,W=D.utc;if(E===null)return new Date(NaN);if(A.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var H=E.match(y);if(H){var G=H[2]-1||0,Z=(H[7]||"0").substring(0,3);return W?new Date(Date.UTC(H[1],G,H[3]||1,H[4]||0,H[5]||0,H[6]||0,Z)):new Date(H[1],G,H[3]||1,H[4]||0,H[5]||0,H[6]||0,Z)}}return new Date(E)}(B),this.init()},L.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},L.$utils=function(){return A},L.isValid=function(){return this.$d.toString()!==g},L.isSame=function(B,D){var E=$(B);return this.startOf(D)<=E&&E<=this.endOf(D)},L.isAfter=function(B,D){return $(B)<this.startOf(D)},L.isBefore=function(B,D){return this.endOf(D)<$(B)},L.$g=function(B,D,E){return A.u(B)?this[D]:this.set(E,B)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(B,D){var E=this,W=!!A.u(D)||D,H=A.p(B),G=function(jt,Bt){var pt=A.w(E.$u?Date.UTC(E.$y,Bt,jt):new Date(E.$y,Bt,jt),E);return W?pt:pt.endOf(l)},Z=function(jt,Bt){return A.w(E.toDate()[jt].apply(E.toDate("s"),(W?[0,0,0,0]:[23,59,59,999]).slice(Bt)),E)},it=this.$W,yt=this.$M,at=this.$D,Ft="set"+(this.$u?"UTC":"");switch(H){case d:return W?G(1,0):G(31,11);case u:return W?G(1,yt):G(0,yt+1);case h:var $t=this.$locale().weekStart||0,Kt=(it<$t?it+7:it)-$t;return G(W?at-Kt:at+(6-Kt),yt);case l:case m:return Z(Ft+"Hours",0);case c:return Z(Ft+"Minutes",1);case n:return Z(Ft+"Seconds",2);case o:return Z(Ft+"Milliseconds",3);default:return this.clone()}},L.endOf=function(B){return this.startOf(B,!1)},L.$set=function(B,D){var E,W=A.p(B),H="set"+(this.$u?"UTC":""),G=(E={},E[l]=H+"Date",E[m]=H+"Date",E[u]=H+"Month",E[d]=H+"FullYear",E[c]=H+"Hours",E[n]=H+"Minutes",E[o]=H+"Seconds",E[s]=H+"Milliseconds",E)[W],Z=W===l?this.$D+(D-this.$W):D;if(W===u||W===d){var it=this.clone().set(m,1);it.$d[G](Z),it.init(),this.$d=it.set(m,Math.min(this.$D,it.daysInMonth())).$d}else G&&this.$d[G](Z);return this.init(),this},L.set=function(B,D){return this.clone().$set(B,D)},L.get=function(B){return this[A.p(B)]()},L.add=function(B,D){var E,W=this;B=Number(B);var H=A.p(D),G=function(yt){var at=$(W);return A.w(at.date(at.date()+Math.round(yt*B)),W)};if(H===u)return this.set(u,this.$M+B);if(H===d)return this.set(d,this.$y+B);if(H===l)return G(1);if(H===h)return G(7);var Z=(E={},E[n]=i,E[c]=a,E[o]=r,E)[H]||1,it=this.$d.getTime()+B*Z;return A.w(it,this)},L.subtract=function(B,D){return this.add(-1*B,D)},L.format=function(B){var D=this,E=this.$locale();if(!this.isValid())return E.invalidDate||g;var W=B||"YYYY-MM-DDTHH:mm:ssZ",H=A.z(this),G=this.$H,Z=this.$m,it=this.$M,yt=E.weekdays,at=E.months,Ft=E.meridiem,$t=function(Bt,pt,dt,vt){return Bt&&(Bt[pt]||Bt(D,W))||dt[pt].slice(0,vt)},Kt=function(Bt){return A.s(G%12||12,Bt,"0")},jt=Ft||function(Bt,pt,dt){var vt=Bt<12?"AM":"PM";return dt?vt.toLowerCase():vt};return W.replace(b,function(Bt,pt){return pt||function(dt){switch(dt){case"YY":return String(D.$y).slice(-2);case"YYYY":return A.s(D.$y,4,"0");case"M":return it+1;case"MM":return A.s(it+1,2,"0");case"MMM":return $t(E.monthsShort,it,at,3);case"MMMM":return $t(at,it);case"D":return D.$D;case"DD":return A.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return $t(E.weekdaysMin,D.$W,yt,2);case"ddd":return $t(E.weekdaysShort,D.$W,yt,3);case"dddd":return yt[D.$W];case"H":return String(G);case"HH":return A.s(G,2,"0");case"h":return Kt(1);case"hh":return Kt(2);case"a":return jt(G,Z,!0);case"A":return jt(G,Z,!1);case"m":return String(Z);case"mm":return A.s(Z,2,"0");case"s":return String(D.$s);case"ss":return A.s(D.$s,2,"0");case"SSS":return A.s(D.$ms,3,"0");case"Z":return H}return null}(Bt)||H.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(B,D,E){var W,H=this,G=A.p(D),Z=$(B),it=(Z.utcOffset()-this.utcOffset())*i,yt=this-Z,at=function(){return A.m(H,Z)};switch(G){case d:W=at()/12;break;case u:W=at();break;case p:W=at()/3;break;case h:W=(yt-it)/6048e5;break;case l:W=(yt-it)/864e5;break;case c:W=yt/a;break;case n:W=yt/i;break;case o:W=yt/r;break;default:W=yt}return E?W:A.a(W)},L.daysInMonth=function(){return this.endOf(u).$D},L.$locale=function(){return v[this.$L]},L.locale=function(B,D){if(!B)return this.$L;var E=this.clone(),W=P(B,D,!0);return W&&(E.$L=W),E},L.clone=function(){return A.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},F}(),I=z.prototype;return $.prototype=I,[["$ms",s],["$s",o],["$m",n],["$H",c],["$W",l],["$M",u],["$y",d],["$D",m]].forEach(function(F){I[F[1]]=function(L){return this.$g(L,F[0],F[1])}}),$.extend=function(F,L){return F.$i||(F(L,z,$),F.$i=!0),$},$.locale=P,$.isDayjs=R,$.unix=function(F){return $(1e3*F)},$.en=v[S],$.Ls=v,$.p={},$})}(ts)),ts.exports}var h0=c0();const u0=o0(h0),es={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},i)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const a=r<.5?r*(1+t):r+t-r*t,s=2*r-a;switch(i){case"r":return es.hue2rgb(s,a,e+1/3)*255;case"g":return es.hue2rgb(s,a,e)*255;case"b":return es.hue2rgb(s,a,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},i)=>{e/=255,t/=255,r/=255;const a=Math.max(e,t,r),s=Math.min(e,t,r),o=(a+s)/2;if(i==="l")return o*100;if(a===s)return 0;const n=a-s,c=o>.5?n/(2-a-s):n/(a+s);if(i==="s")return c*100;switch(a){case e:return((t-r)/n+(t<r?6:0))*60;case t:return((r-e)/n+2)*60;case r:return((e-t)/n+4)*60;default:return-1}}},p0={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},d0={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},ht={channel:es,lang:p0,unit:d0},hr={};for(let e=0;e<=255;e++)hr[e]=ht.unit.dec2hex(e);const Jt={ALL:0,RGB:1,HSL:2};class f0{constructor(){this.type=Jt.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Jt.ALL}is(t){return this.type===t}}class m0{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new f0}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=Jt.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:i,l:a}=t;r===void 0&&(t.h=ht.channel.rgb2hsl(t,"h")),i===void 0&&(t.s=ht.channel.rgb2hsl(t,"s")),a===void 0&&(t.l=ht.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:i,b:a}=t;r===void 0&&(t.r=ht.channel.hsl2rgb(t,"r")),i===void 0&&(t.g=ht.channel.hsl2rgb(t,"g")),a===void 0&&(t.b=ht.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(Jt.HSL)&&r!==void 0?r:(this._ensureHSL(),ht.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(Jt.HSL)&&r!==void 0?r:(this._ensureHSL(),ht.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(Jt.HSL)&&r!==void 0?r:(this._ensureHSL(),ht.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(Jt.RGB)&&r!==void 0?r:(this._ensureRGB(),ht.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(Jt.RGB)&&r!==void 0?r:(this._ensureRGB(),ht.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(Jt.RGB)&&r!==void 0?r:(this._ensureRGB(),ht.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(Jt.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Jt.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Jt.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Jt.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Jt.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Jt.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const Zs=new m0({r:0,g:0,b:0,a:0},"transparent"),ai={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(ai.re);if(!t)return;const r=t[1],i=parseInt(r,16),a=r.length,s=a%4===0,o=a>4,n=o?1:17,c=o?8:4,l=s?0:-1,h=o?255:15;return Zs.set({r:(i>>c*(l+3)&h)*n,g:(i>>c*(l+2)&h)*n,b:(i>>c*(l+1)&h)*n,a:s?(i&h)*n/255:1},e)},stringify:e=>{const{r:t,g:r,b:i,a}=e;return a<1?`#${hr[Math.round(t)]}${hr[Math.round(r)]}${hr[Math.round(i)]}${hr[Math.round(a*255)]}`:`#${hr[Math.round(t)]}${hr[Math.round(r)]}${hr[Math.round(i)]}`}},Br={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(Br.hueRe);if(t){const[,r,i]=t;switch(i){case"grad":return ht.channel.clamp.h(parseFloat(r)*.9);case"rad":return ht.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return ht.channel.clamp.h(parseFloat(r)*360)}}return ht.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(Br.re);if(!r)return;const[,i,a,s,o,n]=r;return Zs.set({h:Br._hue2deg(i),s:ht.channel.clamp.s(parseFloat(a)),l:ht.channel.clamp.l(parseFloat(s)),a:o?ht.channel.clamp.a(n?parseFloat(o)/100:parseFloat(o)):1},e)},stringify:e=>{const{h:t,s:r,l:i,a}=e;return a<1?`hsla(${ht.lang.round(t)}, ${ht.lang.round(r)}%, ${ht.lang.round(i)}%, ${a})`:`hsl(${ht.lang.round(t)}, ${ht.lang.round(r)}%, ${ht.lang.round(i)}%)`}},ia={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=ia.colors[e];if(t)return ai.parse(t)},stringify:e=>{const t=ai.stringify(e);for(const r in ia.colors)if(ia.colors[r]===t)return r}},Ki={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Ki.re);if(!r)return;const[,i,a,s,o,n,c,l,h]=r;return Zs.set({r:ht.channel.clamp.r(a?parseFloat(i)*2.55:parseFloat(i)),g:ht.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:ht.channel.clamp.b(c?parseFloat(n)*2.55:parseFloat(n)),a:l?ht.channel.clamp.a(h?parseFloat(l)/100:parseFloat(l)):1},e)},stringify:e=>{const{r:t,g:r,b:i,a}=e;return a<1?`rgba(${ht.lang.round(t)}, ${ht.lang.round(r)}, ${ht.lang.round(i)}, ${ht.lang.round(a)})`:`rgb(${ht.lang.round(t)}, ${ht.lang.round(r)}, ${ht.lang.round(i)})`}},Pe={format:{keyword:ia,hex:ai,rgb:Ki,rgba:Ki,hsl:Br,hsla:Br},parse:e=>{if(typeof e!="string")return e;const t=ai.parse(e)||Ki.parse(e)||Br.parse(e)||ia.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Jt.HSL)||e.data.r===void 0?Br.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Ki.stringify(e):ai.stringify(e)},nu=(e,t)=>{const r=Pe.parse(e);for(const i in t)r[i]=ht.channel.clamp[i](t[i]);return Pe.stringify(r)},aa=(e,t,r=0,i=1)=>{if(typeof e!="number")return nu(e,{a:t});const a=Zs.set({r:ht.channel.clamp.r(e),g:ht.channel.clamp.g(t),b:ht.channel.clamp.b(r),a:ht.channel.clamp.a(i)});return Pe.stringify(a)},g0=e=>{const{r:t,g:r,b:i}=Pe.parse(e),a=.2126*ht.channel.toLinear(t)+.7152*ht.channel.toLinear(r)+.0722*ht.channel.toLinear(i);return ht.lang.round(a)},y0=e=>g0(e)>=.5,Ta=e=>!y0(e),ou=(e,t,r)=>{const i=Pe.parse(e),a=i[t],s=ht.channel.clamp[t](a+r);return a!==s&&(i[t]=s),Pe.stringify(i)},Y=(e,t)=>ou(e,"l",t),rt=(e,t)=>ou(e,"l",-t),T=(e,t)=>{const r=Pe.parse(e),i={};for(const a in t)t[a]&&(i[a]=r[a]+t[a]);return nu(e,i)},b0=(e,t,r=50)=>{const{r:i,g:a,b:s,a:o}=Pe.parse(e),{r:n,g:c,b:l,a:h}=Pe.parse(t),u=r/100,p=u*2-1,d=o-h,g=((p*d===-1?p:(p+d)/(1+p*d))+1)/2,y=1-g,b=i*g+n*y,x=a*g+c*y,k=s*g+l*y,C=o*u+h*(1-u);return aa(b,x,k,C)},q=(e,t=100)=>{const r=Pe.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,b0(r,e,t)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:lu,setPrototypeOf:_c,isFrozen:x0,getPrototypeOf:v0,getOwnPropertyDescriptor:k0}=Object;let{freeze:ce,seal:we,create:cu}=Object,{apply:ro,construct:io}=typeof Reflect<"u"&&Reflect;ce||(ce=function(t){return t});we||(we=function(t){return t});ro||(ro=function(t,r,i){return t.apply(r,i)});io||(io=function(t,r){return new t(...r)});const qa=he(Array.prototype.forEach),_0=he(Array.prototype.lastIndexOf),wc=he(Array.prototype.pop),Ri=he(Array.prototype.push),w0=he(Array.prototype.splice),rs=he(String.prototype.toLowerCase),$n=he(String.prototype.toString),Cc=he(String.prototype.match),Ii=he(String.prototype.replace),C0=he(String.prototype.indexOf),S0=he(String.prototype.trim),Se=he(Object.prototype.hasOwnProperty),ae=he(RegExp.prototype.test),Pi=T0(TypeError);function he(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return ro(e,t,i)}}function T0(e){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return io(e,r)}}function gt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rs;_c&&_c(e,null);let i=t.length;for(;i--;){let a=t[i];if(typeof a=="string"){const s=r(a);s!==a&&(x0(t)||(t[i]=s),a=s)}e[a]=!0}return e}function B0(e){for(let t=0;t<e.length;t++)Se(e,t)||(e[t]=null);return e}function Xe(e){const t=cu(null);for(const[r,i]of lu(e))Se(e,r)&&(Array.isArray(i)?t[r]=B0(i):i&&typeof i=="object"&&i.constructor===Object?t[r]=Xe(i):t[r]=i);return t}function Ni(e,t){for(;e!==null;){const i=k0(e,t);if(i){if(i.get)return he(i.get);if(typeof i.value=="function")return he(i.value)}e=v0(e)}function r(){return null}return r}const Sc=ce(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),On=ce(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Rn=ce(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),E0=ce(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),In=ce(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),A0=ce(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Tc=ce(["#text"]),Bc=ce(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Pn=ce(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ec=ce(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Wa=ce(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),L0=we(/\{\{[\w\W]*|[\w\W]*\}\}/gm),M0=we(/<%[\w\W]*|[\w\W]*%>/gm),F0=we(/\$\{[\w\W]*/gm),D0=we(/^data-[\-\w.\u00B7-\uFFFF]+$/),$0=we(/^aria-[\-\w]+$/),hu=we(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),O0=we(/^(?:\w+script|data):/i),R0=we(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),uu=we(/^html$/i),I0=we(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ac=Object.freeze({__proto__:null,ARIA_ATTR:$0,ATTR_WHITESPACE:R0,CUSTOM_ELEMENT:I0,DATA_ATTR:D0,DOCTYPE_NAME:uu,ERB_EXPR:M0,IS_ALLOWED_URI:hu,IS_SCRIPT_OR_DATA:O0,MUSTACHE_EXPR:L0,TMPLIT_EXPR:F0});const zi={element:1,text:3,progressingInstruction:7,comment:8,document:9},P0=function(){return typeof window>"u"?null:window},N0=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const a="data-tt-policy-suffix";r&&r.hasAttribute(a)&&(i=r.getAttribute(a));const s="dompurify"+(i?"#"+i:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Lc=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function pu(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P0();const t=et=>pu(et);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==zi.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const i=r,a=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:n,Element:c,NodeFilter:l,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:p,trustedTypes:d}=e,m=c.prototype,g=Ni(m,"cloneNode"),y=Ni(m,"remove"),b=Ni(m,"nextSibling"),x=Ni(m,"childNodes"),k=Ni(m,"parentNode");if(typeof o=="function"){const et=r.createElement("template");et.content&&et.content.ownerDocument&&(r=et.content.ownerDocument)}let C,S="";const{implementation:v,createNodeIterator:_,createDocumentFragment:R,getElementsByTagName:P}=r,{importNode:$}=i;let A=Lc();t.isSupported=typeof lu=="function"&&typeof k=="function"&&v&&v.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:I,TMPLIT_EXPR:F,DATA_ATTR:L,ARIA_ATTR:B,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:E,CUSTOM_ELEMENT:W}=Ac;let{IS_ALLOWED_URI:H}=Ac,G=null;const Z=gt({},[...Sc,...On,...Rn,...In,...Tc]);let it=null;const yt=gt({},[...Bc,...Pn,...Ec,...Wa]);let at=Object.seal(cu(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ft=null,$t=null,Kt=!0,jt=!0,Bt=!1,pt=!0,dt=!1,vt=!0,mt=!1,Yt=!1,Le=!1,nt=!1,Ot=!1,Wt=!1,ue=!0,vr=!1;const We="user-content-";let kr=!0,Fi=!1,Ur={},Gr=null;const ec=gt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rc=null;const ic=gt({},["audio","video","img","source","image","track"]);let Sn=null;const ac=gt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ra="http://www.w3.org/1998/Math/MathML",Ia="http://www.w3.org/2000/svg",He="http://www.w3.org/1999/xhtml";let Vr=He,Tn=!1,Bn=null;const ky=gt({},[Ra,Ia,He],$n);let Pa=gt({},["mi","mo","mn","ms","mtext"]),Na=gt({},["annotation-xml"]);const _y=gt({},["title","style","font","a","script"]);let Di=null;const wy=["application/xhtml+xml","text/html"],Cy="text/html";let Ht=null,Xr=null;const Sy=r.createElement("form"),sc=function(w){return w instanceof RegExp||w instanceof Function},En=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Xr&&Xr===w)){if((!w||typeof w!="object")&&(w={}),w=Xe(w),Di=wy.indexOf(w.PARSER_MEDIA_TYPE)===-1?Cy:w.PARSER_MEDIA_TYPE,Ht=Di==="application/xhtml+xml"?$n:rs,G=Se(w,"ALLOWED_TAGS")?gt({},w.ALLOWED_TAGS,Ht):Z,it=Se(w,"ALLOWED_ATTR")?gt({},w.ALLOWED_ATTR,Ht):yt,Bn=Se(w,"ALLOWED_NAMESPACES")?gt({},w.ALLOWED_NAMESPACES,$n):ky,Sn=Se(w,"ADD_URI_SAFE_ATTR")?gt(Xe(ac),w.ADD_URI_SAFE_ATTR,Ht):ac,rc=Se(w,"ADD_DATA_URI_TAGS")?gt(Xe(ic),w.ADD_DATA_URI_TAGS,Ht):ic,Gr=Se(w,"FORBID_CONTENTS")?gt({},w.FORBID_CONTENTS,Ht):ec,Ft=Se(w,"FORBID_TAGS")?gt({},w.FORBID_TAGS,Ht):Xe({}),$t=Se(w,"FORBID_ATTR")?gt({},w.FORBID_ATTR,Ht):Xe({}),Ur=Se(w,"USE_PROFILES")?w.USE_PROFILES:!1,Kt=w.ALLOW_ARIA_ATTR!==!1,jt=w.ALLOW_DATA_ATTR!==!1,Bt=w.ALLOW_UNKNOWN_PROTOCOLS||!1,pt=w.ALLOW_SELF_CLOSE_IN_ATTR!==!1,dt=w.SAFE_FOR_TEMPLATES||!1,vt=w.SAFE_FOR_XML!==!1,mt=w.WHOLE_DOCUMENT||!1,nt=w.RETURN_DOM||!1,Ot=w.RETURN_DOM_FRAGMENT||!1,Wt=w.RETURN_TRUSTED_TYPE||!1,Le=w.FORCE_BODY||!1,ue=w.SANITIZE_DOM!==!1,vr=w.SANITIZE_NAMED_PROPS||!1,kr=w.KEEP_CONTENT!==!1,Fi=w.IN_PLACE||!1,H=w.ALLOWED_URI_REGEXP||hu,Vr=w.NAMESPACE||He,Pa=w.MATHML_TEXT_INTEGRATION_POINTS||Pa,Na=w.HTML_INTEGRATION_POINTS||Na,at=w.CUSTOM_ELEMENT_HANDLING||{},w.CUSTOM_ELEMENT_HANDLING&&sc(w.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(at.tagNameCheck=w.CUSTOM_ELEMENT_HANDLING.tagNameCheck),w.CUSTOM_ELEMENT_HANDLING&&sc(w.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(at.attributeNameCheck=w.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),w.CUSTOM_ELEMENT_HANDLING&&typeof w.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(at.allowCustomizedBuiltInElements=w.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),dt&&(jt=!1),Ot&&(nt=!0),Ur&&(G=gt({},Tc),it=[],Ur.html===!0&&(gt(G,Sc),gt(it,Bc)),Ur.svg===!0&&(gt(G,On),gt(it,Pn),gt(it,Wa)),Ur.svgFilters===!0&&(gt(G,Rn),gt(it,Pn),gt(it,Wa)),Ur.mathMl===!0&&(gt(G,In),gt(it,Ec),gt(it,Wa))),w.ADD_TAGS&&(G===Z&&(G=Xe(G)),gt(G,w.ADD_TAGS,Ht)),w.ADD_ATTR&&(it===yt&&(it=Xe(it)),gt(it,w.ADD_ATTR,Ht)),w.ADD_URI_SAFE_ATTR&&gt(Sn,w.ADD_URI_SAFE_ATTR,Ht),w.FORBID_CONTENTS&&(Gr===ec&&(Gr=Xe(Gr)),gt(Gr,w.FORBID_CONTENTS,Ht)),kr&&(G["#text"]=!0),mt&&gt(G,["html","head","body"]),G.table&&(gt(G,["tbody"]),delete Ft.tbody),w.TRUSTED_TYPES_POLICY){if(typeof w.TRUSTED_TYPES_POLICY.createHTML!="function")throw Pi('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof w.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Pi('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=w.TRUSTED_TYPES_POLICY,S=C.createHTML("")}else C===void 0&&(C=N0(d,a)),C!==null&&typeof S=="string"&&(S=C.createHTML(""));ce&&ce(w),Xr=w}},nc=gt({},[...On,...Rn,...E0]),oc=gt({},[...In,...A0]),Ty=function(w){let N=k(w);(!N||!N.tagName)&&(N={namespaceURI:Vr,tagName:"template"});const X=rs(w.tagName),Lt=rs(N.tagName);return Bn[w.namespaceURI]?w.namespaceURI===Ia?N.namespaceURI===He?X==="svg":N.namespaceURI===Ra?X==="svg"&&(Lt==="annotation-xml"||Pa[Lt]):!!nc[X]:w.namespaceURI===Ra?N.namespaceURI===He?X==="math":N.namespaceURI===Ia?X==="math"&&Na[Lt]:!!oc[X]:w.namespaceURI===He?N.namespaceURI===Ia&&!Na[Lt]||N.namespaceURI===Ra&&!Pa[Lt]?!1:!oc[X]&&(_y[X]||!nc[X]):!!(Di==="application/xhtml+xml"&&Bn[w.namespaceURI]):!1},Me=function(w){Ri(t.removed,{element:w});try{k(w).removeChild(w)}catch{y(w)}},Kr=function(w,N){try{Ri(t.removed,{attribute:N.getAttributeNode(w),from:N})}catch{Ri(t.removed,{attribute:null,from:N})}if(N.removeAttribute(w),w==="is")if(nt||Ot)try{Me(N)}catch{}else try{N.setAttribute(w,"")}catch{}},lc=function(w){let N=null,X=null;if(Le)w="<remove></remove>"+w;else{const Pt=Cc(w,/^[\r\n\t ]+/);X=Pt&&Pt[0]}Di==="application/xhtml+xml"&&Vr===He&&(w='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+w+"</body></html>");const Lt=C?C.createHTML(w):w;if(Vr===He)try{N=new p().parseFromString(Lt,Di)}catch{}if(!N||!N.documentElement){N=v.createDocument(Vr,"template",null);try{N.documentElement.innerHTML=Tn?S:Lt}catch{}}const Zt=N.body||N.documentElement;return w&&X&&Zt.insertBefore(r.createTextNode(X),Zt.childNodes[0]||null),Vr===He?P.call(N,mt?"html":"body")[0]:mt?N.documentElement:Zt},cc=function(w){return _.call(w.ownerDocument||w,w,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},An=function(w){return w instanceof u&&(typeof w.nodeName!="string"||typeof w.textContent!="string"||typeof w.removeChild!="function"||!(w.attributes instanceof h)||typeof w.removeAttribute!="function"||typeof w.setAttribute!="function"||typeof w.namespaceURI!="string"||typeof w.insertBefore!="function"||typeof w.hasChildNodes!="function")},hc=function(w){return typeof n=="function"&&w instanceof n};function je(et,w,N){qa(et,X=>{X.call(t,w,N,Xr)})}const uc=function(w){let N=null;if(je(A.beforeSanitizeElements,w,null),An(w))return Me(w),!0;const X=Ht(w.nodeName);if(je(A.uponSanitizeElement,w,{tagName:X,allowedTags:G}),vt&&w.hasChildNodes()&&!hc(w.firstElementChild)&&ae(/<[/\w!]/g,w.innerHTML)&&ae(/<[/\w!]/g,w.textContent)||w.nodeType===zi.progressingInstruction||vt&&w.nodeType===zi.comment&&ae(/<[/\w]/g,w.data))return Me(w),!0;if(!G[X]||Ft[X]){if(!Ft[X]&&dc(X)&&(at.tagNameCheck instanceof RegExp&&ae(at.tagNameCheck,X)||at.tagNameCheck instanceof Function&&at.tagNameCheck(X)))return!1;if(kr&&!Gr[X]){const Lt=k(w)||w.parentNode,Zt=x(w)||w.childNodes;if(Zt&&Lt){const Pt=Zt.length;for(let pe=Pt-1;pe>=0;--pe){const Ye=g(Zt[pe],!0);Ye.__removalCount=(w.__removalCount||0)+1,Lt.insertBefore(Ye,b(w))}}}return Me(w),!0}return w instanceof c&&!Ty(w)||(X==="noscript"||X==="noembed"||X==="noframes")&&ae(/<\/no(script|embed|frames)/i,w.innerHTML)?(Me(w),!0):(dt&&w.nodeType===zi.text&&(N=w.textContent,qa([z,I,F],Lt=>{N=Ii(N,Lt," ")}),w.textContent!==N&&(Ri(t.removed,{element:w.cloneNode()}),w.textContent=N)),je(A.afterSanitizeElements,w,null),!1)},pc=function(w,N,X){if(ue&&(N==="id"||N==="name")&&(X in r||X in Sy))return!1;if(!(jt&&!$t[N]&&ae(L,N))){if(!(Kt&&ae(B,N))){if(!it[N]||$t[N]){if(!(dc(w)&&(at.tagNameCheck instanceof RegExp&&ae(at.tagNameCheck,w)||at.tagNameCheck instanceof Function&&at.tagNameCheck(w))&&(at.attributeNameCheck instanceof RegExp&&ae(at.attributeNameCheck,N)||at.attributeNameCheck instanceof Function&&at.attributeNameCheck(N))||N==="is"&&at.allowCustomizedBuiltInElements&&(at.tagNameCheck instanceof RegExp&&ae(at.tagNameCheck,X)||at.tagNameCheck instanceof Function&&at.tagNameCheck(X))))return!1}else if(!Sn[N]){if(!ae(H,Ii(X,E,""))){if(!((N==="src"||N==="xlink:href"||N==="href")&&w!=="script"&&C0(X,"data:")===0&&rc[w])){if(!(Bt&&!ae(D,Ii(X,E,"")))){if(X)return!1}}}}}}return!0},dc=function(w){return w!=="annotation-xml"&&Cc(w,W)},fc=function(w){je(A.beforeSanitizeAttributes,w,null);const{attributes:N}=w;if(!N||An(w))return;const X={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:it,forceKeepAttr:void 0};let Lt=N.length;for(;Lt--;){const Zt=N[Lt],{name:Pt,namespaceURI:pe,value:Ye}=Zt,$i=Ht(Pt),Ln=Ye;let Qt=Pt==="value"?Ln:S0(Ln);if(X.attrName=$i,X.attrValue=Qt,X.keepAttr=!0,X.forceKeepAttr=void 0,je(A.uponSanitizeAttribute,w,X),Qt=X.attrValue,vr&&($i==="id"||$i==="name")&&(Kr(Pt,w),Qt=We+Qt),vt&&ae(/((--!?|])>)|<\/(style|title)/i,Qt)){Kr(Pt,w);continue}if(X.forceKeepAttr)continue;if(!X.keepAttr){Kr(Pt,w);continue}if(!pt&&ae(/\/>/i,Qt)){Kr(Pt,w);continue}dt&&qa([z,I,F],gc=>{Qt=Ii(Qt,gc," ")});const mc=Ht(w.nodeName);if(!pc(mc,$i,Qt)){Kr(Pt,w);continue}if(C&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!pe)switch(d.getAttributeType(mc,$i)){case"TrustedHTML":{Qt=C.createHTML(Qt);break}case"TrustedScriptURL":{Qt=C.createScriptURL(Qt);break}}if(Qt!==Ln)try{pe?w.setAttributeNS(pe,Pt,Qt):w.setAttribute(Pt,Qt),An(w)?Me(w):wc(t.removed)}catch{Kr(Pt,w)}}je(A.afterSanitizeAttributes,w,null)},By=function et(w){let N=null;const X=cc(w);for(je(A.beforeSanitizeShadowDOM,w,null);N=X.nextNode();)je(A.uponSanitizeShadowNode,N,null),uc(N),fc(N),N.content instanceof s&&et(N.content);je(A.afterSanitizeShadowDOM,w,null)};return t.sanitize=function(et){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},N=null,X=null,Lt=null,Zt=null;if(Tn=!et,Tn&&(et="<!-->"),typeof et!="string"&&!hc(et))if(typeof et.toString=="function"){if(et=et.toString(),typeof et!="string")throw Pi("dirty is not a string, aborting")}else throw Pi("toString is not a function");if(!t.isSupported)return et;if(Yt||En(w),t.removed=[],typeof et=="string"&&(Fi=!1),Fi){if(et.nodeName){const Ye=Ht(et.nodeName);if(!G[Ye]||Ft[Ye])throw Pi("root node is forbidden and cannot be sanitized in-place")}}else if(et instanceof n)N=lc("<!---->"),X=N.ownerDocument.importNode(et,!0),X.nodeType===zi.element&&X.nodeName==="BODY"||X.nodeName==="HTML"?N=X:N.appendChild(X);else{if(!nt&&!dt&&!mt&&et.indexOf("<")===-1)return C&&Wt?C.createHTML(et):et;if(N=lc(et),!N)return nt?null:Wt?S:""}N&&Le&&Me(N.firstChild);const Pt=cc(Fi?et:N);for(;Lt=Pt.nextNode();)uc(Lt),fc(Lt),Lt.content instanceof s&&By(Lt.content);if(Fi)return et;if(nt){if(Ot)for(Zt=R.call(N.ownerDocument);N.firstChild;)Zt.appendChild(N.firstChild);else Zt=N;return(it.shadowroot||it.shadowrootmode)&&(Zt=$.call(i,Zt,!0)),Zt}let pe=mt?N.outerHTML:N.innerHTML;return mt&&G["!doctype"]&&N.ownerDocument&&N.ownerDocument.doctype&&N.ownerDocument.doctype.name&&ae(uu,N.ownerDocument.doctype.name)&&(pe="<!DOCTYPE "+N.ownerDocument.doctype.name+`>
`+pe),dt&&qa([z,I,F],Ye=>{pe=Ii(pe,Ye," ")}),C&&Wt?C.createHTML(pe):pe},t.setConfig=function(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};En(et),Yt=!0},t.clearConfig=function(){Xr=null,Yt=!1},t.isValidAttribute=function(et,w,N){Xr||En({});const X=Ht(et),Lt=Ht(w);return pc(X,Lt,N)},t.addHook=function(et,w){typeof w=="function"&&Ri(A[et],w)},t.removeHook=function(et,w){if(w!==void 0){const N=_0(A[et],w);return N===-1?void 0:w0(A[et],N,1)[0]}return wc(A[et])},t.removeHooks=function(et){A[et]=[]},t.removeAllHooks=function(){A=Lc()},t}var mi=pu(),du=Object.defineProperty,f=(e,t)=>du(e,"name",{value:t,configurable:!0}),z0=(e,t)=>{for(var r in t)du(e,r,{get:t[r],enumerable:!0})},Ue={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},O={trace:f((...e)=>{},"trace"),debug:f((...e)=>{},"debug"),info:f((...e)=>{},"info"),warn:f((...e)=>{},"warn"),error:f((...e)=>{},"error"),fatal:f((...e)=>{},"fatal")},Jo=f(function(e="fatal"){let t=Ue.fatal;typeof e=="string"?e.toLowerCase()in Ue&&(t=Ue[e]):typeof e=="number"&&(t=e),O.trace=()=>{},O.debug=()=>{},O.info=()=>{},O.warn=()=>{},O.error=()=>{},O.fatal=()=>{},t<=Ue.fatal&&(O.fatal=console.error?console.error.bind(console,ke("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",ke("FATAL"))),t<=Ue.error&&(O.error=console.error?console.error.bind(console,ke("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",ke("ERROR"))),t<=Ue.warn&&(O.warn=console.warn?console.warn.bind(console,ke("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",ke("WARN"))),t<=Ue.info&&(O.info=console.info?console.info.bind(console,ke("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",ke("INFO"))),t<=Ue.debug&&(O.debug=console.debug?console.debug.bind(console,ke("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",ke("DEBUG"))),t<=Ue.trace&&(O.trace=console.debug?console.debug.bind(console,ke("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",ke("TRACE")))},"setLogLevel"),ke=f(e=>`%c${u0().format("ss.SSS")} : ${e} : `,"format"),fu=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,sa=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,q0=/\s*%%.*\n/gm,oi,mu=(oi=class extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}},f(oi,"UnknownDiagramError"),oi),gi={},tl=f(function(e,t){e=e.replace(fu,"").replace(sa,"").replace(q0,`
`);for(const[r,{detector:i}]of Object.entries(gi))if(i(e,t))return r;throw new mu(`No diagram type detected matching given configuration for text: ${e}`)},"detectType"),gu=f((...e)=>{for(const{id:t,detector:r,loader:i}of e)yu(t,r,i)},"registerLazyLoadedDiagrams"),yu=f((e,t,r)=>{gi[e]&&O.warn(`Detector with key ${e} already exists. Overwriting.`),gi[e]={detector:t,loader:r},O.debug(`Detector with key ${e} added${r?" with loader":""}`)},"addDetector"),W0=f(e=>gi[e].loader,"getDiagramLoader"),ao=f((e,t,{depth:r=2,clobber:i=!1}={})=>{const a={depth:r,clobber:i};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(s=>ao(e,s,a)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(s=>{e.includes(s)||e.push(s)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(s=>{typeof t[s]=="object"&&(e[s]===void 0||typeof e[s]=="object")?(e[s]===void 0&&(e[s]=Array.isArray(t[s])?[]:{}),e[s]=ao(e[s],t[s],{depth:r-1,clobber:i})):(i||typeof e[s]!="object"&&typeof t[s]!="object")&&(e[s]=t[s])}),e)},"assignWithDepth"),Vt=ao,Qs="#ffffff",Js="#f2f2f2",se=f((e,t)=>t?T(e,{s:-40,l:10}):T(e,{s:-40,l:-10}),"mkBorder"),li,H0=(li=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,i,a,s,o,n,c,l,h,u,p,d,m,g,y,b,x,k,C,S,v;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||T(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||T(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||se(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||se(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||se(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||se(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||q(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||q(this.tertiaryColor),this.lineColor=this.lineColor||q(this.background),this.arrowheadColor=this.arrowheadColor||q(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?rt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||rt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||q(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Y(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||rt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||rt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Y(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Y(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||T(this.primaryColor,{h:30}),this.cScale4=this.cScale4||T(this.primaryColor,{h:60}),this.cScale5=this.cScale5||T(this.primaryColor,{h:90}),this.cScale6=this.cScale6||T(this.primaryColor,{h:120}),this.cScale7=this.cScale7||T(this.primaryColor,{h:150}),this.cScale8=this.cScale8||T(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||T(this.primaryColor,{h:270}),this.cScale10=this.cScale10||T(this.primaryColor,{h:300}),this.cScale11=this.cScale11||T(this.primaryColor,{h:330}),this.darkMode)for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScale"+_]=rt(this["cScale"+_],75);else for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScale"+_]=rt(this["cScale"+_],25);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleInv"+_]=this["cScaleInv"+_]||q(this["cScale"+_]);for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this.darkMode?this["cScalePeer"+_]=this["cScalePeer"+_]||Y(this["cScale"+_],10):this["cScalePeer"+_]=this["cScalePeer"+_]||rt(this["cScale"+_],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let _=0;_<this.THEME_COLOR_LIMIT;_++)this["cScaleLabel"+_]=this["cScaleLabel"+_]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let _=0;_<5;_++)this["surface"+_]=this["surface"+_]||T(this.mainBkg,{h:180,s:-15,l:t*(5+_*3)}),this["surfacePeer"+_]=this["surfacePeer"+_]||T(this.mainBkg,{h:180,s:-15,l:t*(8+_*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||T(this.primaryColor,{h:64}),this.fillType3=this.fillType3||T(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||T(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||T(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||T(this.primaryColor,{h:128}),this.fillType7=this.fillType7||T(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||T(this.primaryColor,{l:-10}),this.pie5=this.pie5||T(this.secondaryColor,{l:-10}),this.pie6=this.pie6||T(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||T(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||T(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||T(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||T(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||T(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||T(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:((r=this.radar)==null?void 0:r.axisColor)||this.lineColor,axisStrokeWidth:((i=this.radar)==null?void 0:i.axisStrokeWidth)||2,axisLabelFontSize:((a=this.radar)==null?void 0:a.axisLabelFontSize)||12,curveOpacity:((s=this.radar)==null?void 0:s.curveOpacity)||.5,curveStrokeWidth:((o=this.radar)==null?void 0:o.curveStrokeWidth)||2,graticuleColor:((n=this.radar)==null?void 0:n.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((c=this.radar)==null?void 0:c.graticuleStrokeWidth)||1,graticuleOpacity:((l=this.radar)==null?void 0:l.graticuleOpacity)||.3,legendBoxSize:((h=this.radar)==null?void 0:h.legendBoxSize)||12,legendFontSize:((u=this.radar)==null?void 0:u.legendFontSize)||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ta(this.quadrant1Fill)?Y(this.quadrant1Fill):rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((p=this.xyChart)==null?void 0:p.backgroundColor)||this.background,titleColor:((d=this.xyChart)==null?void 0:d.titleColor)||this.primaryTextColor,xAxisTitleColor:((m=this.xyChart)==null?void 0:m.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((g=this.xyChart)==null?void 0:g.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((y=this.xyChart)==null?void 0:y.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((b=this.xyChart)==null?void 0:b.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((x=this.xyChart)==null?void 0:x.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((k=this.xyChart)==null?void 0:k.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((C=this.xyChart)==null?void 0:C.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((S=this.xyChart)==null?void 0:S.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((v=this.xyChart)==null?void 0:v.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?rt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||T(this.primaryColor,{h:-30}),this.git4=this.git4||T(this.primaryColor,{h:-60}),this.git5=this.git5||T(this.primaryColor,{h:-90}),this.git6=this.git6||T(this.primaryColor,{h:60}),this.git7=this.git7||T(this.primaryColor,{h:120}),this.darkMode?(this.git0=Y(this.git0,25),this.git1=Y(this.git1,25),this.git2=Y(this.git2,25),this.git3=Y(this.git3,25),this.git4=Y(this.git4,25),this.git5=Y(this.git5,25),this.git6=Y(this.git6,25),this.git7=Y(this.git7,25)):(this.git0=rt(this.git0,25),this.git1=rt(this.git1,25),this.git2=rt(this.git2,25),this.git3=rt(this.git3,25),this.git4=rt(this.git4,25),this.git5=rt(this.git5,25),this.git6=rt(this.git6,25),this.git7=rt(this.git7,25)),this.gitInv0=this.gitInv0||q(this.git0),this.gitInv1=this.gitInv1||q(this.git1),this.gitInv2=this.gitInv2||q(this.git2),this.gitInv3=this.gitInv3||q(this.git3),this.gitInv4=this.gitInv4||q(this.git4),this.gitInv5=this.gitInv5||q(this.git5),this.gitInv6=this.gitInv6||q(this.git6),this.gitInv7=this.gitInv7||q(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Qs,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Js}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(li,"Theme"),li),j0=f(e=>{const t=new H0;return t.calculate(e),t},"getThemeVariables"),ci,Y0=(ci=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Y(this.primaryColor,16),this.tertiaryColor=T(this.primaryColor,{h:-160}),this.primaryBorderColor=q(this.background),this.secondaryBorderColor=se(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=se(this.tertiaryColor,this.darkMode),this.primaryTextColor=q(this.primaryColor),this.secondaryTextColor=q(this.secondaryColor),this.tertiaryTextColor=q(this.tertiaryColor),this.lineColor=q(this.background),this.textColor=q(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Y(q("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=aa(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=rt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=rt(this.sectionBkgColor,10),this.taskBorderColor=aa(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=aa(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Y(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||rt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,i,a,s,o,n,c,l,h,u,p,d,m,g,y,b,x,k,C,S;this.secondBkg=Y(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Y(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Y(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=T(this.primaryColor,{h:64}),this.fillType3=T(this.secondaryColor,{h:64}),this.fillType4=T(this.primaryColor,{h:-64}),this.fillType5=T(this.secondaryColor,{h:-64}),this.fillType6=T(this.primaryColor,{h:128}),this.fillType7=T(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||T(this.primaryColor,{h:30}),this.cScale4=this.cScale4||T(this.primaryColor,{h:60}),this.cScale5=this.cScale5||T(this.primaryColor,{h:90}),this.cScale6=this.cScale6||T(this.primaryColor,{h:120}),this.cScale7=this.cScale7||T(this.primaryColor,{h:150}),this.cScale8=this.cScale8||T(this.primaryColor,{h:210}),this.cScale9=this.cScale9||T(this.primaryColor,{h:270}),this.cScale10=this.cScale10||T(this.primaryColor,{h:300}),this.cScale11=this.cScale11||T(this.primaryColor,{h:330});for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||q(this["cScale"+v]);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScalePeer"+v]=this["cScalePeer"+v]||Y(this["cScale"+v],10);for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||T(this.mainBkg,{h:30,s:-30,l:-(-10+v*4)}),this["surfacePeer"+v]=this["surfacePeer"+v]||T(this.mainBkg,{h:30,s:-30,l:-(-7+v*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["pie"+v]=this["cScale"+v];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ta(this.quadrant1Fill)?Y(this.quadrant1Fill):rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((n=this.xyChart)==null?void 0:n.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((c=this.xyChart)==null?void 0:c.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((l=this.xyChart)==null?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:((p=this.radar)==null?void 0:p.axisColor)||this.lineColor,axisStrokeWidth:((d=this.radar)==null?void 0:d.axisStrokeWidth)||2,axisLabelFontSize:((m=this.radar)==null?void 0:m.axisLabelFontSize)||12,curveOpacity:((g=this.radar)==null?void 0:g.curveOpacity)||.5,curveStrokeWidth:((y=this.radar)==null?void 0:y.curveStrokeWidth)||2,graticuleColor:((b=this.radar)==null?void 0:b.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((x=this.radar)==null?void 0:x.graticuleStrokeWidth)||1,graticuleOpacity:((k=this.radar)==null?void 0:k.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((S=this.radar)==null?void 0:S.legendFontSize)||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?rt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Y(this.secondaryColor,20),this.git1=Y(this.pie2||this.secondaryColor,20),this.git2=Y(this.pie3||this.tertiaryColor,20),this.git3=Y(this.pie4||T(this.primaryColor,{h:-30}),20),this.git4=Y(this.pie5||T(this.primaryColor,{h:-60}),20),this.git5=Y(this.pie6||T(this.primaryColor,{h:-90}),10),this.git6=Y(this.pie7||T(this.primaryColor,{h:60}),10),this.git7=Y(this.pie8||T(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||q(this.git0),this.gitInv1=this.gitInv1||q(this.git1),this.gitInv2=this.gitInv2||q(this.git2),this.gitInv3=this.gitInv3||q(this.git3),this.gitInv4=this.gitInv4||q(this.git4),this.gitInv5=this.gitInv5||q(this.git5),this.gitInv6=this.gitInv6||q(this.git6),this.gitInv7=this.gitInv7||q(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||q(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||q(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Y(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Y(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(ci,"Theme"),ci),U0=f(e=>{const t=new Y0;return t.calculate(e),t},"getThemeVariables"),hi,G0=(hi=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=T(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=T(this.primaryColor,{h:-160}),this.primaryBorderColor=se(this.primaryColor,this.darkMode),this.secondaryBorderColor=se(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=se(this.tertiaryColor,this.darkMode),this.primaryTextColor=q(this.primaryColor),this.secondaryTextColor=q(this.secondaryColor),this.tertiaryTextColor=q(this.tertiaryColor),this.lineColor=q(this.background),this.textColor=q(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=aa(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,i,a,s,o,n,c,l,h,u,p,d,m,g,y,b,x,k,C,S;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||T(this.primaryColor,{h:30}),this.cScale4=this.cScale4||T(this.primaryColor,{h:60}),this.cScale5=this.cScale5||T(this.primaryColor,{h:90}),this.cScale6=this.cScale6||T(this.primaryColor,{h:120}),this.cScale7=this.cScale7||T(this.primaryColor,{h:150}),this.cScale8=this.cScale8||T(this.primaryColor,{h:210}),this.cScale9=this.cScale9||T(this.primaryColor,{h:270}),this.cScale10=this.cScale10||T(this.primaryColor,{h:300}),this.cScale11=this.cScale11||T(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||rt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||rt(this.tertiaryColor,40);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScale"+v]=rt(this["cScale"+v],10),this["cScalePeer"+v]=this["cScalePeer"+v]||rt(this["cScale"+v],25);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||T(this["cScale"+v],{h:180});for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||T(this.mainBkg,{h:30,l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||T(this.mainBkg,{h:30,l:-(7+v*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||q(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||q(this.labelTextColor);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Y(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Y(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Y(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=T(this.primaryColor,{h:64}),this.fillType3=T(this.secondaryColor,{h:64}),this.fillType4=T(this.primaryColor,{h:-64}),this.fillType5=T(this.secondaryColor,{h:-64}),this.fillType6=T(this.primaryColor,{h:128}),this.fillType7=T(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||T(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||T(this.primaryColor,{l:-10}),this.pie5=this.pie5||T(this.secondaryColor,{l:-30}),this.pie6=this.pie6||T(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||T(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||T(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||T(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||T(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||T(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||T(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ta(this.quadrant1Fill)?Y(this.quadrant1Fill):rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((a=this.radar)==null?void 0:a.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((n=this.radar)==null?void 0:n.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((l=this.radar)==null?void 0:l.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((p=this.xyChart)==null?void 0:p.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((m=this.xyChart)==null?void 0:m.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((x=this.xyChart)==null?void 0:x.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((k=this.xyChart)==null?void 0:k.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||T(this.primaryColor,{h:-30}),this.git4=this.git4||T(this.primaryColor,{h:-60}),this.git5=this.git5||T(this.primaryColor,{h:-90}),this.git6=this.git6||T(this.primaryColor,{h:60}),this.git7=this.git7||T(this.primaryColor,{h:120}),this.darkMode?(this.git0=Y(this.git0,25),this.git1=Y(this.git1,25),this.git2=Y(this.git2,25),this.git3=Y(this.git3,25),this.git4=Y(this.git4,25),this.git5=Y(this.git5,25),this.git6=Y(this.git6,25),this.git7=Y(this.git7,25)):(this.git0=rt(this.git0,25),this.git1=rt(this.git1,25),this.git2=rt(this.git2,25),this.git3=rt(this.git3,25),this.git4=rt(this.git4,25),this.git5=rt(this.git5,25),this.git6=rt(this.git6,25),this.git7=rt(this.git7,25)),this.gitInv0=this.gitInv0||rt(q(this.git0),25),this.gitInv1=this.gitInv1||q(this.git1),this.gitInv2=this.gitInv2||q(this.git2),this.gitInv3=this.gitInv3||q(this.git3),this.gitInv4=this.gitInv4||q(this.git4),this.gitInv5=this.gitInv5||q(this.git5),this.gitInv6=this.gitInv6||q(this.git6),this.gitInv7=this.gitInv7||q(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||q(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||q(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Qs,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Js}calculate(t){if(Object.keys(this).forEach(i=>{this[i]==="calculated"&&(this[i]=void 0)}),typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(hi,"Theme"),hi),V0=f(e=>{const t=new G0;return t.calculate(e),t},"getThemeVariables"),ui,X0=(ui=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Y("#cde498",10),this.primaryBorderColor=se(this.primaryColor,this.darkMode),this.secondaryBorderColor=se(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=se(this.tertiaryColor,this.darkMode),this.primaryTextColor=q(this.primaryColor),this.secondaryTextColor=q(this.secondaryColor),this.tertiaryTextColor=q(this.primaryColor),this.lineColor=q(this.background),this.textColor=q(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,a,s,o,n,c,l,h,u,p,d,m,g,y,b,x,k,C,S;this.actorBorder=rt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||T(this.primaryColor,{h:30}),this.cScale4=this.cScale4||T(this.primaryColor,{h:60}),this.cScale5=this.cScale5||T(this.primaryColor,{h:90}),this.cScale6=this.cScale6||T(this.primaryColor,{h:120}),this.cScale7=this.cScale7||T(this.primaryColor,{h:150}),this.cScale8=this.cScale8||T(this.primaryColor,{h:210}),this.cScale9=this.cScale9||T(this.primaryColor,{h:270}),this.cScale10=this.cScale10||T(this.primaryColor,{h:300}),this.cScale11=this.cScale11||T(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||rt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||rt(this.tertiaryColor,40);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScale"+v]=rt(this["cScale"+v],10),this["cScalePeer"+v]=this["cScalePeer"+v]||rt(this["cScale"+v],25);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||T(this["cScale"+v],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||T(this.mainBkg,{h:30,s:-30,l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||T(this.mainBkg,{h:30,s:-30,l:-(8+v*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Y(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Y(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=T(this.primaryColor,{h:64}),this.fillType3=T(this.secondaryColor,{h:64}),this.fillType4=T(this.primaryColor,{h:-64}),this.fillType5=T(this.secondaryColor,{h:-64}),this.fillType6=T(this.primaryColor,{h:128}),this.fillType7=T(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||T(this.primaryColor,{l:-30}),this.pie5=this.pie5||T(this.secondaryColor,{l:-30}),this.pie6=this.pie6||T(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||T(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||T(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||T(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||T(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||T(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||T(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ta(this.quadrant1Fill)?Y(this.quadrant1Fill):rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:((t=this.radar)==null?void 0:t.axisColor)||this.lineColor,axisStrokeWidth:((r=this.radar)==null?void 0:r.axisStrokeWidth)||2,axisLabelFontSize:((i=this.radar)==null?void 0:i.axisLabelFontSize)||12,curveOpacity:((a=this.radar)==null?void 0:a.curveOpacity)||.5,curveStrokeWidth:((s=this.radar)==null?void 0:s.curveStrokeWidth)||2,graticuleColor:((o=this.radar)==null?void 0:o.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((n=this.radar)==null?void 0:n.graticuleStrokeWidth)||1,graticuleOpacity:((c=this.radar)==null?void 0:c.graticuleOpacity)||.3,legendBoxSize:((l=this.radar)==null?void 0:l.legendBoxSize)||12,legendFontSize:((h=this.radar)==null?void 0:h.legendFontSize)||12},this.xyChart={backgroundColor:((u=this.xyChart)==null?void 0:u.backgroundColor)||this.background,titleColor:((p=this.xyChart)==null?void 0:p.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((m=this.xyChart)==null?void 0:m.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((y=this.xyChart)==null?void 0:y.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((x=this.xyChart)==null?void 0:x.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((k=this.xyChart)==null?void 0:k.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((C=this.xyChart)==null?void 0:C.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((S=this.xyChart)==null?void 0:S.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||T(this.primaryColor,{h:-30}),this.git4=this.git4||T(this.primaryColor,{h:-60}),this.git5=this.git5||T(this.primaryColor,{h:-90}),this.git6=this.git6||T(this.primaryColor,{h:60}),this.git7=this.git7||T(this.primaryColor,{h:120}),this.darkMode?(this.git0=Y(this.git0,25),this.git1=Y(this.git1,25),this.git2=Y(this.git2,25),this.git3=Y(this.git3,25),this.git4=Y(this.git4,25),this.git5=Y(this.git5,25),this.git6=Y(this.git6,25),this.git7=Y(this.git7,25)):(this.git0=rt(this.git0,25),this.git1=rt(this.git1,25),this.git2=rt(this.git2,25),this.git3=rt(this.git3,25),this.git4=rt(this.git4,25),this.git5=rt(this.git5,25),this.git6=rt(this.git6,25),this.git7=rt(this.git7,25)),this.gitInv0=this.gitInv0||q(this.git0),this.gitInv1=this.gitInv1||q(this.git1),this.gitInv2=this.gitInv2||q(this.git2),this.gitInv3=this.gitInv3||q(this.git3),this.gitInv4=this.gitInv4||q(this.git4),this.gitInv5=this.gitInv5||q(this.git5),this.gitInv6=this.gitInv6||q(this.git6),this.gitInv7=this.gitInv7||q(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||q(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||q(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Qs,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Js}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(ui,"Theme"),ui),K0=f(e=>{const t=new X0;return t.calculate(e),t},"getThemeVariables"),pi,Z0=(pi=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Y(this.contrast,55),this.background="#ffffff",this.tertiaryColor=T(this.primaryColor,{h:-160}),this.primaryBorderColor=se(this.primaryColor,this.darkMode),this.secondaryBorderColor=se(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=se(this.tertiaryColor,this.darkMode),this.primaryTextColor=q(this.primaryColor),this.secondaryTextColor=q(this.secondaryColor),this.tertiaryTextColor=q(this.tertiaryColor),this.lineColor=q(this.background),this.textColor=q(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Y(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,a,s,o,n,c,l,h,u,p,d,m,g,y,b,x,k,C,S;this.secondBkg=Y(this.contrast,55),this.border2=this.contrast,this.actorBorder=Y(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleInv"+v]=this["cScaleInv"+v]||q(this["cScale"+v]);for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this.darkMode?this["cScalePeer"+v]=this["cScalePeer"+v]||Y(this["cScale"+v],10):this["cScalePeer"+v]=this["cScalePeer"+v]||rt(this["cScale"+v],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["cScaleLabel"+v]=this["cScaleLabel"+v]||this.scaleLabelColor;for(let v=0;v<5;v++)this["surface"+v]=this["surface"+v]||T(this.mainBkg,{l:-(5+v*5)}),this["surfacePeer"+v]=this["surfacePeer"+v]||T(this.mainBkg,{l:-(8+v*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Y(this.contrast,30),this.sectionBkgColor2=Y(this.contrast,30),this.taskBorderColor=rt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Y(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=rt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=T(this.primaryColor,{h:64}),this.fillType3=T(this.secondaryColor,{h:64}),this.fillType4=T(this.primaryColor,{h:-64}),this.fillType5=T(this.secondaryColor,{h:-64}),this.fillType6=T(this.primaryColor,{h:128}),this.fillType7=T(this.secondaryColor,{h:128});for(let v=0;v<this.THEME_COLOR_LIMIT;v++)this["pie"+v]=this["cScale"+v];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Ta(this.quadrant1Fill)?Y(this.quadrant1Fill):rt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((n=this.xyChart)==null?void 0:n.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((c=this.xyChart)==null?void 0:c.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((l=this.xyChart)==null?void 0:l.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((h=this.xyChart)==null?void 0:h.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:((p=this.radar)==null?void 0:p.axisColor)||this.lineColor,axisStrokeWidth:((d=this.radar)==null?void 0:d.axisStrokeWidth)||2,axisLabelFontSize:((m=this.radar)==null?void 0:m.axisLabelFontSize)||12,curveOpacity:((g=this.radar)==null?void 0:g.curveOpacity)||.5,curveStrokeWidth:((y=this.radar)==null?void 0:y.curveStrokeWidth)||2,graticuleColor:((b=this.radar)==null?void 0:b.graticuleColor)||"#DEDEDE",graticuleStrokeWidth:((x=this.radar)==null?void 0:x.graticuleStrokeWidth)||1,graticuleOpacity:((k=this.radar)==null?void 0:k.graticuleOpacity)||.3,legendBoxSize:((C=this.radar)==null?void 0:C.legendBoxSize)||12,legendFontSize:((S=this.radar)==null?void 0:S.legendFontSize)||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=rt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||T(this.primaryColor,{h:-30}),this.git4=this.pie5||T(this.primaryColor,{h:-60}),this.git5=this.pie6||T(this.primaryColor,{h:-90}),this.git6=this.pie7||T(this.primaryColor,{h:60}),this.git7=this.pie8||T(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||q(this.git0),this.gitInv1=this.gitInv1||q(this.git1),this.gitInv2=this.gitInv2||q(this.git2),this.gitInv3=this.gitInv3||q(this.git3),this.gitInv4=this.gitInv4||q(this.git4),this.gitInv5=this.gitInv5||q(this.git5),this.gitInv6=this.gitInv6||q(this.git6),this.gitInv7=this.gitInv7||q(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Qs,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Js}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}},f(pi,"Theme"),pi),Q0=f(e=>{const t=new Z0;return t.calculate(e),t},"getThemeVariables"),ir={base:{getThemeVariables:j0},dark:{getThemeVariables:U0},default:{getThemeVariables:V0},forest:{getThemeVariables:K0},neutral:{getThemeVariables:Q0}},Ge={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},bu={...Ge,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:ir.default.getThemeVariables(),sequence:{...Ge.sequence,messageFont:f(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:f(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:f(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Ge.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ge.c4,useWidth:void 0,personFont:f(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:f(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:f(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:f(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:f(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:f(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:f(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:f(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:f(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:f(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:f(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:f(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:f(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:f(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:f(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:f(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:f(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:f(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:f(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:f(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:f(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:f(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Ge.pie,useWidth:984},xyChart:{...Ge.xyChart,useWidth:void 0},requirement:{...Ge.requirement,useWidth:void 0},packet:{...Ge.packet},radar:{...Ge.radar}},xu=f((e,t="")=>Object.keys(e).reduce((r,i)=>Array.isArray(e[i])?r:typeof e[i]=="object"&&e[i]!==null?[...r,t+i,...xu(e[i],"")]:[...r,t+i],[]),"keyify"),J0=new Set(xu(bu,"")),vu=bu,gs=f(e=>{if(O.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>gs(t));return}for(const t of Object.keys(e)){if(O.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!J0.has(t)||e[t]==null){O.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){O.debug("sanitizing object",t),gs(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const i of r)t.includes(i)&&(O.debug("sanitizing css option",t),e[t]=tb(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}O.debug("After sanitization",e)}},"sanitizeDirective"),tb=f(e=>{let t=0,r=0;for(const i of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?t++:i==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},"sanitizeCss"),yi=Object.freeze(vu),fe=Vt({},yi),ku,bi=[],na=Vt({},yi),tn=f((e,t)=>{let r=Vt({},e),i={};for(const a of t)Cu(a),i=Vt(i,a);if(r=Vt(r,i),i.theme&&i.theme in ir){const a=Vt({},ku),s=Vt(a.themeVariables||{},i.themeVariables);r.theme&&r.theme in ir&&(r.themeVariables=ir[r.theme].getThemeVariables(s))}return na=r,Su(na),na},"updateCurrentConfig"),eb=f(e=>(fe=Vt({},yi),fe=Vt(fe,e),e.theme&&ir[e.theme]&&(fe.themeVariables=ir[e.theme].getThemeVariables(e.themeVariables)),tn(fe,bi),fe),"setSiteConfig"),rb=f(e=>{ku=Vt({},e)},"saveConfigFromInitialize"),ib=f(e=>(fe=Vt(fe,e),tn(fe,bi),fe),"updateSiteConfig"),_u=f(()=>Vt({},fe),"getSiteConfig"),wu=f(e=>(Su(e),Vt(na,e),ye()),"setConfig"),ye=f(()=>Vt({},na),"getConfig"),Cu=f(e=>{e&&(["secure",...fe.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(O.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&Cu(e[t])}))},"sanitize"),ab=f(e=>{var t;gs(e),e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables={...e.themeVariables,fontFamily:e.fontFamily}),bi.push(e),tn(fe,bi)},"addDirective"),ys=f((e=fe)=>{bi=[],tn(e,bi)},"reset"),sb={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Mc={},nb=f(e=>{Mc[e]||(O.warn(sb[e]),Mc[e]=!0)},"issueWarning"),Su=f(e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&nb("LAZY_LOAD_DEPRECATED")},"checkConfig"),Ba=/<br\s*\/?>/gi,ob=f(e=>e?Eu(e).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),lb=(()=>{let e=!1;return()=>{e||(Tu(),e=!0)}})();function Tu(){const e="data-temp-href-target";mi.addHook("beforeSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")??"")}),mi.addHook("afterSanitizeAttributes",t=>{t instanceof Element&&t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)??""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}f(Tu,"setupDompurifyHooks");var Bu=f(e=>(lb(),mi.sanitize(e)),"removeScript"),Fc=f((e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const i=t.securityLevel;i==="antiscript"||i==="strict"?e=Bu(e):i!=="loose"&&(e=Eu(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=pb(e))}return e},"sanitizeMore"),Or=f((e,t)=>e&&(t.dompurifyConfig?e=mi.sanitize(Fc(e,t),t.dompurifyConfig).toString():e=mi.sanitize(Fc(e,t),{FORBID_TAGS:["style"]}).toString(),e),"sanitizeText"),cb=f((e,t)=>typeof e=="string"?Or(e,t):e.flat().map(r=>Or(r,t)),"sanitizeTextOrArray"),hb=f(e=>Ba.test(e),"hasBreaks"),ub=f(e=>e.split(Ba),"splitBreaks"),pb=f(e=>e.replace(/#br#/g,"<br/>"),"placeholderToBreak"),Eu=f(e=>e.replace(Ba,"#br#"),"breakToPlaceholder"),db=f(e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},"getUrl"),qt=f(e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),"evaluate"),fb=f(function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},"getMax"),mb=f(function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},"getMin"),Dc=f(function(e){const t=e.split(/(,)/),r=[];for(let i=0;i<t.length;i++){let a=t[i];if(a===","&&i>0&&i+1<t.length){const s=t[i-1],o=t[i+1];gb(s,o)&&(a=s+","+o,i++,r.pop())}r.push(yb(a))}return r.join("")},"parseGenericTypes"),so=f((e,t)=>Math.max(0,e.split(t).length-1),"countOccurrence"),gb=f((e,t)=>{const r=so(e,"~"),i=so(t,"~");return r===1&&i===1},"shouldCombineSets"),yb=f(e=>{const t=so(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const i=[...e];let a=i.indexOf("~"),s=i.lastIndexOf("~");for(;a!==-1&&s!==-1&&a!==s;)i[a]="<",i[s]=">",a=i.indexOf("~"),s=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")},"processSet"),$c=f(()=>window.MathMLElement!==void 0,"isMathMLSupported"),no=/\$\$(.*)\$\$/g,xi=f(e=>{var t;return(((t=e.match(no))==null?void 0:t.length)??0)>0},"hasKatex"),aL=f(async(e,t)=>{e=await el(e,t);const r=document.createElement("div");r.innerHTML=e,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const i=document.querySelector("body");i==null||i.insertAdjacentElement("beforeend",r);const a={width:r.clientWidth,height:r.clientHeight};return r.remove(),a},"calculateMathMLDimensions"),el=f(async(e,t)=>{if(!xi(e))return e;if(!($c()||t.legacyMathML||t.forceLegacyMathML))return e.replace(no,"MathML is unsupported in this environment.");const{default:r}=await St(async()=>{const{default:a}=await import("./ChWnQ-fc.js");return{default:a}},[],import.meta.url),i=t.forceLegacyMathML||!$c()&&t.legacyMathML?"htmlAndMathml":"mathml";return e.split(Ba).map(a=>xi(a)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${a}</div>`:`<div>${a}</div>`).join("").replace(no,(a,s)=>r.renderToString(s,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),Ti={getRows:ob,sanitizeText:Or,sanitizeTextOrArray:cb,hasBreaks:hb,splitBreaks:ub,lineBreakRegex:Ba,removeScript:Bu,getUrl:db,evaluate:qt,getMax:fb,getMin:mb},bb=f(function(e,t){for(let r of t)e.attr(r[0],r[1])},"d3Attrs"),xb=f(function(e,t,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${t}px;`)):(i.set("height",e),i.set("width",t)),i},"calculateSvgSizeAttrs"),Au=f(function(e,t,r,i){const a=xb(t,r,i);bb(e,a)},"configureSvgSize"),vb=f(function(e,t,r,i){const a=t.node().getBBox(),s=a.width,o=a.height;O.info(`SVG bounds: ${s}x${o}`,a);let n=0,c=0;O.info(`Graph bounds: ${n}x${c}`,e),n=s+r*2,c=o+r*2,O.info(`Calculated bounds: ${n}x${c}`),Au(t,c,n,i);const l=`${a.x-r} ${a.y-r} ${a.width+2*r} ${a.height+2*r}`;t.attr("viewBox",l)},"setupGraphViewbox"),is={},kb=f((e,t,r)=>{let i="";return e in is&&is[e]?i=is[e](r):O.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${i}

  ${t}
`},"getStyles"),_b=f((e,t)=>{t!==void 0&&(is[e]=t)},"addStylesForDiagram"),wb=kb,Lu={};z0(Lu,{clear:()=>Cb,getAccDescription:()=>Eb,getAccTitle:()=>Tb,getDiagramTitle:()=>Lb,setAccDescription:()=>Bb,setAccTitle:()=>Sb,setDiagramTitle:()=>Ab});var rl="",il="",al="",sl=f(e=>Or(e,ye()),"sanitizeText"),Cb=f(()=>{rl="",al="",il=""},"clear"),Sb=f(e=>{rl=sl(e).replace(/^\s+/g,"")},"setAccTitle"),Tb=f(()=>rl,"getAccTitle"),Bb=f(e=>{al=sl(e).replace(/\n\s+/g,`
`)},"setAccDescription"),Eb=f(()=>al,"getAccDescription"),Ab=f(e=>{il=sl(e)},"setDiagramTitle"),Lb=f(()=>il,"getDiagramTitle"),Oc=O,Mb=Jo,kt=ye,sL=wu,nL=yi,nl=f(e=>Or(e,kt()),"sanitizeText"),Fb=vb,Db=f(()=>Lu,"getCommonDb"),bs={},xs=f((e,t,r)=>{var i;bs[e]&&Oc.warn(`Diagram with id ${e} already registered. Overwriting.`),bs[e]=t,r&&yu(e,r),_b(e,t.styles),(i=t.injectUtils)==null||i.call(t,Oc,Mb,kt,nl,Fb,Db(),()=>{})},"registerDiagram"),oo=f(e=>{if(e in bs)return bs[e];throw new $b(e)},"getDiagram"),di,$b=(di=class extends Error{constructor(t){super(`Diagram ${t} not found.`)}},f(di,"DiagramNotFoundError"),di);function ol(e){return typeof e>"u"||e===null}f(ol,"isNothing");function Mu(e){return typeof e=="object"&&e!==null}f(Mu,"isObject");function Fu(e){return Array.isArray(e)?e:ol(e)?[]:[e]}f(Fu,"toArray");function Du(e,t){var r,i,a,s;if(t)for(s=Object.keys(t),r=0,i=s.length;r<i;r+=1)a=s[r],e[a]=t[a];return e}f(Du,"extend");function $u(e,t){var r="",i;for(i=0;i<t;i+=1)r+=e;return r}f($u,"repeat");function Ou(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}f(Ou,"isNegativeZero");var Ob=ol,Rb=Mu,Ib=Fu,Pb=$u,Nb=Ou,zb=Du,zt={isNothing:Ob,isObject:Rb,toArray:Ib,repeat:Pb,isNegativeZero:Nb,extend:zb};function ll(e,t){var r="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),i+" "+r):i}f(ll,"formatError");function vi(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=ll(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}f(vi,"YAMLException$1");vi.prototype=Object.create(Error.prototype);vi.prototype.constructor=vi;vi.prototype.toString=f(function(t){return this.name+": "+ll(this,t)},"toString");var me=vi;function as(e,t,r,i,a){var s="",o="",n=Math.floor(a/2)-1;return i-t>n&&(s=" ... ",t=i-n+s.length),r-i>n&&(o=" ...",r=i+n-o.length),{str:s+e.slice(t,r).replace(/\t/g,"→")+o,pos:i-t+s.length}}f(as,"getLine");function ss(e,t){return zt.repeat(" ",t-e.length)+e}f(ss,"padStart");function Ru(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],a=[],s,o=-1;s=r.exec(e.buffer);)a.push(s.index),i.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var n="",c,l,h=Math.min(e.line+t.linesAfter,a.length).toString().length,u=t.maxLength-(t.indent+h+3);for(c=1;c<=t.linesBefore&&!(o-c<0);c++)l=as(e.buffer,i[o-c],a[o-c],e.position-(i[o]-i[o-c]),u),n=zt.repeat(" ",t.indent)+ss((e.line-c+1).toString(),h)+" | "+l.str+`
`+n;for(l=as(e.buffer,i[o],a[o],e.position,u),n+=zt.repeat(" ",t.indent)+ss((e.line+1).toString(),h)+" | "+l.str+`
`,n+=zt.repeat("-",t.indent+h+3+l.pos)+`^
`,c=1;c<=t.linesAfter&&!(o+c>=a.length);c++)l=as(e.buffer,i[o+c],a[o+c],e.position-(i[o]-i[o+c]),u),n+=zt.repeat(" ",t.indent)+ss((e.line+c+1).toString(),h)+" | "+l.str+`
`;return n.replace(/\n$/,"")}f(Ru,"makeSnippet");var qb=Ru,Wb=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Hb=["scalar","sequence","mapping"];function Iu(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(i){t[String(i)]=r})}),t}f(Iu,"compileStyleAliases");function Pu(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Wb.indexOf(r)===-1)throw new me('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Iu(t.styleAliases||null),Hb.indexOf(this.kind)===-1)throw new me('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}f(Pu,"Type$1");var re=Pu;function lo(e,t){var r=[];return e[t].forEach(function(i){var a=r.length;r.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(a=o)}),r[a]=i}),r}f(lo,"compileList");function Nu(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function i(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(f(i,"collectType"),t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(i);return e}f(Nu,"compileMap");function vs(e){return this.extend(e)}f(vs,"Schema$1");vs.prototype.extend=f(function(t){var r=[],i=[];if(t instanceof re)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new me("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof re))throw new me("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new me("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new me("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof re))throw new me("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(vs.prototype);return a.implicit=(this.implicit||[]).concat(r),a.explicit=(this.explicit||[]).concat(i),a.compiledImplicit=lo(a,"implicit"),a.compiledExplicit=lo(a,"explicit"),a.compiledTypeMap=Nu(a.compiledImplicit,a.compiledExplicit),a},"extend");var jb=vs,Yb=new re("tag:yaml.org,2002:str",{kind:"scalar",construct:f(function(e){return e!==null?e:""},"construct")}),Ub=new re("tag:yaml.org,2002:seq",{kind:"sequence",construct:f(function(e){return e!==null?e:[]},"construct")}),Gb=new re("tag:yaml.org,2002:map",{kind:"mapping",construct:f(function(e){return e!==null?e:{}},"construct")}),Vb=new jb({explicit:[Yb,Ub,Gb]});function zu(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}f(zu,"resolveYamlNull");function qu(){return null}f(qu,"constructYamlNull");function Wu(e){return e===null}f(Wu,"isNull");var Xb=new re("tag:yaml.org,2002:null",{kind:"scalar",resolve:zu,construct:qu,predicate:Wu,represent:{canonical:f(function(){return"~"},"canonical"),lowercase:f(function(){return"null"},"lowercase"),uppercase:f(function(){return"NULL"},"uppercase"),camelcase:f(function(){return"Null"},"camelcase"),empty:f(function(){return""},"empty")},defaultStyle:"lowercase"});function Hu(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}f(Hu,"resolveYamlBoolean");function ju(e){return e==="true"||e==="True"||e==="TRUE"}f(ju,"constructYamlBoolean");function Yu(e){return Object.prototype.toString.call(e)==="[object Boolean]"}f(Yu,"isBoolean");var Kb=new re("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Hu,construct:ju,predicate:Yu,represent:{lowercase:f(function(e){return e?"true":"false"},"lowercase"),uppercase:f(function(e){return e?"TRUE":"FALSE"},"uppercase"),camelcase:f(function(e){return e?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Uu(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}f(Uu,"isHexCode");function Gu(e){return 48<=e&&e<=55}f(Gu,"isOctCode");function Vu(e){return 48<=e&&e<=57}f(Vu,"isDecCode");function Xu(e){if(e===null)return!1;var t=e.length,r=0,i=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;i=!0}return i&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!Uu(e.charCodeAt(r)))return!1;i=!0}return i&&a!=="_"}if(a==="o"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!Gu(e.charCodeAt(r)))return!1;i=!0}return i&&a!=="_"}}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(!Vu(e.charCodeAt(r)))return!1;i=!0}return!(!i||a==="_")}f(Xu,"resolveYamlInteger");function Ku(e){var t=e,r=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}f(Ku,"constructYamlInteger");function Zu(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!zt.isNegativeZero(e)}f(Zu,"isInteger");var Zb=new re("tag:yaml.org,2002:int",{kind:"scalar",resolve:Xu,construct:Ku,predicate:Zu,represent:{binary:f(function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},"binary"),octal:f(function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},"octal"),decimal:f(function(e){return e.toString(10)},"decimal"),hexadecimal:f(function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Qb=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Qu(e){return!(e===null||!Qb.test(e)||e[e.length-1]==="_")}f(Qu,"resolveYamlFloat");function Ju(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}f(Ju,"constructYamlFloat");var Jb=/^[-+]?[0-9]+e/;function tp(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(zt.isNegativeZero(e))return"-0.0";return r=e.toString(10),Jb.test(r)?r.replace("e",".e"):r}f(tp,"representYamlFloat");function ep(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||zt.isNegativeZero(e))}f(ep,"isFloat");var tx=new re("tag:yaml.org,2002:float",{kind:"scalar",resolve:Qu,construct:Ju,predicate:ep,represent:tp,defaultStyle:"lowercase"}),rp=Vb.extend({implicit:[Xb,Kb,Zb,tx]}),ex=rp,ip=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ap=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function sp(e){return e===null?!1:ip.exec(e)!==null||ap.exec(e)!==null}f(sp,"resolveYamlTimestamp");function np(e){var t,r,i,a,s,o,n,c=0,l=null,h,u,p;if(t=ip.exec(e),t===null&&(t=ap.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],i=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,i,a));if(s=+t[4],o=+t[5],n=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(h=+t[10],u=+(t[11]||0),l=(h*60+u)*6e4,t[9]==="-"&&(l=-l)),p=new Date(Date.UTC(r,i,a,s,o,n,c)),l&&p.setTime(p.getTime()-l),p}f(np,"constructYamlTimestamp");function op(e){return e.toISOString()}f(op,"representYamlTimestamp");var rx=new re("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:sp,construct:np,instanceOf:Date,represent:op});function lp(e){return e==="<<"||e===null}f(lp,"resolveYamlMerge");var ix=new re("tag:yaml.org,2002:merge",{kind:"scalar",resolve:lp}),cl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function cp(e){if(e===null)return!1;var t,r,i=0,a=e.length,s=cl;for(r=0;r<a;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}f(cp,"resolveYamlBinary");function hp(e){var t,r,i=e.replace(/[\r\n=]/g,""),a=i.length,s=cl,o=0,n=[];for(t=0;t<a;t++)t%4===0&&t&&(n.push(o>>16&255),n.push(o>>8&255),n.push(o&255)),o=o<<6|s.indexOf(i.charAt(t));return r=a%4*6,r===0?(n.push(o>>16&255),n.push(o>>8&255),n.push(o&255)):r===18?(n.push(o>>10&255),n.push(o>>2&255)):r===12&&n.push(o>>4&255),new Uint8Array(n)}f(hp,"constructYamlBinary");function up(e){var t="",r=0,i,a,s=e.length,o=cl;for(i=0;i<s;i++)i%3===0&&i&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[i];return a=s%3,a===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):a===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):a===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}f(up,"representYamlBinary");function pp(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}f(pp,"isBinary");var ax=new re("tag:yaml.org,2002:binary",{kind:"scalar",resolve:cp,construct:hp,predicate:pp,represent:up}),sx=Object.prototype.hasOwnProperty,nx=Object.prototype.toString;function dp(e){if(e===null)return!0;var t=[],r,i,a,s,o,n=e;for(r=0,i=n.length;r<i;r+=1){if(a=n[r],o=!1,nx.call(a)!=="[object Object]")return!1;for(s in a)if(sx.call(a,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}f(dp,"resolveYamlOmap");function fp(e){return e!==null?e:[]}f(fp,"constructYamlOmap");var ox=new re("tag:yaml.org,2002:omap",{kind:"sequence",resolve:dp,construct:fp}),lx=Object.prototype.toString;function mp(e){if(e===null)return!0;var t,r,i,a,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(i=o[t],lx.call(i)!=="[object Object]"||(a=Object.keys(i),a.length!==1))return!1;s[t]=[a[0],i[a[0]]]}return!0}f(mp,"resolveYamlPairs");function gp(e){if(e===null)return[];var t,r,i,a,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)i=o[t],a=Object.keys(i),s[t]=[a[0],i[a[0]]];return s}f(gp,"constructYamlPairs");var cx=new re("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:mp,construct:gp}),hx=Object.prototype.hasOwnProperty;function yp(e){if(e===null)return!0;var t,r=e;for(t in r)if(hx.call(r,t)&&r[t]!==null)return!1;return!0}f(yp,"resolveYamlSet");function bp(e){return e!==null?e:{}}f(bp,"constructYamlSet");var ux=new re("tag:yaml.org,2002:set",{kind:"mapping",resolve:yp,construct:bp}),xp=ex.extend({implicit:[rx,ix],explicit:[ax,ox,cx,ux]}),fr=Object.prototype.hasOwnProperty,ks=1,vp=2,kp=3,_s=4,Nn=1,px=2,Rc=3,dx=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,fx=/[\x85\u2028\u2029]/,mx=/[,\[\]\{\}]/,_p=/^(?:!|!!|![a-z\-]+!)$/i,wp=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function co(e){return Object.prototype.toString.call(e)}f(co,"_class");function Be(e){return e===10||e===13}f(Be,"is_EOL");function dr(e){return e===9||e===32}f(dr,"is_WHITE_SPACE");function ne(e){return e===9||e===32||e===10||e===13}f(ne,"is_WS_OR_EOL");function Er(e){return e===44||e===91||e===93||e===123||e===125}f(Er,"is_FLOW_INDICATOR");function Cp(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}f(Cp,"fromHexCode");function Sp(e){return e===120?2:e===117?4:e===85?8:0}f(Sp,"escapedHexLen");function Tp(e){return 48<=e&&e<=57?e-48:-1}f(Tp,"fromDecimalCode");function ho(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}f(ho,"simpleEscapeSequence");function Bp(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}f(Bp,"charFromCodepoint");var Ep=new Array(256),Ap=new Array(256);for(wr=0;wr<256;wr++)Ep[wr]=ho(wr)?1:0,Ap[wr]=ho(wr);var wr;function Lp(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||xp,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}f(Lp,"State$1");function hl(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=qb(r),new me(t,r)}f(hl,"generateError");function tt(e,t){throw hl(e,t)}f(tt,"throwError");function pa(e,t){e.onWarning&&e.onWarning.call(null,hl(e,t))}f(pa,"throwWarning");var Ic={YAML:f(function(t,r,i){var a,s,o;t.version!==null&&tt(t,"duplication of %YAML directive"),i.length!==1&&tt(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),a===null&&tt(t,"ill-formed argument of the YAML directive"),s=parseInt(a[1],10),o=parseInt(a[2],10),s!==1&&tt(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&pa(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:f(function(t,r,i){var a,s;i.length!==2&&tt(t,"TAG directive accepts exactly two arguments"),a=i[0],s=i[1],_p.test(a)||tt(t,"ill-formed tag handle (first argument) of the TAG directive"),fr.call(t.tagMap,a)&&tt(t,'there is a previously declared suffix for "'+a+'" tag handle'),wp.test(s)||tt(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{tt(t,"tag prefix is malformed: "+s)}t.tagMap[a]=s},"handleTagDirective")};function ar(e,t,r,i){var a,s,o,n;if(t<r){if(n=e.input.slice(t,r),i)for(a=0,s=n.length;a<s;a+=1)o=n.charCodeAt(a),o===9||32<=o&&o<=1114111||tt(e,"expected valid JSON character");else dx.test(n)&&tt(e,"the stream contains non-printable characters");e.result+=n}}f(ar,"captureSegment");function uo(e,t,r,i){var a,s,o,n;for(zt.isObject(r)||tt(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),o=0,n=a.length;o<n;o+=1)s=a[o],fr.call(t,s)||(t[s]=r[s],i[s]=!0)}f(uo,"mergeMappings");function Ar(e,t,r,i,a,s,o,n,c){var l,h;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),l=0,h=a.length;l<h;l+=1)Array.isArray(a[l])&&tt(e,"nested arrays are not supported inside keys"),typeof a=="object"&&co(a[l])==="[object Object]"&&(a[l]="[object Object]");if(typeof a=="object"&&co(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(l=0,h=s.length;l<h;l+=1)uo(e,t,s[l],r);else uo(e,t,s,r);else!e.json&&!fr.call(r,a)&&fr.call(t,a)&&(e.line=o||e.line,e.lineStart=n||e.lineStart,e.position=c||e.position,tt(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[a]=s,delete r[a];return t}f(Ar,"storeMappingPair");function en(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):tt(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}f(en,"readLineBreak");function Rt(e,t,r){for(var i=0,a=e.input.charCodeAt(e.position);a!==0;){for(;dr(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(Be(a))for(en(e),a=e.input.charCodeAt(e.position),i++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&i!==0&&e.lineIndent<r&&pa(e,"deficient indentation"),i}f(Rt,"skipSeparationSpace");function Ea(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||ne(r)))}f(Ea,"testDocumentSeparator");function rn(e,t){t===1?e.result+=" ":t>1&&(e.result+=zt.repeat(`
`,t-1))}f(rn,"writeFoldedLines");function Mp(e,t,r){var i,a,s,o,n,c,l,h,u=e.kind,p=e.result,d;if(d=e.input.charCodeAt(e.position),ne(d)||Er(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(a=e.input.charCodeAt(e.position+1),ne(a)||r&&Er(a)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,n=!1;d!==0;){if(d===58){if(a=e.input.charCodeAt(e.position+1),ne(a)||r&&Er(a))break}else if(d===35){if(i=e.input.charCodeAt(e.position-1),ne(i))break}else{if(e.position===e.lineStart&&Ea(e)||r&&Er(d))break;if(Be(d))if(c=e.line,l=e.lineStart,h=e.lineIndent,Rt(e,!1,-1),e.lineIndent>=t){n=!0,d=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=c,e.lineStart=l,e.lineIndent=h;break}}n&&(ar(e,s,o,!1),rn(e,e.line-c),s=o=e.position,n=!1),dr(d)||(o=e.position+1),d=e.input.charCodeAt(++e.position)}return ar(e,s,o,!1),e.result?!0:(e.kind=u,e.result=p,!1)}f(Mp,"readPlainScalar");function Fp(e,t){var r,i,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ar(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)i=e.position,e.position++,a=e.position;else return!0;else Be(r)?(ar(e,i,a,!0),rn(e,Rt(e,!1,t)),i=a=e.position):e.position===e.lineStart&&Ea(e)?tt(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);tt(e,"unexpected end of the stream within a single quoted scalar")}f(Fp,"readSingleQuotedScalar");function Dp(e,t){var r,i,a,s,o,n;if(n=e.input.charCodeAt(e.position),n!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(n=e.input.charCodeAt(e.position))!==0;){if(n===34)return ar(e,r,e.position,!0),e.position++,!0;if(n===92){if(ar(e,r,e.position,!0),n=e.input.charCodeAt(++e.position),Be(n))Rt(e,!1,t);else if(n<256&&Ep[n])e.result+=Ap[n],e.position++;else if((o=Sp(n))>0){for(a=o,s=0;a>0;a--)n=e.input.charCodeAt(++e.position),(o=Cp(n))>=0?s=(s<<4)+o:tt(e,"expected hexadecimal character");e.result+=Bp(s),e.position++}else tt(e,"unknown escape sequence");r=i=e.position}else Be(n)?(ar(e,r,i,!0),rn(e,Rt(e,!1,t)),r=i=e.position):e.position===e.lineStart&&Ea(e)?tt(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}tt(e,"unexpected end of the stream within a double quoted scalar")}f(Dp,"readDoubleQuotedScalar");function $p(e,t){var r=!0,i,a,s,o=e.tag,n,c=e.anchor,l,h,u,p,d,m=Object.create(null),g,y,b,x;if(x=e.input.charCodeAt(e.position),x===91)h=93,d=!1,n=[];else if(x===123)h=125,d=!0,n={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=n),x=e.input.charCodeAt(++e.position);x!==0;){if(Rt(e,!0,t),x=e.input.charCodeAt(e.position),x===h)return e.position++,e.tag=o,e.anchor=c,e.kind=d?"mapping":"sequence",e.result=n,!0;r?x===44&&tt(e,"expected the node content, but found ','"):tt(e,"missed comma between flow collection entries"),y=g=b=null,u=p=!1,x===63&&(l=e.input.charCodeAt(e.position+1),ne(l)&&(u=p=!0,e.position++,Rt(e,!0,t))),i=e.line,a=e.lineStart,s=e.position,Rr(e,t,ks,!1,!0),y=e.tag,g=e.result,Rt(e,!0,t),x=e.input.charCodeAt(e.position),(p||e.line===i)&&x===58&&(u=!0,x=e.input.charCodeAt(++e.position),Rt(e,!0,t),Rr(e,t,ks,!1,!0),b=e.result),d?Ar(e,n,m,y,g,b,i,a,s):u?n.push(Ar(e,null,m,y,g,b,i,a,s)):n.push(g),Rt(e,!0,t),x=e.input.charCodeAt(e.position),x===44?(r=!0,x=e.input.charCodeAt(++e.position)):r=!1}tt(e,"unexpected end of the stream within a flow collection")}f($p,"readFlowCollection");function Op(e,t){var r,i,a=Nn,s=!1,o=!1,n=t,c=0,l=!1,h,u;if(u=e.input.charCodeAt(e.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(e.kind="scalar",e.result="";u!==0;)if(u=e.input.charCodeAt(++e.position),u===43||u===45)Nn===a?a=u===43?Rc:px:tt(e,"repeat of a chomping mode identifier");else if((h=Tp(u))>=0)h===0?tt(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?tt(e,"repeat of an indentation width identifier"):(n=t+h-1,o=!0);else break;if(dr(u)){do u=e.input.charCodeAt(++e.position);while(dr(u));if(u===35)do u=e.input.charCodeAt(++e.position);while(!Be(u)&&u!==0)}for(;u!==0;){for(en(e),e.lineIndent=0,u=e.input.charCodeAt(e.position);(!o||e.lineIndent<n)&&u===32;)e.lineIndent++,u=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>n&&(n=e.lineIndent),Be(u)){c++;continue}if(e.lineIndent<n){a===Rc?e.result+=zt.repeat(`
`,s?1+c:c):a===Nn&&s&&(e.result+=`
`);break}for(i?dr(u)?(l=!0,e.result+=zt.repeat(`
`,s?1+c:c)):l?(l=!1,e.result+=zt.repeat(`
`,c+1)):c===0?s&&(e.result+=" "):e.result+=zt.repeat(`
`,c):e.result+=zt.repeat(`
`,s?1+c:c),s=!0,o=!0,c=0,r=e.position;!Be(u)&&u!==0;)u=e.input.charCodeAt(++e.position);ar(e,r,e.position,!1)}return!0}f(Op,"readBlockScalar");function po(e,t){var r,i=e.tag,a=e.anchor,s=[],o,n=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,tt(e,"tab characters must not be used in indentation")),!(c!==45||(o=e.input.charCodeAt(e.position+1),!ne(o))));){if(n=!0,e.position++,Rt(e,!0,-1)&&e.lineIndent<=t){s.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,Rr(e,t,kp,!1,!0),s.push(e.result),Rt(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)tt(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return n?(e.tag=i,e.anchor=a,e.kind="sequence",e.result=s,!0):!1}f(po,"readBlockSequence");function Rp(e,t,r){var i,a,s,o,n,c,l=e.tag,h=e.anchor,u={},p=Object.create(null),d=null,m=null,g=null,y=!1,b=!1,x;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),x=e.input.charCodeAt(e.position);x!==0;){if(!y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,tt(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),s=e.line,(x===63||x===58)&&ne(i))x===63?(y&&(Ar(e,u,p,d,m,null,o,n,c),d=m=g=null),b=!0,y=!0,a=!0):y?(y=!1,a=!0):tt(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,x=i;else{if(o=e.line,n=e.lineStart,c=e.position,!Rr(e,r,vp,!1,!0))break;if(e.line===s){for(x=e.input.charCodeAt(e.position);dr(x);)x=e.input.charCodeAt(++e.position);if(x===58)x=e.input.charCodeAt(++e.position),ne(x)||tt(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(Ar(e,u,p,d,m,null,o,n,c),d=m=g=null),b=!0,y=!1,a=!1,d=e.tag,m=e.result;else if(b)tt(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=l,e.anchor=h,!0}else if(b)tt(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=l,e.anchor=h,!0}if((e.line===s||e.lineIndent>t)&&(y&&(o=e.line,n=e.lineStart,c=e.position),Rr(e,t,_s,!0,a)&&(y?m=e.result:g=e.result),y||(Ar(e,u,p,d,m,g,o,n,c),d=m=g=null),Rt(e,!0,-1),x=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&x!==0)tt(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return y&&Ar(e,u,p,d,m,null,o,n,c),b&&(e.tag=l,e.anchor=h,e.kind="mapping",e.result=u),b}f(Rp,"readBlockMapping");function Ip(e){var t,r=!1,i=!1,a,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&tt(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,a="!!",o=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):tt(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ne(o);)o===33&&(i?tt(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),_p.test(a)||tt(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),mx.test(s)&&tt(e,"tag suffix cannot contain flow indicator characters")}s&&!wp.test(s)&&tt(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{tt(e,"tag name is malformed: "+s)}return r?e.tag=s:fr.call(e.tagMap,a)?e.tag=e.tagMap[a]+s:a==="!"?e.tag="!"+s:a==="!!"?e.tag="tag:yaml.org,2002:"+s:tt(e,'undeclared tag handle "'+a+'"'),!0}f(Ip,"readTagProperty");function Pp(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&tt(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!ne(r)&&!Er(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&tt(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}f(Pp,"readAnchorProperty");function Np(e){var t,r,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!ne(i)&&!Er(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&tt(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),fr.call(e.anchorMap,r)||tt(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Rt(e,!0,-1),!0}f(Np,"readAlias");function Rr(e,t,r,i,a){var s,o,n,c=1,l=!1,h=!1,u,p,d,m,g,y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=n=_s===r||kp===r,i&&Rt(e,!0,-1)&&(l=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;Ip(e)||Pp(e);)Rt(e,!0,-1)?(l=!0,n=s,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):n=!1;if(n&&(n=l||a),(c===1||_s===r)&&(ks===r||vp===r?g=t:g=t+1,y=e.position-e.lineStart,c===1?n&&(po(e,y)||Rp(e,y,g))||$p(e,g)?h=!0:(o&&Op(e,g)||Fp(e,g)||Dp(e,g)?h=!0:Np(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&tt(e,"alias node should not have any properties")):Mp(e,g,ks===r)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(h=n&&po(e,y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&tt(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,p=e.implicitTypes.length;u<p;u+=1)if(m=e.implicitTypes[u],m.resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(fr.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,d=e.typeMap.multi[e.kind||"fallback"],u=0,p=d.length;u<p;u+=1)if(e.tag.slice(0,d[u].tag.length)===d[u].tag){m=d[u];break}m||tt(e,"unknown tag !<"+e.tag+">"),e.result!==null&&m.kind!==e.kind&&tt(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):tt(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}f(Rr,"composeNode");function zp(e){var t=e.position,r,i,a,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Rt(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!ne(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(r,e.position),a=[],i.length<1&&tt(e,"directive name must not be less than one character in length");o!==0;){for(;dr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Be(o));break}if(Be(o))break;for(r=e.position;o!==0&&!ne(o);)o=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}o!==0&&en(e),fr.call(Ic,i)?Ic[i](e,i,a):pa(e,'unknown document directive "'+i+'"')}if(Rt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Rt(e,!0,-1)):s&&tt(e,"directives end mark is expected"),Rr(e,e.lineIndent-1,_s,!1,!0),Rt(e,!0,-1),e.checkLineBreaks&&fx.test(e.input.slice(t,e.position))&&pa(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ea(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Rt(e,!0,-1));return}if(e.position<e.length-1)tt(e,"end of the stream or a document separator is expected");else return}f(zp,"readDocument");function ul(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Lp(e,t),i=e.indexOf("\0");for(i!==-1&&(r.position=i,tt(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)zp(r);return r.documents}f(ul,"loadDocuments");function gx(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var i=ul(e,r);if(typeof t!="function")return i;for(var a=0,s=i.length;a<s;a+=1)t(i[a])}f(gx,"loadAll$1");function qp(e,t){var r=ul(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new me("expected a single document in the stream, but found more")}}f(qp,"load$1");var yx=qp,bx={load:yx},Wp=Object.prototype.toString,Hp=Object.prototype.hasOwnProperty,pl=65279,xx=9,da=10,vx=13,kx=32,_x=33,wx=34,fo=35,Cx=37,Sx=38,Tx=39,Bx=42,jp=44,Ex=45,ws=58,Ax=61,Lx=62,Mx=63,Fx=64,Yp=91,Up=93,Dx=96,Gp=123,$x=124,Vp=125,ie={};ie[0]="\\0";ie[7]="\\a";ie[8]="\\b";ie[9]="\\t";ie[10]="\\n";ie[11]="\\v";ie[12]="\\f";ie[13]="\\r";ie[27]="\\e";ie[34]='\\"';ie[92]="\\\\";ie[133]="\\N";ie[160]="\\_";ie[8232]="\\L";ie[8233]="\\P";var Ox=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Rx=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Xp(e,t){var r,i,a,s,o,n,c;if(t===null)return{};for(r={},i=Object.keys(t),a=0,s=i.length;a<s;a+=1)o=i[a],n=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=e.compiledTypeMap.fallback[o],c&&Hp.call(c.styleAliases,n)&&(n=c.styleAliases[n]),r[o]=n;return r}f(Xp,"compileStyleMap");function Kp(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else if(e<=4294967295)r="U",i=8;else throw new me("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+zt.repeat("0",i-t.length)+t}f(Kp,"encodeHex");var Ix=1,fa=2;function Zp(e){this.schema=e.schema||xp,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=zt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Xp(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?fa:Ix,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}f(Zp,"State");function mo(e,t){for(var r=zt.repeat(" ",t),i=0,a=-1,s="",o,n=e.length;i<n;)a=e.indexOf(`
`,i),a===-1?(o=e.slice(i),i=n):(o=e.slice(i,a+1),i=a+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}f(mo,"indentString");function Cs(e,t){return`
`+zt.repeat(" ",e.indent*t)}f(Cs,"generateNextLine");function Qp(e,t){var r,i,a;for(r=0,i=e.implicitTypes.length;r<i;r+=1)if(a=e.implicitTypes[r],a.resolve(t))return!0;return!1}f(Qp,"testImplicitResolving");function ma(e){return e===kx||e===xx}f(ma,"isWhitespace");function ki(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==pl||65536<=e&&e<=1114111}f(ki,"isPrintable");function go(e){return ki(e)&&e!==pl&&e!==vx&&e!==da}f(go,"isNsCharOrWhitespace");function yo(e,t,r){var i=go(e),a=i&&!ma(e);return(r?i:i&&e!==jp&&e!==Yp&&e!==Up&&e!==Gp&&e!==Vp)&&e!==fo&&!(t===ws&&!a)||go(t)&&!ma(t)&&e===fo||t===ws&&a}f(yo,"isPlainSafe");function Jp(e){return ki(e)&&e!==pl&&!ma(e)&&e!==Ex&&e!==Mx&&e!==ws&&e!==jp&&e!==Yp&&e!==Up&&e!==Gp&&e!==Vp&&e!==fo&&e!==Sx&&e!==Bx&&e!==_x&&e!==$x&&e!==Ax&&e!==Lx&&e!==Tx&&e!==wx&&e!==Cx&&e!==Fx&&e!==Dx}f(Jp,"isPlainSafeFirst");function td(e){return!ma(e)&&e!==ws}f(td,"isPlainSafeLast");function ei(e,t){var r=e.charCodeAt(t),i;return r>=55296&&r<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}f(ei,"codePointAt");function dl(e){var t=/^\n* /;return t.test(e)}f(dl,"needIndentIndicator");var ed=1,bo=2,rd=3,id=4,Jr=5;function ad(e,t,r,i,a,s,o,n){var c,l=0,h=null,u=!1,p=!1,d=i!==-1,m=-1,g=Jp(ei(e,0))&&td(ei(e,e.length-1));if(t||o)for(c=0;c<e.length;l>=65536?c+=2:c++){if(l=ei(e,c),!ki(l))return Jr;g=g&&yo(l,h,n),h=l}else{for(c=0;c<e.length;l>=65536?c+=2:c++){if(l=ei(e,c),l===da)u=!0,d&&(p=p||c-m-1>i&&e[m+1]!==" ",m=c);else if(!ki(l))return Jr;g=g&&yo(l,h,n),h=l}p=p||d&&c-m-1>i&&e[m+1]!==" "}return!u&&!p?g&&!o&&!a(e)?ed:s===fa?Jr:bo:r>9&&dl(e)?Jr:o?s===fa?Jr:bo:p?id:rd}f(ad,"chooseScalarStyle");function sd(e,t,r,i,a){e.dump=function(){if(t.length===0)return e.quotingType===fa?'""':"''";if(!e.noCompatMode&&(Ox.indexOf(t)!==-1||Rx.test(t)))return e.quotingType===fa?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),n=i||e.flowLevel>-1&&r>=e.flowLevel;function c(l){return Qp(e,l)}switch(f(c,"testAmbiguity"),ad(t,n,e.indent,o,c,e.quotingType,e.forceQuotes&&!i,a)){case ed:return t;case bo:return"'"+t.replace(/'/g,"''")+"'";case rd:return"|"+xo(t,e.indent)+vo(mo(t,s));case id:return">"+xo(t,e.indent)+vo(mo(nd(t,o),s));case Jr:return'"'+od(t)+'"';default:throw new me("impossible error: invalid scalar style")}}()}f(sd,"writeScalar");function xo(e,t){var r=dl(e)?String(t):"",i=e[e.length-1]===`
`,a=i&&(e[e.length-2]===`
`||e===`
`),s=a?"+":i?"":"-";return r+s+`
`}f(xo,"blockHeader");function vo(e){return e[e.length-1]===`
`?e.slice(0,-1):e}f(vo,"dropEndingNewline");function nd(e,t){for(var r=/(\n+)([^\n]*)/g,i=function(){var l=e.indexOf(`
`);return l=l!==-1?l:e.length,r.lastIndex=l,ko(e.slice(0,l),t)}(),a=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var n=o[1],c=o[2];s=c[0]===" ",i+=n+(!a&&!s&&c!==""?`
`:"")+ko(c,t),a=s}return i}f(nd,"foldString");function ko(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,i,a=0,s,o=0,n=0,c="";i=r.exec(e);)n=i.index,n-a>t&&(s=o>a?o:n,c+=`
`+e.slice(a,s),a=s+1),o=n;return c+=`
`,e.length-a>t&&o>a?c+=e.slice(a,o)+`
`+e.slice(o+1):c+=e.slice(a),c.slice(1)}f(ko,"foldLine");function od(e){for(var t="",r=0,i,a=0;a<e.length;r>=65536?a+=2:a++)r=ei(e,a),i=ie[r],!i&&ki(r)?(t+=e[a],r>=65536&&(t+=e[a+1])):t+=i||Kp(r);return t}f(od,"escapeString");function ld(e,t,r){var i="",a=e.tag,s,o,n;for(s=0,o=r.length;s<o;s+=1)n=r[s],e.replacer&&(n=e.replacer.call(r,String(s),n)),(Ne(e,t,n,!1,!1)||typeof n>"u"&&Ne(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=a,e.dump="["+i+"]"}f(ld,"writeFlowSequence");function _o(e,t,r,i){var a="",s=e.tag,o,n,c;for(o=0,n=r.length;o<n;o+=1)c=r[o],e.replacer&&(c=e.replacer.call(r,String(o),c)),(Ne(e,t+1,c,!0,!0,!1,!0)||typeof c>"u"&&Ne(e,t+1,null,!0,!0,!1,!0))&&((!i||a!=="")&&(a+=Cs(e,t)),e.dump&&da===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=s,e.dump=a||"[]"}f(_o,"writeBlockSequence");function cd(e,t,r){var i="",a=e.tag,s=Object.keys(r),o,n,c,l,h;for(o=0,n=s.length;o<n;o+=1)h="",i!==""&&(h+=", "),e.condenseFlow&&(h+='"'),c=s[o],l=r[c],e.replacer&&(l=e.replacer.call(r,c,l)),Ne(e,t,c,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ne(e,t,l,!1,!1)&&(h+=e.dump,i+=h));e.tag=a,e.dump="{"+i+"}"}f(cd,"writeFlowMapping");function hd(e,t,r,i){var a="",s=e.tag,o=Object.keys(r),n,c,l,h,u,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new me("sortKeys must be a boolean or a function");for(n=0,c=o.length;n<c;n+=1)p="",(!i||a!=="")&&(p+=Cs(e,t)),l=o[n],h=r[l],e.replacer&&(h=e.replacer.call(r,l,h)),Ne(e,t+1,l,!0,!0,!0)&&(u=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,u&&(e.dump&&da===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,u&&(p+=Cs(e,t)),Ne(e,t+1,h,!0,u)&&(e.dump&&da===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,a+=p));e.tag=s,e.dump=a||"{}"}f(hd,"writeBlockMapping");function wo(e,t,r){var i,a,s,o,n,c;for(a=r?e.explicitTypes:e.implicitTypes,s=0,o=a.length;s<o;s+=1)if(n=a[s],(n.instanceOf||n.predicate)&&(!n.instanceOf||typeof t=="object"&&t instanceof n.instanceOf)&&(!n.predicate||n.predicate(t))){if(r?n.multi&&n.representName?e.tag=n.representName(t):e.tag=n.tag:e.tag="?",n.represent){if(c=e.styleMap[n.tag]||n.defaultStyle,Wp.call(n.represent)==="[object Function]")i=n.represent(t,c);else if(Hp.call(n.represent,c))i=n.represent[c](t,c);else throw new me("!<"+n.tag+'> tag resolver accepts not "'+c+'" style');e.dump=i}return!0}return!1}f(wo,"detectType");function Ne(e,t,r,i,a,s,o){e.tag=null,e.dump=r,wo(e,r,!1)||wo(e,r,!0);var n=Wp.call(e.dump),c=i,l;i&&(i=e.flowLevel<0||e.flowLevel>t);var h=n==="[object Object]"||n==="[object Array]",u,p;if(h&&(u=e.duplicates.indexOf(r),p=u!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(a=!1),p&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&p&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),n==="[object Object]")i&&Object.keys(e.dump).length!==0?(hd(e,t,e.dump,a),p&&(e.dump="&ref_"+u+e.dump)):(cd(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if(n==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?_o(e,t-1,e.dump,a):_o(e,t,e.dump,a),p&&(e.dump="&ref_"+u+e.dump)):(ld(e,t,e.dump),p&&(e.dump="&ref_"+u+" "+e.dump));else if(n==="[object String]")e.tag!=="?"&&sd(e,e.dump,t,s,c);else{if(n==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new me("unacceptable kind of an object to dump "+n)}e.tag!==null&&e.tag!=="?"&&(l=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",e.dump=l+" "+e.dump)}return!0}f(Ne,"writeNode");function ud(e,t){var r=[],i=[],a,s;for(Ss(e,r,i),a=0,s=i.length;a<s;a+=1)t.duplicates.push(r[i[a]]);t.usedDuplicates=new Array(s)}f(ud,"getDuplicateReferences");function Ss(e,t,r){var i,a,s;if(e!==null&&typeof e=="object")if(a=t.indexOf(e),a!==-1)r.indexOf(a)===-1&&r.push(a);else if(t.push(e),Array.isArray(e))for(a=0,s=e.length;a<s;a+=1)Ss(e[a],t,r);else for(i=Object.keys(e),a=0,s=i.length;a<s;a+=1)Ss(e[i[a]],t,r)}f(Ss,"inspectNode");function Px(e,t){t=t||{};var r=new Zp(t);r.noRefs||ud(e,r);var i=e;return r.replacer&&(i=r.replacer.call({"":i},"",i)),Ne(r,0,i,!0,!0)?r.dump+`
`:""}f(Px,"dump$1");function Nx(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}f(Nx,"renamed");var zx=rp,qx=bx.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var _e={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function Zi(e,t){if(e===void 0||t===void 0)return{angle:0,deltaX:0,deltaY:0};e=Mt(e),t=Mt(t);const[r,i]=[e.x,e.y],[a,s]=[t.x,t.y],o=a-r,n=s-i;return{angle:Math.atan(n/o),deltaX:o,deltaY:n}}f(Zi,"calculateDeltaAndAngle");var Mt=f(e=>Array.isArray(e)?{x:e[0],y:e[1]}:e,"pointTransformer"),Wx=f(e=>({x:f(function(t,r,i){let a=0;const s=Mt(i[0]).x<Mt(i[i.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(_e,e.arrowTypeStart)){const{angle:d,deltaX:m}=Zi(i[0],i[1]);a=_e[e.arrowTypeStart]*Math.cos(d)*(m>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(_e,e.arrowTypeEnd)){const{angle:d,deltaX:m}=Zi(i[i.length-1],i[i.length-2]);a=_e[e.arrowTypeEnd]*Math.cos(d)*(m>=0?1:-1)}const o=Math.abs(Mt(t).x-Mt(i[i.length-1]).x),n=Math.abs(Mt(t).y-Mt(i[i.length-1]).y),c=Math.abs(Mt(t).x-Mt(i[0]).x),l=Math.abs(Mt(t).y-Mt(i[0]).y),h=_e[e.arrowTypeStart],u=_e[e.arrowTypeEnd],p=1;if(o<u&&o>0&&n<u){let d=u+p-o;d*=s==="right"?-1:1,a-=d}if(c<h&&c>0&&l<h){let d=h+p-c;d*=s==="right"?-1:1,a+=d}return Mt(t).x+a},"x"),y:f(function(t,r,i){let a=0;const s=Mt(i[0]).y<Mt(i[i.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(_e,e.arrowTypeStart)){const{angle:d,deltaY:m}=Zi(i[0],i[1]);a=_e[e.arrowTypeStart]*Math.abs(Math.sin(d))*(m>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(_e,e.arrowTypeEnd)){const{angle:d,deltaY:m}=Zi(i[i.length-1],i[i.length-2]);a=_e[e.arrowTypeEnd]*Math.abs(Math.sin(d))*(m>=0?1:-1)}const o=Math.abs(Mt(t).y-Mt(i[i.length-1]).y),n=Math.abs(Mt(t).x-Mt(i[i.length-1]).x),c=Math.abs(Mt(t).y-Mt(i[0]).y),l=Math.abs(Mt(t).x-Mt(i[0]).x),h=_e[e.arrowTypeStart],u=_e[e.arrowTypeEnd],p=1;if(o<u&&o>0&&n<u){let d=u+p-o;d*=s==="up"?-1:1,a-=d}if(c<h&&c>0&&l<h){let d=h+p-c;d*=s==="up"?-1:1,a+=d}return Mt(t).y+a},"y")}),"getLineFunctionsWithOffset"),fl=f(({flowchart:e})=>{var a,s;const t=((a=e==null?void 0:e.subGraphTitleMargin)==null?void 0:a.top)??0,r=((s=e==null?void 0:e.subGraphTitleMargin)==null?void 0:s.bottom)??0,i=t+r;return{subGraphTitleTopMargin:t,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:i}},"getSubGraphTitleMargins");const Hx=Object.freeze({left:0,top:0,width:16,height:16}),Ts=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),pd=Object.freeze({...Hx,...Ts}),jx=Object.freeze({...pd,body:"",hidden:!1}),Yx=Object.freeze({width:null,height:null}),Ux=Object.freeze({...Yx,...Ts}),Gx=(e,t,r,i="")=>{const a=e.split(":");if(e.slice(0,1)==="@"){if(a.length<2||a.length>3)return null;i=a.shift().slice(1)}if(a.length>3||!a.length)return null;if(a.length>1){const n=a.pop(),c=a.pop(),l={provider:a.length>0?a[0]:i,prefix:c,name:n};return zn(l)?l:null}const s=a[0],o=s.split("-");if(o.length>1){const n={provider:i,prefix:o.shift(),name:o.join("-")};return zn(n)?n:null}if(r&&i===""){const n={provider:i,prefix:"",name:s};return zn(n,r)?n:null}return null},zn=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1;function Vx(e,t){const r={};!e.hFlip!=!t.hFlip&&(r.hFlip=!0),!e.vFlip!=!t.vFlip&&(r.vFlip=!0);const i=((e.rotate||0)+(t.rotate||0))%4;return i&&(r.rotate=i),r}function Pc(e,t){const r=Vx(e,t);for(const i in jx)i in Ts?i in e&&!(i in r)&&(r[i]=Ts[i]):i in t?r[i]=t[i]:i in e&&(r[i]=e[i]);return r}function Xx(e,t){const r=e.icons,i=e.aliases||Object.create(null),a=Object.create(null);function s(o){if(r[o])return a[o]=[];if(!(o in a)){a[o]=null;const n=i[o]&&i[o].parent,c=n&&s(n);c&&(a[o]=[n].concat(c))}return a[o]}return(t||Object.keys(r).concat(Object.keys(i))).forEach(s),a}function Nc(e,t,r){const i=e.icons,a=e.aliases||Object.create(null);let s={};function o(n){s=Pc(i[n]||a[n],s)}return o(t),r.forEach(o),Pc(e,s)}function Kx(e,t){if(e.icons[t])return Nc(e,t,[]);const r=Xx(e,[t])[t];return r?Nc(e,t,r):null}const Zx=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Qx=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function zc(e,t,r){if(t===1)return e;if(r=r||100,typeof e=="number")return Math.ceil(e*t*r)/r;if(typeof e!="string")return e;const i=e.split(Zx);if(i===null||!i.length)return e;const a=[];let s=i.shift(),o=Qx.test(s);for(;;){if(o){const n=parseFloat(s);isNaN(n)?a.push(s):a.push(Math.ceil(n*t*r)/r)}else a.push(s);if(s=i.shift(),s===void 0)return a.join("");o=!o}}function Jx(e,t="defs"){let r="";const i=e.indexOf("<"+t);for(;i>=0;){const a=e.indexOf(">",i),s=e.indexOf("</"+t);if(a===-1||s===-1)break;const o=e.indexOf(">",s);if(o===-1)break;r+=e.slice(a+1,s).trim(),e=e.slice(0,i).trim()+e.slice(o+1)}return{defs:r,content:e}}function t1(e,t){return e?"<defs>"+e+"</defs>"+t:t}function e1(e,t,r){const i=Jx(e);return t1(i.defs,t+i.content+r)}const r1=e=>e==="unset"||e==="undefined"||e==="none";function i1(e,t){const r={...pd,...e},i={...Ux,...t},a={left:r.left,top:r.top,width:r.width,height:r.height};let s=r.body;[r,i].forEach(g=>{const y=[],b=g.hFlip,x=g.vFlip;let k=g.rotate;b?x?k+=2:(y.push("translate("+(a.width+a.left).toString()+" "+(0-a.top).toString()+")"),y.push("scale(-1 1)"),a.top=a.left=0):x&&(y.push("translate("+(0-a.left).toString()+" "+(a.height+a.top).toString()+")"),y.push("scale(1 -1)"),a.top=a.left=0);let C;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:C=a.height/2+a.top,y.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:y.unshift("rotate(180 "+(a.width/2+a.left).toString()+" "+(a.height/2+a.top).toString()+")");break;case 3:C=a.width/2+a.left,y.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}k%2===1&&(a.left!==a.top&&(C=a.left,a.left=a.top,a.top=C),a.width!==a.height&&(C=a.width,a.width=a.height,a.height=C)),y.length&&(s=e1(s,'<g transform="'+y.join(" ")+'">',"</g>"))});const o=i.width,n=i.height,c=a.width,l=a.height;let h,u;o===null?(u=n===null?"1em":n==="auto"?l:n,h=zc(u,c/l)):(h=o==="auto"?c:o,u=n===null?zc(h,l/c):n==="auto"?l:n);const p={},d=(g,y)=>{r1(y)||(p[g]=y.toString())};d("width",h),d("height",u);const m=[a.left,a.top,c,l];return p.viewBox=m.join(" "),{attributes:p,viewBox:m,body:s}}const a1=/\sid="(\S+)"/g,s1="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let n1=0;function o1(e,t=s1){const r=[];let i;for(;i=a1.exec(e);)r.push(i[1]);if(!r.length)return e;const a="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(s=>{const o=typeof t=="function"?t(s):t+(n1++).toString(),n=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+n+')([")]|\\.[a-z])',"g"),"$1"+o+a+"$3")}),e=e.replace(new RegExp(a,"g"),""),e}function l1(e,t){let r=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in t)r+=" "+i+'="'+t[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+e+"</svg>"}var c1={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Co=new Map,dd=new Map,h1=f(e=>{for(const t of e){if(!t.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(O.debug("Registering icon pack:",t.name),"loader"in t)dd.set(t.name,t.loader);else if("icons"in t)Co.set(t.name,t.icons);else throw O.error("Invalid icon loader:",t),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),u1=f(async(e,t)=>{const r=Gx(e,!0,t!==void 0);if(!r)throw new Error(`Invalid icon name: ${e}`);const i=r.prefix||t;if(!i)throw new Error(`Icon name must contain a prefix: ${e}`);let a=Co.get(i);if(!a){const o=dd.get(i);if(!o)throw new Error(`Icon set not found: ${r.prefix}`);try{a={...await o(),prefix:i},Co.set(i,a)}catch(n){throw O.error(n),new Error(`Failed to load icon set: ${r.prefix}`)}}const s=Kx(a,r.name);if(!s)throw new Error(`Icon not found: ${e}`);return s},"getRegisteredIconData"),an=f(async(e,t)=>{let r;try{r=await u1(e,t==null?void 0:t.fallbackPrefix)}catch(s){O.error(s),r=c1}const i=i1(r,t);return l1(o1(i.body),i.attributes)},"getIconSVG"),qi={},Nt={},qc;function p1(){return qc||(qc=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.BLANK_URL=Nt.relativeFirstCharacters=Nt.whitespaceEscapeCharsRegex=Nt.urlSchemeRegex=Nt.ctrlCharactersRegex=Nt.htmlCtrlEntityRegex=Nt.htmlEntitiesRegex=Nt.invalidProtocolRegex=void 0,Nt.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Nt.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Nt.htmlCtrlEntityRegex=/&(newline|tab);/gi,Nt.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Nt.urlSchemeRegex=/^.+(:|&colon;)/gim,Nt.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Nt.relativeFirstCharacters=[".","/"],Nt.BLANK_URL="about:blank"),Nt}var Wc;function d1(){if(Wc)return qi;Wc=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.sanitizeUrl=void 0;var e=p1();function t(o){return e.relativeFirstCharacters.indexOf(o[0])>-1}function r(o){var n=o.replace(e.ctrlCharactersRegex,"");return n.replace(e.htmlEntitiesRegex,function(c,l){return String.fromCharCode(l)})}function i(o){return URL.canParse(o)}function a(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return e.BLANK_URL;var n,c=a(o.trim());do c=r(c).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim(),c=a(c),n=c.match(e.ctrlCharactersRegex)||c.match(e.htmlEntitiesRegex)||c.match(e.htmlCtrlEntityRegex)||c.match(e.whitespaceEscapeCharsRegex);while(n&&n.length>0);var l=c;if(!l)return e.BLANK_URL;if(t(l))return l;var h=l.trimStart(),u=h.match(e.urlSchemeRegex);if(!u)return l;var p=u[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(p))return e.BLANK_URL;var d=h.replace(/\\/g,"/");if(p==="mailto:"||p.includes("://"))return d;if(p==="http:"||p==="https:"){if(!i(d))return e.BLANK_URL;var m=new URL(d);return m.protocol=m.protocol.toLowerCase(),m.hostname=m.hostname.toLowerCase(),m.toString()}return d}return qi.sanitizeUrl=s,qi}var f1=d1(),m1={value:()=>{}};function fd(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new ns(r)}function ns(e){this._=e}function g1(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",a=r.indexOf(".");if(a>=0&&(i=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}ns.prototype=fd.prototype={constructor:ns,on:function(e,t){var r=this._,i=g1(e+"",r),a,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((a=(e=i[s]).type)&&(a=y1(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(a=(e=i[s]).type)r[a]=Hc(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Hc(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new ns(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,s;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,a=s.length;i<a;++i)s[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],a=0,s=i.length;a<s;++a)i[a].value.apply(t,r)}};function y1(e,t){for(var r=0,i=e.length,a;r<i;++r)if((a=e[r]).name===t)return a.value}function Hc(e,t,r){for(var i=0,a=e.length;i<a;++i)if(e[i].name===t){e[i]=m1,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}var So="http://www.w3.org/1999/xhtml";const jc={svg:"http://www.w3.org/2000/svg",xhtml:So,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sn(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),jc.hasOwnProperty(t)?{space:jc[t],local:e}:e}function b1(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===So&&t.documentElement.namespaceURI===So?t.createElement(e):t.createElementNS(r,e)}}function x1(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function md(e){var t=sn(e);return(t.local?x1:b1)(t)}function v1(){}function ml(e){return e==null?v1:function(){return this.querySelector(e)}}function k1(e){typeof e!="function"&&(e=ml(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,n=i[a]=new Array(o),c,l,h=0;h<o;++h)(c=s[h])&&(l=e.call(c,c.__data__,h,s))&&("__data__"in c&&(l.__data__=c.__data__),n[h]=l);return new ve(i,this._parents)}function _1(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function w1(){return[]}function gd(e){return e==null?w1:function(){return this.querySelectorAll(e)}}function C1(e){return function(){return _1(e.apply(this,arguments))}}function S1(e){typeof e=="function"?e=C1(e):e=gd(e);for(var t=this._groups,r=t.length,i=[],a=[],s=0;s<r;++s)for(var o=t[s],n=o.length,c,l=0;l<n;++l)(c=o[l])&&(i.push(e.call(c,c.__data__,l,o)),a.push(c));return new ve(i,a)}function yd(e){return function(){return this.matches(e)}}function bd(e){return function(t){return t.matches(e)}}var T1=Array.prototype.find;function B1(e){return function(){return T1.call(this.children,e)}}function E1(){return this.firstElementChild}function A1(e){return this.select(e==null?E1:B1(typeof e=="function"?e:bd(e)))}var L1=Array.prototype.filter;function M1(){return Array.from(this.children)}function F1(e){return function(){return L1.call(this.children,e)}}function D1(e){return this.selectAll(e==null?M1:F1(typeof e=="function"?e:bd(e)))}function $1(e){typeof e!="function"&&(e=yd(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,n=i[a]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&n.push(c);return new ve(i,this._parents)}function xd(e){return new Array(e.length)}function O1(){return new ve(this._enter||this._groups.map(xd),this._parents)}function Bs(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Bs.prototype={constructor:Bs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function R1(e){return function(){return e}}function I1(e,t,r,i,a,s){for(var o=0,n,c=t.length,l=s.length;o<l;++o)(n=t[o])?(n.__data__=s[o],i[o]=n):r[o]=new Bs(e,s[o]);for(;o<c;++o)(n=t[o])&&(a[o]=n)}function P1(e,t,r,i,a,s,o){var n,c,l=new Map,h=t.length,u=s.length,p=new Array(h),d;for(n=0;n<h;++n)(c=t[n])&&(p[n]=d=o.call(c,c.__data__,n,t)+"",l.has(d)?a[n]=c:l.set(d,c));for(n=0;n<u;++n)d=o.call(e,s[n],n,s)+"",(c=l.get(d))?(i[n]=c,c.__data__=s[n],l.delete(d)):r[n]=new Bs(e,s[n]);for(n=0;n<h;++n)(c=t[n])&&l.get(p[n])===c&&(a[n]=c)}function N1(e){return e.__data__}function z1(e,t){if(!arguments.length)return Array.from(this,N1);var r=t?P1:I1,i=this._parents,a=this._groups;typeof e!="function"&&(e=R1(e));for(var s=a.length,o=new Array(s),n=new Array(s),c=new Array(s),l=0;l<s;++l){var h=i[l],u=a[l],p=u.length,d=q1(e.call(h,h&&h.__data__,l,i)),m=d.length,g=n[l]=new Array(m),y=o[l]=new Array(m),b=c[l]=new Array(p);r(h,u,g,y,b,d,t);for(var x=0,k=0,C,S;x<m;++x)if(C=g[x]){for(x>=k&&(k=x+1);!(S=y[k])&&++k<m;);C._next=S||null}}return o=new ve(o,i),o._enter=n,o._exit=c,o}function q1(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function W1(){return new ve(this._exit||this._groups.map(xd),this._parents)}function H1(e,t,r){var i=this.enter(),a=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),i&&a?i.merge(a).order():a}function j1(e){for(var t=e.selection?e.selection():e,r=this._groups,i=t._groups,a=r.length,s=i.length,o=Math.min(a,s),n=new Array(a),c=0;c<o;++c)for(var l=r[c],h=i[c],u=l.length,p=n[c]=new Array(u),d,m=0;m<u;++m)(d=l[m]||h[m])&&(p[m]=d);for(;c<a;++c)n[c]=r[c];return new ve(n,this._parents)}function Y1(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i=e[t],a=i.length-1,s=i[a],o;--a>=0;)(o=i[a])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function U1(e){e||(e=G1);function t(u,p){return u&&p?e(u.__data__,p.__data__):!u-!p}for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s){for(var o=r[s],n=o.length,c=a[s]=new Array(n),l,h=0;h<n;++h)(l=o[h])&&(c[h]=l);c.sort(t)}return new ve(a,this._parents).order()}function G1(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function V1(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function X1(){return Array.from(this)}function K1(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],a=0,s=i.length;a<s;++a){var o=i[a];if(o)return o}return null}function Z1(){let e=0;for(const t of this)++e;return e}function Q1(){return!this.node()}function J1(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var a=t[r],s=0,o=a.length,n;s<o;++s)(n=a[s])&&e.call(n,n.__data__,s,a);return this}function t2(e){return function(){this.removeAttribute(e)}}function e2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function r2(e,t){return function(){this.setAttribute(e,t)}}function i2(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function a2(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function s2(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function n2(e,t){var r=sn(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?e2:t2:typeof t=="function"?r.local?s2:a2:r.local?i2:r2)(r,t))}function vd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function o2(e){return function(){this.style.removeProperty(e)}}function l2(e,t,r){return function(){this.style.setProperty(e,t,r)}}function c2(e,t,r){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function h2(e,t,r){return arguments.length>1?this.each((t==null?o2:typeof t=="function"?c2:l2)(e,t,r??"")):_i(this.node(),e)}function _i(e,t){return e.style.getPropertyValue(t)||vd(e).getComputedStyle(e,null).getPropertyValue(t)}function u2(e){return function(){delete this[e]}}function p2(e,t){return function(){this[e]=t}}function d2(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function f2(e,t){return arguments.length>1?this.each((t==null?u2:typeof t=="function"?d2:p2)(e,t)):this.node()[e]}function kd(e){return e.trim().split(/^|\s+/)}function gl(e){return e.classList||new _d(e)}function _d(e){this._node=e,this._names=kd(e.getAttribute("class")||"")}_d.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wd(e,t){for(var r=gl(e),i=-1,a=t.length;++i<a;)r.add(t[i])}function Cd(e,t){for(var r=gl(e),i=-1,a=t.length;++i<a;)r.remove(t[i])}function m2(e){return function(){wd(this,e)}}function g2(e){return function(){Cd(this,e)}}function y2(e,t){return function(){(t.apply(this,arguments)?wd:Cd)(this,e)}}function b2(e,t){var r=kd(e+"");if(arguments.length<2){for(var i=gl(this.node()),a=-1,s=r.length;++a<s;)if(!i.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?y2:t?m2:g2)(r,t))}function x2(){this.textContent=""}function v2(e){return function(){this.textContent=e}}function k2(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function _2(e){return arguments.length?this.each(e==null?x2:(typeof e=="function"?k2:v2)(e)):this.node().textContent}function w2(){this.innerHTML=""}function C2(e){return function(){this.innerHTML=e}}function S2(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function T2(e){return arguments.length?this.each(e==null?w2:(typeof e=="function"?S2:C2)(e)):this.node().innerHTML}function B2(){this.nextSibling&&this.parentNode.appendChild(this)}function E2(){return this.each(B2)}function A2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function L2(){return this.each(A2)}function M2(e){var t=typeof e=="function"?e:md(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function F2(){return null}function D2(e,t){var r=typeof e=="function"?e:md(e),i=t==null?F2:typeof t=="function"?t:ml(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function $2(){var e=this.parentNode;e&&e.removeChild(this)}function O2(){return this.each($2)}function R2(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function I2(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function P2(e){return this.select(e?I2:R2)}function N2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function z2(e){return function(t){e.call(this,t,this.__data__)}}function q2(e){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");return i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),{type:t,name:r}})}function W2(e){return function(){var t=this.__on;if(t){for(var r=0,i=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function H2(e,t,r){return function(){var i=this.__on,a,s=z2(t);if(i){for(var o=0,n=i.length;o<n;++o)if((a=i[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},i?i.push(a):this.__on=[a]}}function j2(e,t,r){var i=q2(e+""),a,s=i.length,o;if(arguments.length<2){var n=this.node().__on;if(n){for(var c=0,l=n.length,h;c<l;++c)for(a=0,h=n[c];a<s;++a)if((o=i[a]).type===h.type&&o.name===h.name)return h.value}return}for(n=t?H2:W2,a=0;a<s;++a)this.each(n(i[a],t,r));return this}function Sd(e,t,r){var i=vd(e),a=i.CustomEvent;typeof a=="function"?a=new a(t,r):(a=i.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function Y2(e,t){return function(){return Sd(this,e,t)}}function U2(e,t){return function(){return Sd(this,e,t.apply(this,arguments))}}function G2(e,t){return this.each((typeof t=="function"?U2:Y2)(e,t))}function*V2(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],a=0,s=i.length,o;a<s;++a)(o=i[a])&&(yield o)}var Td=[null];function ve(e,t){this._groups=e,this._parents=t}function Aa(){return new ve([[document.documentElement]],Td)}function X2(){return this}ve.prototype=Aa.prototype={constructor:ve,select:k1,selectAll:S1,selectChild:A1,selectChildren:D1,filter:$1,data:z1,enter:O1,exit:W1,join:H1,merge:j1,selection:X2,order:Y1,sort:U1,call:V1,nodes:X1,node:K1,size:Z1,empty:Q1,each:J1,attr:n2,style:h2,property:f2,classed:b2,text:_2,html:T2,raise:E2,lower:L2,append:M2,insert:D2,remove:O2,clone:P2,datum:N2,on:j2,dispatch:G2,[Symbol.iterator]:V2};function bt(e){return typeof e=="string"?new ve([[document.querySelector(e)]],[document.documentElement]):new ve([[e]],Td)}function yl(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Bd(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function La(){}var ga=.7,Es=1/ga,si="\\s*([+-]?\\d+)\\s*",ya="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",K2=/^#([0-9a-f]{3,8})$/,Z2=new RegExp(`^rgb\\(${si},${si},${si}\\)$`),Q2=new RegExp(`^rgb\\(${Ie},${Ie},${Ie}\\)$`),J2=new RegExp(`^rgba\\(${si},${si},${si},${ya}\\)$`),tv=new RegExp(`^rgba\\(${Ie},${Ie},${Ie},${ya}\\)$`),ev=new RegExp(`^hsl\\(${ya},${Ie},${Ie}\\)$`),rv=new RegExp(`^hsla\\(${ya},${Ie},${Ie},${ya}\\)$`),Yc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yl(La,ba,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Uc,formatHex:Uc,formatHex8:iv,formatHsl:av,formatRgb:Gc,toString:Gc});function Uc(){return this.rgb().formatHex()}function iv(){return this.rgb().formatHex8()}function av(){return Ed(this).formatHsl()}function Gc(){return this.rgb().formatRgb()}function ba(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=K2.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Vc(t):r===3?new ge(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ha(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ha(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Z2.exec(e))?new ge(t[1],t[2],t[3],1):(t=Q2.exec(e))?new ge(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=J2.exec(e))?Ha(t[1],t[2],t[3],t[4]):(t=tv.exec(e))?Ha(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ev.exec(e))?Zc(t[1],t[2]/100,t[3]/100,1):(t=rv.exec(e))?Zc(t[1],t[2]/100,t[3]/100,t[4]):Yc.hasOwnProperty(e)?Vc(Yc[e]):e==="transparent"?new ge(NaN,NaN,NaN,0):null}function Vc(e){return new ge(e>>16&255,e>>8&255,e&255,1)}function Ha(e,t,r,i){return i<=0&&(e=t=r=NaN),new ge(e,t,r,i)}function sv(e){return e instanceof La||(e=ba(e)),e?(e=e.rgb(),new ge(e.r,e.g,e.b,e.opacity)):new ge}function To(e,t,r,i){return arguments.length===1?sv(e):new ge(e,t,r,i??1)}function ge(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}yl(ge,To,Bd(La,{brighter(e){return e=e==null?Es:Math.pow(Es,e),new ge(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ga:Math.pow(ga,e),new ge(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ge(Dr(this.r),Dr(this.g),Dr(this.b),As(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xc,formatHex:Xc,formatHex8:nv,formatRgb:Kc,toString:Kc}));function Xc(){return`#${Lr(this.r)}${Lr(this.g)}${Lr(this.b)}`}function nv(){return`#${Lr(this.r)}${Lr(this.g)}${Lr(this.b)}${Lr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kc(){const e=As(this.opacity);return`${e===1?"rgb(":"rgba("}${Dr(this.r)}, ${Dr(this.g)}, ${Dr(this.b)}${e===1?")":`, ${e})`}`}function As(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lr(e){return e=Dr(e),(e<16?"0":"")+e.toString(16)}function Zc(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Te(e,t,r,i)}function Ed(e){if(e instanceof Te)return new Te(e.h,e.s,e.l,e.opacity);if(e instanceof La||(e=ba(e)),!e)return new Te;if(e instanceof Te)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),s=Math.max(t,r,i),o=NaN,n=s-a,c=(s+a)/2;return n?(t===s?o=(r-i)/n+(r<i)*6:r===s?o=(i-t)/n+2:o=(t-r)/n+4,n/=c<.5?s+a:2-s-a,o*=60):n=c>0&&c<1?0:o,new Te(o,n,c,e.opacity)}function ov(e,t,r,i){return arguments.length===1?Ed(e):new Te(e,t,r,i??1)}function Te(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}yl(Te,ov,Bd(La,{brighter(e){return e=e==null?Es:Math.pow(Es,e),new Te(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ga:Math.pow(ga,e),new Te(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,a=2*r-i;return new ge(qn(e>=240?e-240:e+120,a,i),qn(e,a,i),qn(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Te(Qc(this.h),ja(this.s),ja(this.l),As(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=As(this.opacity);return`${e===1?"hsl(":"hsla("}${Qc(this.h)}, ${ja(this.s)*100}%, ${ja(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qc(e){return e=(e||0)%360,e<0?e+360:e}function ja(e){return Math.max(0,Math.min(1,e||0))}function qn(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const bl=e=>()=>e;function Ad(e,t){return function(r){return e+r*t}}function lv(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function oL(e,t){var r=t-e;return r?Ad(e,r>180||r<-180?r-360*Math.round(r/360):r):bl(isNaN(e)?t:e)}function cv(e){return(e=+e)==1?Ld:function(t,r){return r-t?lv(t,r,e):bl(isNaN(t)?r:t)}}function Ld(e,t){var r=t-e;return r?Ad(e,r):bl(isNaN(e)?t:e)}const Jc=function e(t){var r=cv(t);function i(a,s){var o=r((a=To(a)).r,(s=To(s)).r),n=r(a.g,s.g),c=r(a.b,s.b),l=Ld(a.opacity,s.opacity);return function(h){return a.r=o(h),a.g=n(h),a.b=c(h),a.opacity=l(h),a+""}}return i.gamma=e,i}(1);function ur(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Bo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wn=new RegExp(Bo.source,"g");function hv(e){return function(){return e}}function uv(e){return function(t){return e(t)+""}}function pv(e,t){var r=Bo.lastIndex=Wn.lastIndex=0,i,a,s,o=-1,n=[],c=[];for(e=e+"",t=t+"";(i=Bo.exec(e))&&(a=Wn.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),n[o]?n[o]+=s:n[++o]=s),(i=i[0])===(a=a[0])?n[o]?n[o]+=a:n[++o]=a:(n[++o]=null,c.push({i:o,x:ur(i,a)})),r=Wn.lastIndex;return r<t.length&&(s=t.slice(r),n[o]?n[o]+=s:n[++o]=s),n.length<2?c[0]?uv(c[0].x):hv(t):(t=c.length,function(l){for(var h=0,u;h<t;++h)n[(u=c[h]).i]=u.x(l);return n.join("")})}var th=180/Math.PI,Eo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Md(e,t,r,i,a,s){var o,n,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*r+t*i)&&(r-=e*c,i-=t*c),(n=Math.sqrt(r*r+i*i))&&(r/=n,i/=n,c/=n),e*i<t*r&&(e=-e,t=-t,c=-c,o=-o),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*th,skewX:Math.atan(c)*th,scaleX:o,scaleY:n}}var Ya;function dv(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Eo:Md(t.a,t.b,t.c,t.d,t.e,t.f)}function fv(e){return e==null||(Ya||(Ya=document.createElementNS("http://www.w3.org/2000/svg","g")),Ya.setAttribute("transform",e),!(e=Ya.transform.baseVal.consolidate()))?Eo:(e=e.matrix,Md(e.a,e.b,e.c,e.d,e.e,e.f))}function Fd(e,t,r,i){function a(l){return l.length?l.pop()+" ":""}function s(l,h,u,p,d,m){if(l!==u||h!==p){var g=d.push("translate(",null,t,null,r);m.push({i:g-4,x:ur(l,u)},{i:g-2,x:ur(h,p)})}else(u||p)&&d.push("translate("+u+t+p+r)}function o(l,h,u,p){l!==h?(l-h>180?h+=360:h-l>180&&(l+=360),p.push({i:u.push(a(u)+"rotate(",null,i)-2,x:ur(l,h)})):h&&u.push(a(u)+"rotate("+h+i)}function n(l,h,u,p){l!==h?p.push({i:u.push(a(u)+"skewX(",null,i)-2,x:ur(l,h)}):h&&u.push(a(u)+"skewX("+h+i)}function c(l,h,u,p,d,m){if(l!==u||h!==p){var g=d.push(a(d)+"scale(",null,",",null,")");m.push({i:g-4,x:ur(l,u)},{i:g-2,x:ur(h,p)})}else(u!==1||p!==1)&&d.push(a(d)+"scale("+u+","+p+")")}return function(l,h){var u=[],p=[];return l=e(l),h=e(h),s(l.translateX,l.translateY,h.translateX,h.translateY,u,p),o(l.rotate,h.rotate,u,p),n(l.skewX,h.skewX,u,p),c(l.scaleX,l.scaleY,h.scaleX,h.scaleY,u,p),l=h=null,function(d){for(var m=-1,g=p.length,y;++m<g;)u[(y=p[m]).i]=y.x(d);return u.join("")}}}var mv=Fd(dv,"px, ","px)","deg)"),gv=Fd(fv,", ",")",")"),wi=0,Qi=0,Wi=0,Dd=1e3,Ls,Ji,Ms=0,Ir=0,nn=0,xa=typeof performance=="object"&&performance.now?performance:Date,$d=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xl(){return Ir||($d(yv),Ir=xa.now()+nn)}function yv(){Ir=0}function Fs(){this._call=this._time=this._next=null}Fs.prototype=Od.prototype={constructor:Fs,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?xl():+r)+(t==null?0:+t),!this._next&&Ji!==this&&(Ji?Ji._next=this:Ls=this,Ji=this),this._call=e,this._time=r,Ao()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ao())}};function Od(e,t,r){var i=new Fs;return i.restart(e,t,r),i}function bv(){xl(),++wi;for(var e=Ls,t;e;)(t=Ir-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wi}function eh(){Ir=(Ms=xa.now())+nn,wi=Qi=0;try{bv()}finally{wi=0,vv(),Ir=0}}function xv(){var e=xa.now(),t=e-Ms;t>Dd&&(nn-=t,Ms=e)}function vv(){for(var e,t=Ls,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Ls=r);Ji=e,Ao(i)}function Ao(e){if(!wi){Qi&&(Qi=clearTimeout(Qi));var t=e-Ir;t>24?(e<1/0&&(Qi=setTimeout(eh,e-xa.now()-nn)),Wi&&(Wi=clearInterval(Wi))):(Wi||(Ms=xa.now(),Wi=setInterval(xv,Dd)),wi=1,$d(eh))}}function rh(e,t,r){var i=new Fs;return t=t==null?0:+t,i.restart(a=>{i.stop(),e(a+t)},t,r),i}var kv=fd("start","end","cancel","interrupt"),_v=[],Rd=0,ih=1,Lo=2,os=3,ah=4,Mo=5,ls=6;function on(e,t,r,i,a,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;wv(e,r,{name:t,index:i,group:a,on:kv,tween:_v,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Rd})}function vl(e,t){var r=Ae(e,t);if(r.state>Rd)throw new Error("too late; already scheduled");return r}function ze(e,t){var r=Ae(e,t);if(r.state>os)throw new Error("too late; already running");return r}function Ae(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function wv(e,t,r){var i=e.__transition,a;i[t]=r,r.timer=Od(s,0,r.time);function s(l){r.state=ih,r.timer.restart(o,r.delay,r.time),r.delay<=l&&o(l-r.delay)}function o(l){var h,u,p,d;if(r.state!==ih)return c();for(h in i)if(d=i[h],d.name===r.name){if(d.state===os)return rh(o);d.state===ah?(d.state=ls,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[h]):+h<t&&(d.state=ls,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[h])}if(rh(function(){r.state===os&&(r.state=ah,r.timer.restart(n,r.delay,r.time),n(l))}),r.state=Lo,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Lo){for(r.state=os,a=new Array(p=r.tween.length),h=0,u=-1;h<p;++h)(d=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(a[++u]=d);a.length=u+1}}function n(l){for(var h=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(c),r.state=Mo,1),u=-1,p=a.length;++u<p;)a[u].call(e,h);r.state===Mo&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=ls,r.timer.stop(),delete i[t];for(var l in i)return;delete e.__transition}}function Cv(e,t){var r=e.__transition,i,a,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((i=r[o]).name!==t){s=!1;continue}a=i.state>Lo&&i.state<Mo,i.state=ls,i.timer.stop(),i.on.call(a?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[o]}s&&delete e.__transition}}function Sv(e){return this.each(function(){Cv(this,e)})}function Tv(e,t){var r,i;return function(){var a=ze(this,e),s=a.tween;if(s!==r){i=r=s;for(var o=0,n=i.length;o<n;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}a.tween=i}}function Bv(e,t,r){var i,a;if(typeof r!="function")throw new Error;return function(){var s=ze(this,e),o=s.tween;if(o!==i){a=(i=o).slice();for(var n={name:t,value:r},c=0,l=a.length;c<l;++c)if(a[c].name===t){a[c]=n;break}c===l&&a.push(n)}s.tween=a}}function Ev(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=Ae(this.node(),r).tween,a=0,s=i.length,o;a<s;++a)if((o=i[a]).name===e)return o.value;return null}return this.each((t==null?Tv:Bv)(r,e,t))}function kl(e,t,r){var i=e._id;return e.each(function(){var a=ze(this,i);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Ae(a,i).value[t]}}function Id(e,t){var r;return(typeof t=="number"?ur:t instanceof ba?Jc:(r=ba(t))?(t=r,Jc):pv)(e,t)}function Av(e){return function(){this.removeAttribute(e)}}function Lv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mv(e,t,r){var i,a=r+"",s;return function(){var o=this.getAttribute(e);return o===a?null:o===i?s:s=t(i=o,r)}}function Fv(e,t,r){var i,a=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===i?s:s=t(i=o,r)}}function Dv(e,t,r){var i,a,s;return function(){var o,n=r(this),c;return n==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=n+"",o===c?null:o===i&&c===a?s:(a=c,s=t(i=o,n)))}}function $v(e,t,r){var i,a,s;return function(){var o,n=r(this),c;return n==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=n+"",o===c?null:o===i&&c===a?s:(a=c,s=t(i=o,n)))}}function Ov(e,t){var r=sn(e),i=r==="transform"?gv:Id;return this.attrTween(e,typeof t=="function"?(r.local?$v:Dv)(r,i,kl(this,"attr."+e,t)):t==null?(r.local?Lv:Av)(r):(r.local?Fv:Mv)(r,i,t))}function Rv(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Iv(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Pv(e,t){var r,i;function a(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Iv(e,s)),r}return a._value=t,a}function Nv(e,t){var r,i;function a(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&Rv(e,s)),r}return a._value=t,a}function zv(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=sn(e);return this.tween(r,(i.local?Pv:Nv)(i,t))}function qv(e,t){return function(){vl(this,e).delay=+t.apply(this,arguments)}}function Wv(e,t){return t=+t,function(){vl(this,e).delay=t}}function Hv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qv:Wv)(t,e)):Ae(this.node(),t).delay}function jv(e,t){return function(){ze(this,e).duration=+t.apply(this,arguments)}}function Yv(e,t){return t=+t,function(){ze(this,e).duration=t}}function Uv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jv:Yv)(t,e)):Ae(this.node(),t).duration}function Gv(e,t){if(typeof t!="function")throw new Error;return function(){ze(this,e).ease=t}}function Vv(e){var t=this._id;return arguments.length?this.each(Gv(t,e)):Ae(this.node(),t).ease}function Xv(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;ze(this,e).ease=r}}function Kv(e){if(typeof e!="function")throw new Error;return this.each(Xv(this._id,e))}function Zv(e){typeof e!="function"&&(e=yd(e));for(var t=this._groups,r=t.length,i=new Array(r),a=0;a<r;++a)for(var s=t[a],o=s.length,n=i[a]=[],c,l=0;l<o;++l)(c=s[l])&&e.call(c,c.__data__,l,s)&&n.push(c);return new sr(i,this._parents,this._name,this._id)}function Qv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,a=r.length,s=Math.min(i,a),o=new Array(i),n=0;n<s;++n)for(var c=t[n],l=r[n],h=c.length,u=o[n]=new Array(h),p,d=0;d<h;++d)(p=c[d]||l[d])&&(u[d]=p);for(;n<i;++n)o[n]=t[n];return new sr(o,this._parents,this._name,this._id)}function Jv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function tk(e,t,r){var i,a,s=Jv(t)?vl:ze;return function(){var o=s(this,e),n=o.on;n!==i&&(a=(i=n).copy()).on(t,r),o.on=a}}function ek(e,t){var r=this._id;return arguments.length<2?Ae(this.node(),r).on.on(e):this.each(tk(r,e,t))}function rk(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function ik(){return this.on("end.remove",rk(this._id))}function ak(e){var t=this._name,r=this._id;typeof e!="function"&&(e=ml(e));for(var i=this._groups,a=i.length,s=new Array(a),o=0;o<a;++o)for(var n=i[o],c=n.length,l=s[o]=new Array(c),h,u,p=0;p<c;++p)(h=n[p])&&(u=e.call(h,h.__data__,p,n))&&("__data__"in h&&(u.__data__=h.__data__),l[p]=u,on(l[p],t,r,p,l,Ae(h,r)));return new sr(s,this._parents,t,r)}function sk(e){var t=this._name,r=this._id;typeof e!="function"&&(e=gd(e));for(var i=this._groups,a=i.length,s=[],o=[],n=0;n<a;++n)for(var c=i[n],l=c.length,h,u=0;u<l;++u)if(h=c[u]){for(var p=e.call(h,h.__data__,u,c),d,m=Ae(h,r),g=0,y=p.length;g<y;++g)(d=p[g])&&on(d,t,r,g,p,m);s.push(p),o.push(h)}return new sr(s,o,t,r)}var nk=Aa.prototype.constructor;function ok(){return new nk(this._groups,this._parents)}function lk(e,t){var r,i,a;return function(){var s=_i(this,e),o=(this.style.removeProperty(e),_i(this,e));return s===o?null:s===r&&o===i?a:a=t(r=s,i=o)}}function Pd(e){return function(){this.style.removeProperty(e)}}function ck(e,t,r){var i,a=r+"",s;return function(){var o=_i(this,e);return o===a?null:o===i?s:s=t(i=o,r)}}function hk(e,t,r){var i,a,s;return function(){var o=_i(this,e),n=r(this),c=n+"";return n==null&&(c=n=(this.style.removeProperty(e),_i(this,e))),o===c?null:o===i&&c===a?s:(a=c,s=t(i=o,n))}}function uk(e,t){var r,i,a,s="style."+t,o="end."+s,n;return function(){var c=ze(this,e),l=c.on,h=c.value[s]==null?n||(n=Pd(t)):void 0;(l!==r||a!==h)&&(i=(r=l).copy()).on(o,a=h),c.on=i}}function pk(e,t,r){var i=(e+="")=="transform"?mv:Id;return t==null?this.styleTween(e,lk(e,i)).on("end.style."+e,Pd(e)):typeof t=="function"?this.styleTween(e,hk(e,i,kl(this,"style."+e,t))).each(uk(this._id,e)):this.styleTween(e,ck(e,i,t),r).on("end.style."+e,null)}function dk(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function fk(e,t,r){var i,a;function s(){var o=t.apply(this,arguments);return o!==a&&(i=(a=o)&&dk(e,o,r)),i}return s._value=t,s}function mk(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,fk(e,t,r??""))}function gk(e){return function(){this.textContent=e}}function yk(e){return function(){var t=e(this);this.textContent=t??""}}function bk(e){return this.tween("text",typeof e=="function"?yk(kl(this,"text",e)):gk(e==null?"":e+""))}function xk(e){return function(t){this.textContent=e.call(this,t)}}function vk(e){var t,r;function i(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&xk(a)),t}return i._value=e,i}function kk(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vk(e))}function _k(){for(var e=this._name,t=this._id,r=Nd(),i=this._groups,a=i.length,s=0;s<a;++s)for(var o=i[s],n=o.length,c,l=0;l<n;++l)if(c=o[l]){var h=Ae(c,t);on(c,e,r,l,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new sr(i,this._parents,e,r)}function wk(){var e,t,r=this,i=r._id,a=r.size();return new Promise(function(s,o){var n={value:o},c={value:function(){--a===0&&s()}};r.each(function(){var l=ze(this,i),h=l.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(n),t._.interrupt.push(n),t._.end.push(c)),l.on=t}),a===0&&s()})}var Ck=0;function sr(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function Nd(){return++Ck}var Ve=Aa.prototype;sr.prototype={constructor:sr,select:ak,selectAll:sk,selectChild:Ve.selectChild,selectChildren:Ve.selectChildren,filter:Zv,merge:Qv,selection:ok,transition:_k,call:Ve.call,nodes:Ve.nodes,node:Ve.node,size:Ve.size,empty:Ve.empty,each:Ve.each,on:ek,attr:Ov,attrTween:zv,style:pk,styleTween:mk,text:bk,textTween:kk,remove:ik,tween:Ev,delay:Hv,duration:Uv,ease:Vv,easeVarying:Kv,end:wk,[Symbol.iterator]:Ve[Symbol.iterator]};function Sk(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Tk={time:null,delay:0,duration:250,ease:Sk};function Bk(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Ek(e){var t,r;e instanceof sr?(t=e._id,e=e._name):(t=Nd(),(r=Tk).time=xl(),e=e==null?null:e+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var o=i[s],n=o.length,c,l=0;l<n;++l)(c=o[l])&&on(c,e,t,l,o,r||Bk(c,t));return new sr(i,this._parents,e,t)}Aa.prototype.interrupt=Sv;Aa.prototype.transition=Ek;const Fo=Math.PI,Do=2*Fo,Cr=1e-6,Ak=Do-Cr;function zd(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Lk(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zd;const r=10**t;return function(i){this._+=i[0];for(let a=1,s=i.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+i[a]}}class Mk{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zd:Lk(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,i,a){this._append`Q${+t},${+r},${this._x1=+i},${this._y1=+a}`}bezierCurveTo(t,r,i,a,s,o){this._append`C${+t},${+r},${+i},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,i,a,s){if(t=+t,r=+r,i=+i,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,n=this._y1,c=i-t,l=a-r,h=o-t,u=n-r,p=h*h+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Cr)if(!(Math.abs(u*c-l*h)>Cr)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let d=i-o,m=a-n,g=c*c+l*l,y=d*d+m*m,b=Math.sqrt(g),x=Math.sqrt(p),k=s*Math.tan((Fo-Math.acos((g+p-y)/(2*b*x)))/2),C=k/x,S=k/b;Math.abs(C-1)>Cr&&this._append`L${t+C*h},${r+C*u}`,this._append`A${s},${s},0,0,${+(u*d>h*m)},${this._x1=t+S*c},${this._y1=r+S*l}`}}arc(t,r,i,a,s,o){if(t=+t,r=+r,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let n=i*Math.cos(a),c=i*Math.sin(a),l=t+n,h=r+c,u=1^o,p=o?a-s:s-a;this._x1===null?this._append`M${l},${h}`:(Math.abs(this._x1-l)>Cr||Math.abs(this._y1-h)>Cr)&&this._append`L${l},${h}`,i&&(p<0&&(p=p%Do+Do),p>Ak?this._append`A${i},${i},0,1,${u},${t-n},${r-c}A${i},${i},0,1,${u},${this._x1=l},${this._y1=h}`:p>Cr&&this._append`A${i},${i},0,${+(p>=Fo)},${u},${this._x1=t+i*Math.cos(s)},${this._y1=r+i*Math.sin(s)}`)}rect(t,r,i,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${i=+i}v${+a}h${-i}Z`}toString(){return this._}}function Zr(e){return function(){return e}}const lL=Math.abs,cL=Math.atan2,hL=Math.cos,uL=Math.max,pL=Math.min,dL=Math.sin,fL=Math.sqrt,sh=1e-12,_l=Math.PI,nh=_l/2,mL=2*_l;function gL(e){return e>1?0:e<-1?_l:Math.acos(e)}function yL(e){return e>=1?nh:e<=-1?-nh:Math.asin(e)}function Fk(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);t=i}return e},()=>new Mk(t)}function Dk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qd(e){this._context=e}qd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ds(e){return new qd(e)}function $k(e){return e[0]}function Ok(e){return e[1]}function Rk(e,t){var r=Zr(!0),i=null,a=Ds,s=null,o=Fk(n);e=typeof e=="function"?e:e===void 0?$k:Zr(e),t=typeof t=="function"?t:t===void 0?Ok:Zr(t);function n(c){var l,h=(c=Dk(c)).length,u,p=!1,d;for(i==null&&(s=a(d=o())),l=0;l<=h;++l)!(l<h&&r(u=c[l],l,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+e(u,l,c),+t(u,l,c));if(d)return s=null,d+""||null}return n.x=function(c){return arguments.length?(e=typeof c=="function"?c:Zr(+c),n):e},n.y=function(c){return arguments.length?(t=typeof c=="function"?c:Zr(+c),n):t},n.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Zr(!!c),n):r},n.curve=function(c){return arguments.length?(a=c,i!=null&&(s=a(i)),n):a},n.context=function(c){return arguments.length?(c==null?i=s=null:s=a(i=c),n):i},n}class Wd{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Hd(e){return new Wd(e,!0)}function jd(e){return new Wd(e,!1)}function mr(){}function $s(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ln(e){this._context=e}ln.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$s(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$s(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cs(e){return new ln(e)}function Yd(e){this._context=e}Yd.prototype={areaStart:mr,areaEnd:mr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:$s(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ik(e){return new Yd(e)}function Ud(e){this._context=e}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:$s(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Pk(e){return new Ud(e)}function Gd(e,t){this._basis=new ln(e),this._beta=t}Gd.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var i=e[0],a=t[0],s=e[r]-i,o=t[r]-a,n=-1,c;++n<=r;)c=n/r,this._basis.point(this._beta*e[n]+(1-this._beta)*(i+c*s),this._beta*t[n]+(1-this._beta)*(a+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Nk=function e(t){function r(i){return t===1?new ln(i):new Gd(i,t)}return r.beta=function(i){return e(+i)},r}(.85);function Os(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function wl(e,t){this._context=e,this._k=(1-t)/6}wl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Os(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Os(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vd=function e(t){function r(i){return new wl(i,t)}return r.tension=function(i){return e(+i)},r}(0);function Cl(e,t){this._context=e,this._k=(1-t)/6}Cl.prototype={areaStart:mr,areaEnd:mr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Os(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zk=function e(t){function r(i){return new Cl(i,t)}return r.tension=function(i){return e(+i)},r}(0);function Sl(e,t){this._context=e,this._k=(1-t)/6}Sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Os(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qk=function e(t){function r(i){return new Sl(i,t)}return r.tension=function(i){return e(+i)},r}(0);function Tl(e,t,r){var i=e._x1,a=e._y1,s=e._x2,o=e._y2;if(e._l01_a>sh){var n=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*n-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,a=(a*n-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>sh){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/h,o=(o*l+e._y1*e._l23_2a-r*e._l12_2a)/h}e._context.bezierCurveTo(i,a,s,o,e._x2,e._y2)}function Xd(e,t){this._context=e,this._alpha=t}Xd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Tl(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Kd=function e(t){function r(i){return t?new Xd(i,t):new wl(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function Zd(e,t){this._context=e,this._alpha=t}Zd.prototype={areaStart:mr,areaEnd:mr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Tl(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wk=function e(t){function r(i){return t?new Zd(i,t):new Cl(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function Qd(e,t){this._context=e,this._alpha=t}Qd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Tl(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hk=function e(t){function r(i){return t?new Qd(i,t):new Sl(i,0)}return r.alpha=function(i){return e(+i)},r}(.5);function Jd(e){this._context=e}Jd.prototype={areaStart:mr,areaEnd:mr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function jk(e){return new Jd(e)}function oh(e){return e<0?-1:1}function lh(e,t,r){var i=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(i||a<0&&-0),o=(r-e._y1)/(a||i<0&&-0),n=(s*a+o*i)/(i+a);return(oh(s)+oh(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(n))||0}function ch(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Hn(e,t,r){var i=e._x0,a=e._y0,s=e._x1,o=e._y1,n=(s-i)/3;e._context.bezierCurveTo(i+n,a+n*t,s-n,o-n*r,s,o)}function Rs(e){this._context=e}Rs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hn(this,this._t0,ch(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hn(this,ch(this,r=lh(this,e,t)),r);break;default:Hn(this,this._t0,r=lh(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function tf(e){this._context=new ef(e)}(tf.prototype=Object.create(Rs.prototype)).point=function(e,t){Rs.prototype.point.call(this,t,e)};function ef(e){this._context=e}ef.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,a,s){this._context.bezierCurveTo(t,e,i,r,s,a)}};function rf(e){return new Rs(e)}function af(e){return new tf(e)}function sf(e){this._context=e}sf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=hh(e),a=hh(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(i[0][s],a[0][s],i[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function hh(e){var t,r=e.length-1,i,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=a[t]/s[t-1],s[t]-=i,o[t]-=i*o[t-1];for(a[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function nf(e){return new sf(e)}function cn(e,t){this._context=e,this._t=t}cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function of(e){return new cn(e,.5)}function lf(e){return new cn(e,0)}function cf(e){return new cn(e,1)}function ta(e,t,r){this.k=e,this.x=t,this.y=r}ta.prototype={constructor:ta,scale:function(e){return e===1?this:new ta(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ta(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ta.prototype;var hf=typeof global=="object"&&global&&global.Object===Object&&global,Yk=typeof self=="object"&&self&&self.Object===Object&&self,qe=hf||Yk||Function("return this")(),Is=qe.Symbol,uf=Object.prototype,Uk=uf.hasOwnProperty,Gk=uf.toString,Hi=Is?Is.toStringTag:void 0;function Vk(e){var t=Uk.call(e,Hi),r=e[Hi];try{e[Hi]=void 0;var i=!0}catch{}var a=Gk.call(e);return i&&(t?e[Hi]=r:delete e[Hi]),a}var Xk=Object.prototype,Kk=Xk.toString;function Zk(e){return Kk.call(e)}var Qk="[object Null]",Jk="[object Undefined]",uh=Is?Is.toStringTag:void 0;function Bi(e){return e==null?e===void 0?Jk:Qk:uh&&uh in Object(e)?Vk(e):Zk(e)}function qr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var t_="[object AsyncFunction]",e_="[object Function]",r_="[object GeneratorFunction]",i_="[object Proxy]";function Bl(e){if(!qr(e))return!1;var t=Bi(e);return t==e_||t==r_||t==t_||t==i_}var jn=qe["__core-js_shared__"],ph=function(){var e=/[^.]+$/.exec(jn&&jn.keys&&jn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function a_(e){return!!ph&&ph in e}var s_=Function.prototype,n_=s_.toString;function Wr(e){if(e!=null){try{return n_.call(e)}catch{}try{return e+""}catch{}}return""}var o_=/[\\^$.*+?()[\]{}|]/g,l_=/^\[object .+?Constructor\]$/,c_=Function.prototype,h_=Object.prototype,u_=c_.toString,p_=h_.hasOwnProperty,d_=RegExp("^"+u_.call(p_).replace(o_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f_(e){if(!qr(e)||a_(e))return!1;var t=Bl(e)?d_:l_;return t.test(Wr(e))}function m_(e,t){return e==null?void 0:e[t]}function Hr(e,t){var r=m_(e,t);return f_(r)?r:void 0}var va=Hr(Object,"create");function g_(){this.__data__=va?va(null):{},this.size=0}function y_(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var b_="__lodash_hash_undefined__",x_=Object.prototype,v_=x_.hasOwnProperty;function k_(e){var t=this.__data__;if(va){var r=t[e];return r===b_?void 0:r}return v_.call(t,e)?t[e]:void 0}var __=Object.prototype,w_=__.hasOwnProperty;function C_(e){var t=this.__data__;return va?t[e]!==void 0:w_.call(t,e)}var S_="__lodash_hash_undefined__";function T_(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=va&&t===void 0?S_:t,this}function Pr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Pr.prototype.clear=g_;Pr.prototype.delete=y_;Pr.prototype.get=k_;Pr.prototype.has=C_;Pr.prototype.set=T_;function B_(){this.__data__=[],this.size=0}function hn(e,t){return e===t||e!==e&&t!==t}function un(e,t){for(var r=e.length;r--;)if(hn(e[r][0],t))return r;return-1}var E_=Array.prototype,A_=E_.splice;function L_(e){var t=this.__data__,r=un(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():A_.call(t,r,1),--this.size,!0}function M_(e){var t=this.__data__,r=un(t,e);return r<0?void 0:t[r][1]}function F_(e){return un(this.__data__,e)>-1}function D_(e,t){var r=this.__data__,i=un(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}function or(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}or.prototype.clear=B_;or.prototype.delete=L_;or.prototype.get=M_;or.prototype.has=F_;or.prototype.set=D_;var ka=Hr(qe,"Map");function $_(){this.size=0,this.__data__={hash:new Pr,map:new(ka||or),string:new Pr}}function O_(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function pn(e,t){var r=e.__data__;return O_(t)?r[typeof t=="string"?"string":"hash"]:r.map}function R_(e){var t=pn(this,e).delete(e);return this.size-=t?1:0,t}function I_(e){return pn(this,e).get(e)}function P_(e){return pn(this,e).has(e)}function N_(e,t){var r=pn(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}function br(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}br.prototype.clear=$_;br.prototype.delete=R_;br.prototype.get=I_;br.prototype.has=P_;br.prototype.set=N_;var z_="Expected a function";function Ma(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(z_);var r=function(){var i=arguments,a=t?t.apply(this,i):i[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,i);return r.cache=s.set(a,o)||s,o};return r.cache=new(Ma.Cache||br),r}Ma.Cache=br;function q_(){this.__data__=new or,this.size=0}function W_(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function H_(e){return this.__data__.get(e)}function j_(e){return this.__data__.has(e)}var Y_=200;function U_(e,t){var r=this.__data__;if(r instanceof or){var i=r.__data__;if(!ka||i.length<Y_-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new br(i)}return r.set(e,t),this.size=r.size,this}function Ei(e){var t=this.__data__=new or(e);this.size=t.size}Ei.prototype.clear=q_;Ei.prototype.delete=W_;Ei.prototype.get=H_;Ei.prototype.has=j_;Ei.prototype.set=U_;var Ps=function(){try{var e=Hr(Object,"defineProperty");return e({},"",{}),e}catch{}}();function El(e,t,r){t=="__proto__"&&Ps?Ps(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function $o(e,t,r){(r!==void 0&&!hn(e[t],r)||r===void 0&&!(t in e))&&El(e,t,r)}function G_(e){return function(t,r,i){for(var a=-1,s=Object(t),o=i(t),n=o.length;n--;){var c=o[++a];if(r(s[c],c,s)===!1)break}return t}}var V_=G_(),pf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dh=pf&&typeof module=="object"&&module&&!module.nodeType&&module,X_=dh&&dh.exports===pf,fh=X_?qe.Buffer:void 0,mh=fh?fh.allocUnsafe:void 0;function K_(e,t){if(t)return e.slice();var r=e.length,i=mh?mh(r):new e.constructor(r);return e.copy(i),i}var gh=qe.Uint8Array;function Z_(e){var t=new e.constructor(e.byteLength);return new gh(t).set(new gh(e)),t}function Q_(e,t){var r=t?Z_(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function J_(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var yh=Object.create,tw=function(){function e(){}return function(t){if(!qr(t))return{};if(yh)return yh(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function df(e,t){return function(r){return e(t(r))}}var ff=df(Object.getPrototypeOf,Object),ew=Object.prototype;function dn(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ew;return e===r}function rw(e){return typeof e.constructor=="function"&&!dn(e)?tw(ff(e)):{}}function Fa(e){return e!=null&&typeof e=="object"}var iw="[object Arguments]";function bh(e){return Fa(e)&&Bi(e)==iw}var mf=Object.prototype,aw=mf.hasOwnProperty,sw=mf.propertyIsEnumerable,Ns=bh(function(){return arguments}())?bh:function(e){return Fa(e)&&aw.call(e,"callee")&&!sw.call(e,"callee")},zs=Array.isArray,nw=9007199254740991;function gf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=nw}function fn(e){return e!=null&&gf(e.length)&&!Bl(e)}function ow(e){return Fa(e)&&fn(e)}function lw(){return!1}var yf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xh=yf&&typeof module=="object"&&module&&!module.nodeType&&module,cw=xh&&xh.exports===yf,vh=cw?qe.Buffer:void 0,hw=vh?vh.isBuffer:void 0,Al=hw||lw,uw="[object Object]",pw=Function.prototype,dw=Object.prototype,bf=pw.toString,fw=dw.hasOwnProperty,mw=bf.call(Object);function gw(e){if(!Fa(e)||Bi(e)!=uw)return!1;var t=ff(e);if(t===null)return!0;var r=fw.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&bf.call(r)==mw}var yw="[object Arguments]",bw="[object Array]",xw="[object Boolean]",vw="[object Date]",kw="[object Error]",_w="[object Function]",ww="[object Map]",Cw="[object Number]",Sw="[object Object]",Tw="[object RegExp]",Bw="[object Set]",Ew="[object String]",Aw="[object WeakMap]",Lw="[object ArrayBuffer]",Mw="[object DataView]",Fw="[object Float32Array]",Dw="[object Float64Array]",$w="[object Int8Array]",Ow="[object Int16Array]",Rw="[object Int32Array]",Iw="[object Uint8Array]",Pw="[object Uint8ClampedArray]",Nw="[object Uint16Array]",zw="[object Uint32Array]",At={};At[Fw]=At[Dw]=At[$w]=At[Ow]=At[Rw]=At[Iw]=At[Pw]=At[Nw]=At[zw]=!0;At[yw]=At[bw]=At[Lw]=At[xw]=At[Mw]=At[vw]=At[kw]=At[_w]=At[ww]=At[Cw]=At[Sw]=At[Tw]=At[Bw]=At[Ew]=At[Aw]=!1;function qw(e){return Fa(e)&&gf(e.length)&&!!At[Bi(e)]}function Ww(e){return function(t){return e(t)}}var xf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,oa=xf&&typeof module=="object"&&module&&!module.nodeType&&module,Hw=oa&&oa.exports===xf,Yn=Hw&&hf.process,kh=function(){try{var e=oa&&oa.require&&oa.require("util").types;return e||Yn&&Yn.binding&&Yn.binding("util")}catch{}}(),_h=kh&&kh.isTypedArray,Ll=_h?Ww(_h):qw;function Oo(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var jw=Object.prototype,Yw=jw.hasOwnProperty;function Uw(e,t,r){var i=e[t];(!(Yw.call(e,t)&&hn(i,r))||r===void 0&&!(t in e))&&El(e,t,r)}function Gw(e,t,r,i){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var n=t[s],c=void 0;c===void 0&&(c=e[n]),a?El(r,n,c):Uw(r,n,c)}return r}function Vw(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Xw=9007199254740991,Kw=/^(?:0|[1-9]\d*)$/;function vf(e,t){var r=typeof e;return t=t??Xw,!!t&&(r=="number"||r!="symbol"&&Kw.test(e))&&e>-1&&e%1==0&&e<t}var Zw=Object.prototype,Qw=Zw.hasOwnProperty;function Jw(e,t){var r=zs(e),i=!r&&Ns(e),a=!r&&!i&&Al(e),s=!r&&!i&&!a&&Ll(e),o=r||i||a||s,n=o?Vw(e.length,String):[],c=n.length;for(var l in e)(t||Qw.call(e,l))&&!(o&&(l=="length"||a&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||vf(l,c)))&&n.push(l);return n}function tC(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var eC=Object.prototype,rC=eC.hasOwnProperty;function iC(e){if(!qr(e))return tC(e);var t=dn(e),r=[];for(var i in e)i=="constructor"&&(t||!rC.call(e,i))||r.push(i);return r}function kf(e){return fn(e)?Jw(e,!0):iC(e)}function aC(e){return Gw(e,kf(e))}function sC(e,t,r,i,a,s,o){var n=Oo(e,r),c=Oo(t,r),l=o.get(c);if(l){$o(e,r,l);return}var h=s?s(n,c,r+"",e,t,o):void 0,u=h===void 0;if(u){var p=zs(c),d=!p&&Al(c),m=!p&&!d&&Ll(c);h=c,p||d||m?zs(n)?h=n:ow(n)?h=J_(n):d?(u=!1,h=K_(c,!0)):m?(u=!1,h=Q_(c,!0)):h=[]:gw(c)||Ns(c)?(h=n,Ns(n)?h=aC(n):(!qr(n)||Bl(n))&&(h=rw(c))):u=!1}u&&(o.set(c,h),a(h,c,i,s,o),o.delete(c)),$o(e,r,h)}function _f(e,t,r,i,a){e!==t&&V_(t,function(s,o){if(a||(a=new Ei),qr(s))sC(e,t,o,r,_f,i,a);else{var n=i?i(Oo(e,o),s,o+"",e,t,a):void 0;n===void 0&&(n=s),$o(e,o,n)}},kf)}function wf(e){return e}function nC(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var wh=Math.max;function oC(e,t,r){return t=wh(t===void 0?e.length-1:t,0),function(){for(var i=arguments,a=-1,s=wh(i.length-t,0),o=Array(s);++a<s;)o[a]=i[t+a];a=-1;for(var n=Array(t+1);++a<t;)n[a]=i[a];return n[t]=r(o),nC(e,this,n)}}function lC(e){return function(){return e}}var cC=Ps?function(e,t){return Ps(e,"toString",{configurable:!0,enumerable:!1,value:lC(t),writable:!0})}:wf,hC=800,uC=16,pC=Date.now;function dC(e){var t=0,r=0;return function(){var i=pC(),a=uC-(i-r);if(r=i,a>0){if(++t>=hC)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var fC=dC(cC);function mC(e,t){return fC(oC(e,t,wf),e+"")}function gC(e,t,r){if(!qr(r))return!1;var i=typeof t;return(i=="number"?fn(r)&&vf(t,r.length):i=="string"&&t in r)?hn(r[t],e):!1}function yC(e){return mC(function(t,r){var i=-1,a=r.length,s=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(a--,s):void 0,o&&gC(r[0],r[1],o)&&(s=a<3?void 0:s,a=1),t=Object(t);++i<a;){var n=r[i];n&&e(t,n,i,s)}return t})}var bC=yC(function(e,t,r){_f(e,t,r)}),xC="​",vC={curveBasis:cs,curveBasisClosed:Ik,curveBasisOpen:Pk,curveBumpX:Hd,curveBumpY:jd,curveBundle:Nk,curveCardinalClosed:zk,curveCardinalOpen:qk,curveCardinal:Vd,curveCatmullRomClosed:Wk,curveCatmullRomOpen:Hk,curveCatmullRom:Kd,curveLinear:Ds,curveLinearClosed:jk,curveMonotoneX:rf,curveMonotoneY:af,curveNatural:nf,curveStep:of,curveStepAfter:cf,curveStepBefore:lf},kC=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,_C=f(function(e,t){const r=Cf(e,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(r)){const o=r.map(n=>n.args);gs(o),i=Vt(i,[...o])}else i=r.args;if(!i)return;let a=tl(e,t);const s="config";return i[s]!==void 0&&(a==="flowchart-v2"&&(a="flowchart"),i[a]=i[s],delete i[s]),i},"detectInit"),Cf=f(function(e,t=null){var r,i;try{const a=new RegExp(`[%]{2}(?![{]${kC.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(a,"").replace(/'/gm,'"'),O.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let s;const o=[];for(;(s=sa.exec(e))!==null;)if(s.index===sa.lastIndex&&sa.lastIndex++,s&&!t||t&&((r=s[1])!=null&&r.match(t))||t&&((i=s[2])!=null&&i.match(t))){const n=s[1]?s[1]:s[2],c=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;o.push({type:n,args:c})}return o.length===0?{type:e,args:null}:o.length===1?o[0]:o}catch(a){return O.error(`ERROR: ${a.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},"detectDirective"),wC=f(function(e){return e.replace(sa,"")},"removeDirectives"),CC=f(function(e,t){for(const[r,i]of t.entries())if(i.match(e))return r;return-1},"isSubstringInArray");function Ml(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return vC[r]??t}f(Ml,"interpolateToCurve");function Sf(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?f1.sanitizeUrl(r):r}f(Sf,"formatUrl");var SC=f((e,...t)=>{const r=e.split("."),i=r.length-1,a=r[i];let s=window;for(let o=0;o<i;o++)if(s=s[r[o]],!s){O.error(`Function name: ${e} not found in window`);return}s[a](...t)},"runFunc");function Fl(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}f(Fl,"distance");function Tf(e){let t,r=0;e.forEach(a=>{r+=Fl(a,t),t=a});const i=r/2;return Dl(e,i)}f(Tf,"traverseEdge");function Bf(e){return e.length===1?e[0]:Tf(e)}f(Bf,"calcLabelPosition");var Ch=f((e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},"roundNumber"),Dl=f((e,t)=>{let r,i=t;for(const a of e){if(r){const s=Fl(a,r);if(s===0)return r;if(s<i)i-=s;else{const o=i/s;if(o<=0)return r;if(o>=1)return{x:a.x,y:a.y};if(o>0&&o<1)return{x:Ch((1-o)*r.x+o*a.x,5),y:Ch((1-o)*r.y+o*a.y,5)}}}r=a}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),TC=f((e,t,r)=>{O.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const a=Dl(t,25),s=e?10:5,o=Math.atan2(t[0].y-a.y,t[0].x-a.x),n={x:0,y:0};return n.x=Math.sin(o)*s+(t[0].x+a.x)/2,n.y=-Math.cos(o)*s+(t[0].y+a.y)/2,n},"calcCardinalityPosition");function Ef(e,t,r){const i=structuredClone(r);O.info("our points",i),t!=="start_left"&&t!=="start_right"&&i.reverse();const a=25+e,s=Dl(i,a),o=10+e*.5,n=Math.atan2(i[0].y-s.y,i[0].x-s.x),c={x:0,y:0};return t==="start_left"?(c.x=Math.sin(n+Math.PI)*o+(i[0].x+s.x)/2,c.y=-Math.cos(n+Math.PI)*o+(i[0].y+s.y)/2):t==="end_right"?(c.x=Math.sin(n-Math.PI)*o+(i[0].x+s.x)/2-5,c.y=-Math.cos(n-Math.PI)*o+(i[0].y+s.y)/2-5):t==="end_left"?(c.x=Math.sin(n)*o+(i[0].x+s.x)/2-5,c.y=-Math.cos(n)*o+(i[0].y+s.y)/2-5):(c.x=Math.sin(n)*o+(i[0].x+s.x)/2,c.y=-Math.cos(n)*o+(i[0].y+s.y)/2),c}f(Ef,"calcTerminalLabelPosition");function Af(e){let t="",r="";for(const i of e)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":t=t+i+";");return{style:t,labelStyle:r}}f(Af,"getStylesFromArray");var Sh=0,BC=f(()=>(Sh++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Sh),"generateId");function Lf(e){let t="";const r="0123456789abcdef",i=r.length;for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*i));return t}f(Lf,"makeRandomHex");var EC=f(e=>Lf(e.length),"random"),AC=f(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),LC=f(function(e,t){const r=t.text.replace(Ti.lineBreakRegex," "),[,i]=mn(t.fontSize),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.style("text-anchor",t.anchor),a.style("font-family",t.fontFamily),a.style("font-size",i),a.style("font-weight",t.fontWeight),a.attr("fill",t.fill),t.class!==void 0&&a.attr("class",t.class);const s=a.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.attr("fill",t.fill),s.text(r),a},"drawSimpleText"),MC=Ma((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Ti.lineBreakRegex.test(e)))return e;const i=e.split(" ").filter(Boolean),a=[];let s="";return i.forEach((o,n)=>{const c=nr(`${o} `,r),l=nr(s,r);if(c>t){const{hyphenatedStrings:p,remainingWord:d}=FC(o,t,"-",r);a.push(s,...p),s=d}else l+c>=t?(a.push(s),s=o):s=[s,o].filter(Boolean).join(" ");n+1===i.length&&a.push(s)}),a.filter(o=>o!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),FC=Ma((e,t,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);const a=[...e],s=[];let o="";return a.forEach((n,c)=>{const l=`${o}${n}`;if(nr(l,i)>=t){const u=c+1,p=a.length===u,d=`${l}${r}`;s.push(p?l:d),o=""}else o=l}),{hyphenatedStrings:s,remainingWord:o}},(e,t,r="-",i)=>`${e}${t}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`);function Mf(e,t){return $l(e,t).height}f(Mf,"calculateTextHeight");function nr(e,t){return $l(e,t).width}f(nr,"calculateTextWidth");var $l=Ma((e,t)=>{const{fontSize:r=12,fontFamily:i="Arial",fontWeight:a=400}=t;if(!e)return{width:0,height:0};const[,s]=mn(r),o=["sans-serif",i],n=e.split(Ti.lineBreakRegex),c=[],l=bt("body");if(!l.remove)return{width:0,height:0,lineHeight:0};const h=l.append("svg");for(const p of o){let d=0;const m={width:0,height:0,lineHeight:0};for(const g of n){const y=AC();y.text=g||xC;const b=LC(h,y).style("font-size",s).style("font-weight",a).style("font-family",p),x=(b._groups||b)[0][0].getBBox();if(x.width===0&&x.height===0)throw new Error("svg element not in render tree");m.width=Math.round(Math.max(m.width,x.width)),d=Math.round(x.height),m.height+=d,m.lineHeight=Math.round(Math.max(m.lineHeight,d))}c.push(m)}h.remove();const u=isNaN(c[1].height)||isNaN(c[1].width)||isNaN(c[1].lineHeight)||c[0].height>c[1].height&&c[0].width>c[1].width&&c[0].lineHeight>c[1].lineHeight?0:1;return c[u]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`),fi,DC=(fi=class{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}},f(fi,"InitIDGenerator"),fi),Ua,$C=f(function(e){return Ua=Ua||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Ua.innerHTML=e,unescape(Ua.textContent)},"entityDecode");function Ol(e){return"str"in e}f(Ol,"isDetailedError");var OC=f((e,t,r,i)=>{var s;if(!i)return;const a=(s=e.node())==null?void 0:s.getBBox();a&&e.append("text").text(i).attr("text-anchor","middle").attr("x",a.x+a.width/2).attr("y",-r).attr("class",t)},"insertTitle"),mn=f(e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]},"parseFontSize");function Rl(e,t){return bC({},e,t)}f(Rl,"cleanAndMerge");var Oe={assignWithDepth:Vt,wrapLabel:MC,calculateTextHeight:Mf,calculateTextWidth:nr,calculateTextDimensions:$l,cleanAndMerge:Rl,detectInit:_C,detectDirective:Cf,isSubstringInArray:CC,interpolateToCurve:Ml,calcLabelPosition:Bf,calcCardinalityPosition:TC,calcTerminalLabelPosition:Ef,formatUrl:Sf,getStylesFromArray:Af,generateId:BC,random:EC,runFunc:SC,entityDecode:$C,insertTitle:OC,parseFontSize:mn,InitIDGenerator:DC},RC=f(function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const i=r.substring(1,r.length-1);return/^\+?\d+$/.test(i)?"ﬂ°°"+i+"¶ß":"ﬂ°"+i+"¶ß"}),t},"encodeEntities"),jr=f(function(e){return e.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),bL=f((e,t,{counter:r=0,prefix:i,suffix:a},s)=>s||`${i?`${i}_`:""}${e}_${t}_${r}${a?`_${a}`:""}`,"getEdgeId");function le(e){return e??null}f(le,"handleUndefinedAttr");function Il(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Yr=Il();function Ff(e){Yr=e}var la={exec:()=>null};function Ct(e,t=""){let r=typeof e=="string"?e:e.source;const i={replace:(a,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(oe.caret,"$1"),r=r.replace(a,o),i},getRegex:()=>new RegExp(r,t)};return i}var oe={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},IC=/^(?:[ \t]*(?:\n|$))+/,PC=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,NC=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Da=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,zC=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Pl=/(?:[*+-]|\d{1,9}[.)])/,Df=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,$f=Ct(Df).replace(/bull/g,Pl).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),qC=Ct(Df).replace(/bull/g,Pl).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Nl=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,WC=/^[^\n]+/,zl=/(?!\s*\])(?:\\.|[^\[\]\\])+/,HC=Ct(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",zl).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),jC=Ct(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Pl).getRegex(),gn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ql=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,YC=Ct("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",ql).replace("tag",gn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Of=Ct(Nl).replace("hr",Da).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gn).getRegex(),UC=Ct(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Of).getRegex(),Wl={blockquote:UC,code:PC,def:HC,fences:NC,heading:zC,hr:Da,html:YC,lheading:$f,list:jC,newline:IC,paragraph:Of,table:la,text:WC},Th=Ct("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Da).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gn).getRegex(),GC={...Wl,lheading:qC,table:Th,paragraph:Ct(Nl).replace("hr",Da).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Th).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gn).getRegex()},VC={...Wl,html:Ct(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ql).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:la,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ct(Nl).replace("hr",Da).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$f).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},XC=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,KC=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Rf=/^( {2,}|\\)\n(?!\s*$)/,ZC=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,yn=/[\p{P}\p{S}]/u,Hl=/[\s\p{P}\p{S}]/u,If=/[^\s\p{P}\p{S}]/u,QC=Ct(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Hl).getRegex(),Pf=/(?!~)[\p{P}\p{S}]/u,JC=/(?!~)[\s\p{P}\p{S}]/u,tS=/(?:[^\s\p{P}\p{S}]|~)/u,eS=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Nf=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,rS=Ct(Nf,"u").replace(/punct/g,yn).getRegex(),iS=Ct(Nf,"u").replace(/punct/g,Pf).getRegex(),zf="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",aS=Ct(zf,"gu").replace(/notPunctSpace/g,If).replace(/punctSpace/g,Hl).replace(/punct/g,yn).getRegex(),sS=Ct(zf,"gu").replace(/notPunctSpace/g,tS).replace(/punctSpace/g,JC).replace(/punct/g,Pf).getRegex(),nS=Ct("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,If).replace(/punctSpace/g,Hl).replace(/punct/g,yn).getRegex(),oS=Ct(/\\(punct)/,"gu").replace(/punct/g,yn).getRegex(),lS=Ct(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),cS=Ct(ql).replace("(?:-->|$)","-->").getRegex(),hS=Ct("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",cS).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),qs=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,uS=Ct(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",qs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qf=Ct(/^!?\[(label)\]\[(ref)\]/).replace("label",qs).replace("ref",zl).getRegex(),Wf=Ct(/^!?\[(ref)\](?:\[\])?/).replace("ref",zl).getRegex(),pS=Ct("reflink|nolink(?!\\()","g").replace("reflink",qf).replace("nolink",Wf).getRegex(),jl={_backpedal:la,anyPunctuation:oS,autolink:lS,blockSkip:eS,br:Rf,code:KC,del:la,emStrongLDelim:rS,emStrongRDelimAst:aS,emStrongRDelimUnd:nS,escape:XC,link:uS,nolink:Wf,punctuation:QC,reflink:qf,reflinkSearch:pS,tag:hS,text:ZC,url:la},dS={...jl,link:Ct(/^!?\[(label)\]\((.*?)\)/).replace("label",qs).getRegex(),reflink:Ct(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",qs).getRegex()},Ro={...jl,emStrongRDelimAst:sS,emStrongLDelim:iS,url:Ct(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},fS={...Ro,br:Ct(Rf).replace("{2,}","*").getRegex(),text:Ct(Ro.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ga={normal:Wl,gfm:GC,pedantic:VC},ji={normal:jl,gfm:Ro,breaks:fS,pedantic:dS},mS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bh=e=>mS[e];function Fe(e,t){if(t){if(oe.escapeTest.test(e))return e.replace(oe.escapeReplace,Bh)}else if(oe.escapeTestNoEncode.test(e))return e.replace(oe.escapeReplaceNoEncode,Bh);return e}function Eh(e){try{e=encodeURI(e).replace(oe.percentDecode,"%")}catch{return null}return e}function Ah(e,t){var s;const r=e.replace(oe.findPipe,(o,n,c)=>{let l=!1,h=n;for(;--h>=0&&c[h]==="\\";)l=!l;return l?"|":" |"}),i=r.split(oe.splitPipe);let a=0;if(i[0].trim()||i.shift(),i.length>0&&!((s=i.at(-1))!=null&&s.trim())&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;a<i.length;a++)i[a]=i[a].trim().replace(oe.slashPipe,"|");return i}function Yi(e,t,r){const i=e.length;if(i===0)return"";let a=0;for(;a<i&&e.charAt(i-a-1)===t;)a++;return e.slice(0,i-a)}function gS(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return r>0?-2:-1}function Lh(e,t,r,i,a){const s=t.href,o=t.title||null,n=e[1].replace(a.other.outputLinkReplace,"$1");i.state.inLink=!0;const c={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:s,title:o,text:n,tokens:i.inlineTokens(n)};return i.state.inLink=!1,c}function yS(e,t,r){const i=e.match(r.other.indentCodeCompensation);if(i===null)return t;const a=i[1];return t.split(`
`).map(s=>{const o=s.match(r.other.beginningSpace);if(o===null)return s;const[n]=o;return n.length>=a.length?s.slice(a.length):s}).join(`
`)}var Ws=class{constructor(e){_t(this,"options");_t(this,"rules");_t(this,"lexer");this.options=e||Yr}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Yi(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=yS(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){const i=Yi(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Yi(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=Yi(t[0],`
`).split(`
`),i="",a="";const s=[];for(;r.length>0;){let o=!1;const n=[];let c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))n.push(r[c]),o=!0;else if(!o)n.push(r[c]);else break;r=r.slice(c);const l=n.join(`
`),h=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${l}`:l,a=a?`${a}
${h}`:h;const u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,s,!0),this.lexer.state.top=u,r.length===0)break;const p=s.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){const d=p,m=d.raw+`
`+r.join(`
`),g=this.blockquote(m);s[s.length-1]=g,i=i.substring(0,i.length-d.raw.length)+g.raw,a=a.substring(0,a.length-d.text.length)+g.text;break}else if((p==null?void 0:p.type)==="list"){const d=p,m=d.raw+`
`+r.join(`
`),g=this.list(m);s[s.length-1]=g,i=i.substring(0,i.length-p.raw.length)+g.raw,a=a.substring(0,a.length-d.raw.length)+g.raw,r=m.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:a}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,a={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=this.rules.other.listItemRegex(r);let o=!1;for(;e;){let c=!1,l="",h="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let u=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),p=e.split(`
`,1)[0],d=!u.trim(),m=0;if(this.options.pedantic?(m=2,h=u.trimStart()):d?m=t[1].length+1:(m=t[2].search(this.rules.other.nonSpaceChar),m=m>4?1:m,h=u.slice(m),m+=t[1].length),d&&this.rules.other.blankLine.test(p)&&(l+=p+`
`,e=e.substring(p.length+1),c=!0),!c){const b=this.rules.other.nextBulletRegex(m),x=this.rules.other.hrRegex(m),k=this.rules.other.fencesBeginRegex(m),C=this.rules.other.headingBeginRegex(m),S=this.rules.other.htmlBeginRegex(m);for(;e;){const v=e.split(`
`,1)[0];let _;if(p=v,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),_=p):_=p.replace(this.rules.other.tabCharGlobal,"    "),k.test(p)||C.test(p)||S.test(p)||b.test(p)||x.test(p))break;if(_.search(this.rules.other.nonSpaceChar)>=m||!p.trim())h+=`
`+_.slice(m);else{if(d||u.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||k.test(u)||C.test(u)||x.test(u))break;h+=`
`+p}!d&&!p.trim()&&(d=!0),l+=v+`
`,e=e.substring(v.length+1),u=_.slice(m)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(o=!0));let g=null,y;this.options.gfm&&(g=this.rules.other.listIsTask.exec(h),g&&(y=g[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:l,task:!!g,checked:y,loose:!1,text:h,tokens:[]}),a.raw+=l}const n=a.items.at(-1);if(n)n.raw=n.raw.trimEnd(),n.text=n.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let c=0;c<a.items.length;c++)if(this.lexer.state.top=!1,a.items[c].tokens=this.lexer.blockTokens(a.items[c].text,[]),!a.loose){const l=a.items[c].tokens.filter(u=>u.type==="space"),h=l.length>0&&l.some(u=>this.rules.other.anyLine.test(u.raw));a.loose=h}if(a.loose)for(let c=0;c<a.items.length;c++)a.items[c].loose=!0;return a}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:a}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const r=Ah(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),a=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const n of i)this.rules.other.tableAlignRight.test(n)?s.align.push("right"):this.rules.other.tableAlignCenter.test(n)?s.align.push("center"):this.rules.other.tableAlignLeft.test(n)?s.align.push("left"):s.align.push(null);for(let n=0;n<r.length;n++)s.header.push({text:r[n],tokens:this.lexer.inline(r[n]),header:!0,align:s.align[n]});for(const n of a)s.rows.push(Ah(n,s.header.length).map((c,l)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:s.align[l]})));return s}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const s=Yi(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=gS(t[2],"()");if(s===-2)return;if(s>-1){const n=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let i=t[2],a="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],a=s[3])}else a=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),Lh(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=t[i.toLowerCase()];if(!a){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Lh(r,a,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...i[0]].length-1;let o,n,c=s,l=0;const h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);(i=h.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(n=[...o].length,i[3]||i[4]){c+=n;continue}else if((i[5]||i[6])&&s%3&&!((s+n)%3)){l+=n;continue}if(c-=n,c>0)continue;n=Math.min(n,n+c+l);const u=[...i[0]][0].length,p=e.slice(0,s+i.index+u+n);if(Math.min(s,n)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const d=p.slice(2,-2);return{type:"strong",raw:p,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),a=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&a&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=t[1],i="mailto:"+r):(r=t[1],i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let t;if(t=this.rules.inline.url.exec(e)){let i,a;if(t[2]==="@")i=t[0],a="mailto:"+i;else{let s;do s=t[0],t[0]=((r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])??"";while(s!==t[0]);i=t[0],t[1]==="www."?a="http://"+t[0]:a=t[0]}return{type:"link",raw:t[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},tr=class Io{constructor(t){_t(this,"tokens");_t(this,"options");_t(this,"state");_t(this,"tokenizer");_t(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Yr,this.options.tokenizer=this.options.tokenizer||new Ws,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={other:oe,block:Ga.normal,inline:ji.normal};this.options.pedantic?(r.block=Ga.pedantic,r.inline=ji.pedantic):this.options.gfm&&(r.block=Ga.gfm,this.options.breaks?r.inline=ji.breaks:r.inline=ji.gfm),this.tokenizer.rules=r}static get rules(){return{block:Ga,inline:ji}}static lex(t,r){return new Io(r).lex(t)}static lexInline(t,r){return new Io(r).inlineTokens(t)}lex(t){t=t.replace(oe.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],i=!1){var a,s,o;for(this.options.pedantic&&(t=t.replace(oe.tabCharGlobal,"    ").replace(oe.spaceLine,""));t;){let n;if((s=(a=this.options.extensions)==null?void 0:a.block)!=null&&s.some(l=>(n=l.call({lexer:this},t,r))?(t=t.substring(n.raw.length),r.push(n),!0):!1))continue;if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length);const l=r.at(-1);n.raw.length===1&&l!==void 0?l.raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length);const l=r.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+n.raw,l.text+=`
`+n.text,this.inlineQueue.at(-1).src=l.text):r.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length);const l=r.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+n.raw,l.text+=`
`+n.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),r.push(n);continue}let c=t;if((o=this.options.extensions)!=null&&o.startBlock){let l=1/0;const h=t.slice(1);let u;this.options.extensions.startBlock.forEach(p=>{u=p.call({lexer:this},h),typeof u=="number"&&u>=0&&(l=Math.min(l,u))}),l<1/0&&l>=0&&(c=t.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(c))){const l=r.at(-1);i&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=`
`+n.raw,l.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):r.push(n),i=c.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length);const l=r.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=`
`+n.raw,l.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):r.push(n);continue}if(t){const l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){var n,c,l;let i=t,a=null;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,a.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(a=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;t;){s||(o=""),s=!1;let h;if((c=(n=this.options.extensions)==null?void 0:n.inline)!=null&&c.some(p=>(h=p.call({lexer:this},t,r))?(t=t.substring(h.raw.length),r.push(h),!0):!1))continue;if(h=this.tokenizer.escape(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.tag(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.link(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(h.raw.length);const p=r.at(-1);h.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=h.raw,p.text+=h.text):r.push(h);continue}if(h=this.tokenizer.emStrong(t,i,o)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.codespan(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.br(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.del(t)){t=t.substring(h.raw.length),r.push(h);continue}if(h=this.tokenizer.autolink(t)){t=t.substring(h.raw.length),r.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(t))){t=t.substring(h.raw.length),r.push(h);continue}let u=t;if((l=this.options.extensions)!=null&&l.startInline){let p=1/0;const d=t.slice(1);let m;this.options.extensions.startInline.forEach(g=>{m=g.call({lexer:this},d),typeof m=="number"&&m>=0&&(p=Math.min(p,m))}),p<1/0&&p>=0&&(u=t.substring(0,p+1))}if(h=this.tokenizer.inlineText(u)){t=t.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(o=h.raw.slice(-1)),s=!0;const p=r.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=h.raw,p.text+=h.text):r.push(h);continue}if(t){const p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return r}},Hs=class{constructor(e){_t(this,"options");_t(this,"parser");this.options=e||Yr}space(e){return""}code({text:e,lang:t,escaped:r}){var s;const i=(s=(t||"").match(oe.notSpaceStart))==null?void 0:s[0],a=e.replace(oe.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Fe(i)+'">'+(r?a:Fe(a,!0))+`</code></pre>
`:"<pre><code>"+(r?a:Fe(a,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let o=0;o<e.items.length;o++){const n=e.items[o];i+=this.listitem(n)}const a=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+a+s+`>
`+i+"</"+a+`>
`}listitem(e){var r;let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Fe(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let a=0;a<e.header.length;a++)r+=this.tablecell(e.header[a]);t+=this.tablerow({text:r});let i="";for(let a=0;a<e.rows.length;a++){const s=e.rows[a];r="";for(let o=0;o<s.length;o++)r+=this.tablecell(s[o]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Fe(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),a=Eh(e);if(a===null)return i;e=a;let s='<a href="'+e+'"';return t&&(s+=' title="'+Fe(t)+'"'),s+=">"+i+"</a>",s}image({href:e,title:t,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));const a=Eh(e);if(a===null)return Fe(r);e=a;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${Fe(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Fe(e.text)}},Yl=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},er=class Po{constructor(t){_t(this,"options");_t(this,"renderer");_t(this,"textRenderer");this.options=t||Yr,this.options.renderer=this.options.renderer||new Hs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Yl}static parse(t,r){return new Po(r).parse(t)}static parseInline(t,r){return new Po(r).parseInline(t)}parse(t,r=!0){var a,s;let i="";for(let o=0;o<t.length;o++){const n=t[o];if((s=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&s[n.type]){const l=n,h=this.options.extensions.renderers[l.type].call({parser:this},l);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){i+=h||"";continue}}const c=n;switch(c.type){case"space":{i+=this.renderer.space(c);continue}case"hr":{i+=this.renderer.hr(c);continue}case"heading":{i+=this.renderer.heading(c);continue}case"code":{i+=this.renderer.code(c);continue}case"table":{i+=this.renderer.table(c);continue}case"blockquote":{i+=this.renderer.blockquote(c);continue}case"list":{i+=this.renderer.list(c);continue}case"html":{i+=this.renderer.html(c);continue}case"paragraph":{i+=this.renderer.paragraph(c);continue}case"text":{let l=c,h=this.renderer.text(l);for(;o+1<t.length&&t[o+1].type==="text";)l=t[++o],h+=`
`+this.renderer.text(l);r?i+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):i+=h;continue}default:{const l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}parseInline(t,r=this.renderer){var a,s;let i="";for(let o=0;o<t.length;o++){const n=t[o];if((s=(a=this.options.extensions)==null?void 0:a.renderers)!=null&&s[n.type]){const l=this.options.extensions.renderers[n.type].call({parser:this},n);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){i+=l||"";continue}}const c=n;switch(c.type){case"escape":{i+=r.text(c);break}case"html":{i+=r.html(c);break}case"link":{i+=r.link(c);break}case"image":{i+=r.image(c);break}case"strong":{i+=r.strong(c);break}case"em":{i+=r.em(c);break}case"codespan":{i+=r.codespan(c);break}case"br":{i+=r.br(c);break}case"del":{i+=r.del(c);break}case"text":{i+=r.text(c);break}default:{const l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},to,hs=(to=class{constructor(e){_t(this,"options");_t(this,"block");this.options=e||Yr}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?tr.lex:tr.lexInline}provideParser(){return this.block?er.parse:er.parseInline}},_t(to,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),to),bS=class{constructor(...e){_t(this,"defaults",Il());_t(this,"options",this.setOptions);_t(this,"parse",this.parseMarkdown(!0));_t(this,"parseInline",this.parseMarkdown(!1));_t(this,"Parser",er);_t(this,"Renderer",Hs);_t(this,"TextRenderer",Yl);_t(this,"Lexer",tr);_t(this,"Tokenizer",Ws);_t(this,"Hooks",hs);this.use(...e)}walkTokens(e,t){var i,a;let r=[];for(const s of e)switch(r=r.concat(t.call(this,s)),s.type){case"table":{const o=s;for(const n of o.header)r=r.concat(this.walkTokens(n.tokens,t));for(const n of o.rows)for(const c of n)r=r.concat(this.walkTokens(c.tokens,t));break}case"list":{const o=s;r=r.concat(this.walkTokens(o.items,t));break}default:{const o=s;(a=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&a[o.type]?this.defaults.extensions.childTokens[o.type].forEach(n=>{const c=o[n].flat(1/0);r=r.concat(this.walkTokens(c,t))}):o.tokens&&(r=r.concat(this.walkTokens(o.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const s=t.renderers[a.name];s?t.renderers[a.name]=function(...o){let n=a.renderer.apply(this,o);return n===!1&&(n=s.apply(this,o)),n}:t.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=t[a.level];s?s.unshift(a.tokenizer):t[a.level]=[a.tokenizer],a.start&&(a.level==="block"?t.startBlock?t.startBlock.push(a.start):t.startBlock=[a.start]:a.level==="inline"&&(t.startInline?t.startInline.push(a.start):t.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(t.childTokens[a.name]=a.childTokens)}),i.extensions=t),r.renderer){const a=this.defaults.renderer||new Hs(this.defaults);for(const s in r.renderer){if(!(s in a))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const o=s,n=r.renderer[o],c=a[o];a[o]=(...l)=>{let h=n.apply(a,l);return h===!1&&(h=c.apply(a,l)),h||""}}i.renderer=a}if(r.tokenizer){const a=this.defaults.tokenizer||new Ws(this.defaults);for(const s in r.tokenizer){if(!(s in a))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const o=s,n=r.tokenizer[o],c=a[o];a[o]=(...l)=>{let h=n.apply(a,l);return h===!1&&(h=c.apply(a,l)),h}}i.tokenizer=a}if(r.hooks){const a=this.defaults.hooks||new hs;for(const s in r.hooks){if(!(s in a))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const o=s,n=r.hooks[o],c=a[o];hs.passThroughHooks.has(s)?a[o]=l=>{if(this.defaults.async)return Promise.resolve(n.call(a,l)).then(u=>c.call(a,u));const h=n.call(a,l);return c.call(a,h)}:a[o]=(...l)=>{let h=n.apply(a,l);return h===!1&&(h=c.apply(a,l)),h}}i.hooks=a}if(r.walkTokens){const a=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(o){let n=[];return n.push(s.call(this,o)),a&&(n=n.concat(a.call(this,o))),n}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return tr.lex(e,t??this.defaults)}parser(e,t){return er.parse(e,t??this.defaults)}parseMarkdown(e){return(r,i)=>{const a={...i},s={...this.defaults,...a},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&a.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const n=s.hooks?s.hooks.provideLexer():e?tr.lex:tr.lexInline,c=s.hooks?s.hooks.provideParser():e?er.parse:er.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(l=>n(l,s)).then(l=>s.hooks?s.hooks.processAllTokens(l):l).then(l=>s.walkTokens?Promise.all(this.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>c(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(o);try{s.hooks&&(r=s.hooks.preprocess(r));let l=n(r,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let h=c(l,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(l){return o(l)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Fe(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Nr=new bS;function wt(e,t){return Nr.parse(e,t)}wt.options=wt.setOptions=function(e){return Nr.setOptions(e),wt.defaults=Nr.defaults,Ff(wt.defaults),wt};wt.getDefaults=Il;wt.defaults=Yr;wt.use=function(...e){return Nr.use(...e),wt.defaults=Nr.defaults,Ff(wt.defaults),wt};wt.walkTokens=function(e,t){return Nr.walkTokens(e,t)};wt.parseInline=Nr.parseInline;wt.Parser=er;wt.parser=er.parse;wt.Renderer=Hs;wt.TextRenderer=Yl;wt.Lexer=tr;wt.lexer=tr.lex;wt.Tokenizer=Ws;wt.Hooks=hs;wt.parse=wt;wt.options;wt.setOptions;wt.use;wt.walkTokens;wt.parseInline;er.parse;tr.lex;function Hf(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.from(typeof e=="string"?[e]:e);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var a=i.reduce(function(n,c){var l=c.match(/\n([\t ]+|(?!\s).)/g);return l?n.concat(l.map(function(h){var u,p;return(p=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&p!==void 0?p:0})):n},[]);if(a.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,a)+"}","g");i=i.map(function(n){return n.replace(s,`
`)})}i[0]=i[0].replace(/^\r?\n/,"");var o=i[0];return t.forEach(function(n,c){var l=o.match(/(?:^|\n)( *)$/),h=l?l[1]:"",u=n;typeof n=="string"&&n.includes(`
`)&&(u=String(n).split(`
`).map(function(p,d){return d===0?p:""+h+p}).join(`
`)),o+=u+i[c+1]}),o}function jf(e,{markdownAutoWrap:t}){const i=e.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),a=Hf(i);return t===!1?a.replace(/ /g,"&nbsp;"):a}f(jf,"preprocessMarkdown");function Yf(e,t={}){const r=jf(e,t),i=wt.lexer(r),a=[[]];let s=0;function o(n,c="normal"){n.type==="text"?n.text.split(`
`).forEach((h,u)=>{u!==0&&(s++,a.push([])),h.split(" ").forEach(p=>{p=p.replace(/&#39;/g,"'"),p&&a[s].push({content:p,type:c})})}):n.type==="strong"||n.type==="em"?n.tokens.forEach(l=>{o(l,n.type)}):n.type==="html"&&a[s].push({content:n.text,type:"normal"})}return f(o,"processNode"),i.forEach(n=>{var c;n.type==="paragraph"?(c=n.tokens)==null||c.forEach(l=>{o(l)}):n.type==="html"&&a[s].push({content:n.text,type:"normal"})}),a}f(Yf,"markdownToLines");function Uf(e,{markdownAutoWrap:t}={}){const r=wt.lexer(e);function i(a){var s,o,n;return a.type==="text"?t===!1?a.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):a.text.replace(/\n */g,"<br/>"):a.type==="strong"?`<strong>${(s=a.tokens)==null?void 0:s.map(i).join("")}</strong>`:a.type==="em"?`<em>${(o=a.tokens)==null?void 0:o.map(i).join("")}</em>`:a.type==="paragraph"?`<p>${(n=a.tokens)==null?void 0:n.map(i).join("")}</p>`:a.type==="space"?"":a.type==="html"?`${a.text}`:a.type==="escape"?a.text:`Unsupported markdown: ${a.type}`}return f(i,"output"),r.map(i).join("")}f(Uf,"markdownToHTML");function Gf(e){return Intl.Segmenter?[...new Intl.Segmenter().segment(e)].map(t=>t.segment):[...e]}f(Gf,"splitTextToChars");function Vf(e,t){const r=Gf(t.content);return Ul(e,[],r,t.type)}f(Vf,"splitWordToFitWidth");function Ul(e,t,r,i){if(r.length===0)return[{content:t.join(""),type:i},{content:"",type:i}];const[a,...s]=r,o=[...t,a];return e([{content:o.join(""),type:i}])?Ul(e,o,s,i):(t.length===0&&a&&(t.push(a),r.shift()),[{content:t.join(""),type:i},{content:r.join(""),type:i}])}f(Ul,"splitWordToFitWidthRecursion");function Xf(e,t){if(e.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return js(e,t)}f(Xf,"splitLineToFitWidth");function js(e,t,r=[],i=[]){if(e.length===0)return i.length>0&&r.push(i),r.length>0?r:[];let a="";e[0].content===" "&&(a=" ",e.shift());const s=e.shift()??{content:" ",type:"normal"},o=[...i];if(a!==""&&o.push({content:a,type:"normal"}),o.push(s),t(o))return js(e,t,r,o);if(i.length>0)r.push(i),e.unshift(s);else if(s.content){const[n,c]=Vf(t,s);r.push([n]),c.content&&e.unshift(c)}return js(e,t,r)}f(js,"splitLineToFitWidthRecursion");function No(e,t){t&&e.attr("style",t)}f(No,"applyStyle");async function Kf(e,t,r,i,a=!1){const s=e.append("foreignObject");s.attr("width",`${10*r}px`),s.attr("height",`${10*r}px`);const o=s.append("xhtml:div");let n=t.label;t.label&&xi(t.label)&&(n=await el(t.label.replace(Ti.lineBreakRegex,`
`),kt()));const c=t.isNode?"nodeLabel":"edgeLabel",l=o.append("span");l.html(n),No(l,t.labelStyle),l.attr("class",`${c} ${i}`),No(o,t.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",r+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),a&&o.attr("class","labelBkg");let h=o.node().getBoundingClientRect();return h.width===r&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",r+"px"),h=o.node().getBoundingClientRect()),s.node()}f(Kf,"addHtmlSpan");function bn(e,t,r){return e.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",t*r-.1+"em").attr("dy",r+"em")}f(bn,"createTspan");function Zf(e,t,r){const i=e.append("text"),a=bn(i,1,t);xn(a,r);const s=a.node().getComputedTextLength();return i.remove(),s}f(Zf,"computeWidthOfText");function xS(e,t,r){var o;const i=e.append("text"),a=bn(i,1,t);xn(a,[{content:r,type:"normal"}]);const s=(o=a.node())==null?void 0:o.getBoundingClientRect();return s&&i.remove(),s}f(xS,"computeDimensionOfText");function Qf(e,t,r,i=!1){const s=t.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),n=s.append("text").attr("y","-10.1");let c=0;for(const l of r){const h=f(p=>Zf(s,1.1,p)<=e,"checkWidth"),u=h(l)?[l]:Xf(l,h);for(const p of u){const d=bn(n,c,1.1);xn(d,p),c++}}if(i){const l=n.node().getBBox(),h=2;return o.attr("x",l.x-h).attr("y",l.y-h).attr("width",l.width+2*h).attr("height",l.height+2*h),s.node()}else return n.node()}f(Qf,"createFormattedText");function xn(e,t){e.text(""),t.forEach((r,i)=>{const a=e.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");i===0?a.text(r.content):a.text(" "+r.content)})}f(xn,"updateTextContentAndStyles");function Jf(e){return e.replace(/fa[bklrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`)}f(Jf,"replaceIconSubstring");var xr=f(async(e,t="",{style:r="",isTitle:i=!1,classes:a="",useHtmlLabels:s=!0,isNode:o=!0,width:n=200,addSvgBackground:c=!1}={},l)=>{if(O.debug("XYZ createText",t,r,i,a,s,o,"addSvgBackground: ",c),s){const h=Uf(t,l),u=Jf(jr(h)),p=t.replace(/\\\\/g,"\\"),d={isNode:o,label:xi(t)?p:u,labelStyle:r.replace("fill:","color:")};return await Kf(e,d,n,a,c)}else{const h=t.replace(/<br\s*\/?>/g,"<br/>"),u=Yf(h.replace("<br>","<br/>"),l),p=Qf(n,e,u,t?c:!1);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const d=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");bt(p).attr("style",d)}else{const d=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");bt(p).select("rect").attr("style",d.replace(/background:/g,"fill:"));const m=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");bt(p).select("text").attr("style",m)}return p}},"createText");function Un(e,t,r){if(e&&e.length){const[i,a]=t,s=Math.PI/180*r,o=Math.cos(s),n=Math.sin(s);for(const c of e){const[l,h]=c;c[0]=(l-i)*o-(h-a)*n+i,c[1]=(l-i)*n+(h-a)*o+a}}}function vS(e,t){return e[0]===t[0]&&e[1]===t[1]}function kS(e,t,r,i=1){const a=r,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,n=[0,0];if(a)for(const l of o)Un(l,n,a);const c=function(l,h,u){const p=[];for(const x of l){const k=[...x];vS(k[0],k[k.length-1])||k.push([k[0][0],k[0][1]]),k.length>2&&p.push(k)}const d=[];h=Math.max(h,.1);const m=[];for(const x of p)for(let k=0;k<x.length-1;k++){const C=x[k],S=x[k+1];if(C[1]!==S[1]){const v=Math.min(C[1],S[1]);m.push({ymin:v,ymax:Math.max(C[1],S[1]),x:v===C[1]?C[0]:S[0],islope:(S[0]-C[0])/(S[1]-C[1])})}}if(m.sort((x,k)=>x.ymin<k.ymin?-1:x.ymin>k.ymin?1:x.x<k.x?-1:x.x>k.x?1:x.ymax===k.ymax?0:(x.ymax-k.ymax)/Math.abs(x.ymax-k.ymax)),!m.length)return d;let g=[],y=m[0].ymin,b=0;for(;g.length||m.length;){if(m.length){let x=-1;for(let k=0;k<m.length&&!(m[k].ymin>y);k++)x=k;m.splice(0,x+1).forEach(k=>{g.push({s:y,edge:k})})}if(g=g.filter(x=>!(x.edge.ymax<=y)),g.sort((x,k)=>x.edge.x===k.edge.x?0:(x.edge.x-k.edge.x)/Math.abs(x.edge.x-k.edge.x)),(u!==1||b%h==0)&&g.length>1)for(let x=0;x<g.length;x+=2){const k=x+1;if(k>=g.length)break;const C=g[x].edge,S=g[k].edge;d.push([[Math.round(C.x),y],[Math.round(S.x),y]])}y+=u,g.forEach(x=>{x.edge.x=x.edge.x+u*x.edge.islope}),b++}return d}(o,s,i);if(a){for(const l of o)Un(l,n,-a);(function(l,h,u){const p=[];l.forEach(d=>p.push(...d)),Un(p,h,u)})(c,n,-a)}return c}function $a(e,t){var r;const i=t.hachureAngle+90;let a=t.hachureGap;a<0&&(a=4*t.strokeWidth),a=Math.round(Math.max(a,.1));let s=1;return t.roughness>=1&&(((r=t.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(s=a),kS(e,a,i,s||1)}class Gl{constructor(t){this.helper=t}fillPolygons(t,r){return this._fillPolygons(t,r)}_fillPolygons(t,r){const i=$a(t,r);return{type:"fillSketch",ops:this.renderLines(i,r)}}renderLines(t,r){const i=[];for(const a of t)i.push(...this.helper.doubleLineOps(a[0][0],a[0][1],a[1][0],a[1][1],r));return i}}function vn(e){const t=e[0],r=e[1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}class _S extends Gl{fillPolygons(t,r){let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);const a=$a(t,Object.assign({},r,{hachureGap:i})),s=Math.PI/180*r.hachureAngle,o=[],n=.5*i*Math.cos(s),c=.5*i*Math.sin(s);for(const[l,h]of a)vn([l,h])&&o.push([[l[0]-n,l[1]+c],[...h]],[[l[0]+n,l[1]-c],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}}class wS extends Gl{fillPolygons(t,r){const i=this._fillPolygons(t,r),a=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),s=this._fillPolygons(t,a);return i.ops=i.ops.concat(s.ops),i}}class CS{constructor(t){this.helper=t}fillPolygons(t,r){const i=$a(t,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(i,r)}dotsOnLines(t,r){const i=[];let a=r.hachureGap;a<0&&(a=4*r.strokeWidth),a=Math.max(a,.1);let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const o=a/4;for(const n of t){const c=vn(n),l=c/a,h=Math.ceil(l)-1,u=c-h*a,p=(n[0][0]+n[1][0])/2-a/4,d=Math.min(n[0][1],n[1][1]);for(let m=0;m<h;m++){const g=d+u+m*a,y=p-o+2*Math.random()*o,b=g-o+2*Math.random()*o,x=this.helper.ellipse(y,b,s,s,r);i.push(...x.ops)}}return{type:"fillSketch",ops:i}}}class SS{constructor(t){this.helper=t}fillPolygons(t,r){const i=$a(t,r);return{type:"fillSketch",ops:this.dashedLine(i,r)}}dashedLine(t,r){const i=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,a=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,s=[];return t.forEach(o=>{const n=vn(o),c=Math.floor(n/(i+a)),l=(n+a-c*(i+a))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const p=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let d=0;d<c;d++){const m=d*(i+a),g=m+i,y=[h[0]+m*Math.cos(p)+l*Math.cos(p),h[1]+m*Math.sin(p)+l*Math.sin(p)],b=[h[0]+g*Math.cos(p)+l*Math.cos(p),h[1]+g*Math.sin(p)+l*Math.sin(p)];s.push(...this.helper.doubleLineOps(y[0],y[1],b[0],b[1],r))}}),s}}class TS{constructor(t){this.helper=t}fillPolygons(t,r){const i=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,a=r.zigzagOffset<0?i:r.zigzagOffset,s=$a(t,r=Object.assign({},r,{hachureGap:i+a}));return{type:"fillSketch",ops:this.zigzagLines(s,a,r)}}zigzagLines(t,r,i){const a=[];return t.forEach(s=>{const o=vn(s),n=Math.round(o/(2*r));let c=s[0],l=s[1];c[0]>l[0]&&(c=s[1],l=s[0]);const h=Math.atan((l[1]-c[1])/(l[0]-c[0]));for(let u=0;u<n;u++){const p=2*u*r,d=2*(u+1)*r,m=Math.sqrt(2*Math.pow(r,2)),g=[c[0]+p*Math.cos(h),c[1]+p*Math.sin(h)],y=[c[0]+d*Math.cos(h),c[1]+d*Math.sin(h)],b=[g[0]+m*Math.cos(h+Math.PI/4),g[1]+m*Math.sin(h+Math.PI/4)];a.push(...this.helper.doubleLineOps(g[0],g[1],b[0],b[1],i),...this.helper.doubleLineOps(b[0],b[1],y[0],y[1],i))}}),a}}const de={};class BS{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const ES=0,Gn=1,Mh=2,Va={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Vn(e,t){return e.type===t}function Vl(e){const t=[],r=function(o){const n=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]={type:ES,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];n[n.length]={type:Gn,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return n[n.length]={type:Mh,text:""},n}(e);let i="BOD",a=0,s=r[a];for(;!Vn(s,Mh);){let o=0;const n=[];if(i==="BOD"){if(s.text!=="M"&&s.text!=="m")return Vl("M0,0"+e);a++,o=Va[s.text],i=s.text}else Vn(s,Gn)?o=Va[i]:(a++,o=Va[s.text],i=s.text);if(!(a+o<r.length))throw new Error("Path data ended short");for(let c=a;c<a+o;c++){const l=r[c];if(!Vn(l,Gn))throw new Error("Param not a number: "+i+","+l.text);n[n.length]=+l.text}if(typeof Va[i]!="number")throw new Error("Bad segment: "+i);{const c={key:i,data:n};t.push(c),a+=o,s=r[a],i==="M"&&(i="L"),i==="m"&&(i="l")}}return t}function tm(e){let t=0,r=0,i=0,a=0;const s=[];for(const{key:o,data:n}of e)switch(o){case"M":s.push({key:"M",data:[...n]}),[t,r]=n,[i,a]=n;break;case"m":t+=n[0],r+=n[1],s.push({key:"M",data:[t,r]}),i=t,a=r;break;case"L":s.push({key:"L",data:[...n]}),[t,r]=n;break;case"l":t+=n[0],r+=n[1],s.push({key:"L",data:[t,r]});break;case"C":s.push({key:"C",data:[...n]}),t=n[4],r=n[5];break;case"c":{const c=n.map((l,h)=>h%2?l+r:l+t);s.push({key:"C",data:c}),t=c[4],r=c[5];break}case"Q":s.push({key:"Q",data:[...n]}),t=n[2],r=n[3];break;case"q":{const c=n.map((l,h)=>h%2?l+r:l+t);s.push({key:"Q",data:c}),t=c[2],r=c[3];break}case"A":s.push({key:"A",data:[...n]}),t=n[5],r=n[6];break;case"a":t+=n[5],r+=n[6],s.push({key:"A",data:[n[0],n[1],n[2],n[3],n[4],t,r]});break;case"H":s.push({key:"H",data:[...n]}),t=n[0];break;case"h":t+=n[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...n]}),r=n[0];break;case"v":r+=n[0],s.push({key:"V",data:[r]});break;case"S":s.push({key:"S",data:[...n]}),t=n[2],r=n[3];break;case"s":{const c=n.map((l,h)=>h%2?l+r:l+t);s.push({key:"S",data:c}),t=c[2],r=c[3];break}case"T":s.push({key:"T",data:[...n]}),t=n[0],r=n[1];break;case"t":t+=n[0],r+=n[1],s.push({key:"T",data:[t,r]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=i,r=a}return s}function em(e){const t=[];let r="",i=0,a=0,s=0,o=0,n=0,c=0;for(const{key:l,data:h}of e){switch(l){case"M":t.push({key:"M",data:[...h]}),[i,a]=h,[s,o]=h;break;case"C":t.push({key:"C",data:[...h]}),i=h[4],a=h[5],n=h[2],c=h[3];break;case"L":t.push({key:"L",data:[...h]}),[i,a]=h;break;case"H":i=h[0],t.push({key:"L",data:[i,a]});break;case"V":a=h[0],t.push({key:"L",data:[i,a]});break;case"S":{let u=0,p=0;r==="C"||r==="S"?(u=i+(i-n),p=a+(a-c)):(u=i,p=a),t.push({key:"C",data:[u,p,...h]}),n=h[0],c=h[1],i=h[2],a=h[3];break}case"T":{const[u,p]=h;let d=0,m=0;r==="Q"||r==="T"?(d=i+(i-n),m=a+(a-c)):(d=i,m=a);const g=i+2*(d-i)/3,y=a+2*(m-a)/3,b=u+2*(d-u)/3,x=p+2*(m-p)/3;t.push({key:"C",data:[g,y,b,x,u,p]}),n=d,c=m,i=u,a=p;break}case"Q":{const[u,p,d,m]=h,g=i+2*(u-i)/3,y=a+2*(p-a)/3,b=d+2*(u-d)/3,x=m+2*(p-m)/3;t.push({key:"C",data:[g,y,b,x,d,m]}),n=u,c=p,i=d,a=m;break}case"A":{const u=Math.abs(h[0]),p=Math.abs(h[1]),d=h[2],m=h[3],g=h[4],y=h[5],b=h[6];u===0||p===0?(t.push({key:"C",data:[i,a,y,b,y,b]}),i=y,a=b):(i!==y||a!==b)&&(rm(i,a,y,b,u,p,d,m,g).forEach(function(x){t.push({key:"C",data:x})}),i=y,a=b);break}case"Z":t.push({key:"Z",data:[]}),i=s,a=o}r=l}return t}function Ui(e,t,r){return[e*Math.cos(r)-t*Math.sin(r),e*Math.sin(r)+t*Math.cos(r)]}function rm(e,t,r,i,a,s,o,n,c,l){const h=(u=o,Math.PI*u/180);var u;let p=[],d=0,m=0,g=0,y=0;if(l)[d,m,g,y]=l;else{[e,t]=Ui(e,t,-h),[r,i]=Ui(r,i,-h);const I=(e-r)/2,F=(t-i)/2;let L=I*I/(a*a)+F*F/(s*s);L>1&&(L=Math.sqrt(L),a*=L,s*=L);const B=a*a,D=s*s,E=B*D-B*F*F-D*I*I,W=B*F*F+D*I*I,H=(n===c?-1:1)*Math.sqrt(Math.abs(E/W));g=H*a*F/s+(e+r)/2,y=H*-s*I/a+(t+i)/2,d=Math.asin(parseFloat(((t-y)/s).toFixed(9))),m=Math.asin(parseFloat(((i-y)/s).toFixed(9))),e<g&&(d=Math.PI-d),r<g&&(m=Math.PI-m),d<0&&(d=2*Math.PI+d),m<0&&(m=2*Math.PI+m),c&&d>m&&(d-=2*Math.PI),!c&&m>d&&(m-=2*Math.PI)}let b=m-d;if(Math.abs(b)>120*Math.PI/180){const I=m,F=r,L=i;m=c&&m>d?d+120*Math.PI/180*1:d+120*Math.PI/180*-1,p=rm(r=g+a*Math.cos(m),i=y+s*Math.sin(m),F,L,a,s,o,0,c,[m,I,g,y])}b=m-d;const x=Math.cos(d),k=Math.sin(d),C=Math.cos(m),S=Math.sin(m),v=Math.tan(b/4),_=4/3*a*v,R=4/3*s*v,P=[e,t],$=[e+_*k,t-R*x],A=[r+_*S,i-R*C],z=[r,i];if($[0]=2*P[0]-$[0],$[1]=2*P[1]-$[1],l)return[$,A,z].concat(p);{p=[$,A,z].concat(p);const I=[];for(let F=0;F<p.length;F+=3){const L=Ui(p[F][0],p[F][1],h),B=Ui(p[F+1][0],p[F+1][1],h),D=Ui(p[F+2][0],p[F+2][1],h);I.push([L[0],L[1],B[0],B[1],D[0],D[1]])}return I}}const AS={randOffset:function(e,t){return ot(e,t)},randOffsetWithRange:function(e,t,r){return Ys(e,t,r)},ellipse:function(e,t,r,i,a){const s=am(r,i,a);return zo(e,t,a,s).opset},doubleLineOps:function(e,t,r,i,a){return gr(e,t,r,i,a,!0)}};function im(e,t,r,i,a){return{type:"path",ops:gr(e,t,r,i,a)}}function us(e,t,r){const i=(e||[]).length;if(i>2){const a=[];for(let s=0;s<i-1;s++)a.push(...gr(e[s][0],e[s][1],e[s+1][0],e[s+1][1],r));return t&&a.push(...gr(e[i-1][0],e[i-1][1],e[0][0],e[0][1],r)),{type:"path",ops:a}}return i===2?im(e[0][0],e[0][1],e[1][0],e[1][1],r):{type:"path",ops:[]}}function LS(e,t,r,i,a){return function(s,o){return us(s,!0,o)}([[e,t],[e+r,t],[e+r,t+i],[e,t+i]],a)}function Fh(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,i=Xa(r[0],1*(1+.2*t.roughness),t),a=t.disableMultiStroke?[]:Xa(r[0],1.5*(1+.22*t.roughness),Oh(t));for(let s=1;s<r.length;s++){const o=r[s];if(o.length){const n=Xa(o,1*(1+.2*t.roughness),t),c=t.disableMultiStroke?[]:Xa(o,1.5*(1+.22*t.roughness),Oh(t));for(const l of n)l.op!=="move"&&i.push(l);for(const l of c)l.op!=="move"&&a.push(l)}}return{type:"path",ops:i.concat(a)}}return{type:"path",ops:[]}}function am(e,t,r){const i=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),a=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),s=2*Math.PI/a;let o=Math.abs(e/2),n=Math.abs(t/2);const c=1-r.curveFitting;return o+=ot(o*c,r),n+=ot(n*c,r),{increment:s,rx:o,ry:n}}function zo(e,t,r,i){const[a,s]=Rh(i.increment,e,t,i.rx,i.ry,1,i.increment*Ys(.1,Ys(.4,1,r),r),r);let o=Us(a,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[n]=Rh(i.increment,e,t,i.rx,i.ry,1.5,0,r),c=Us(n,null,r);o=o.concat(c)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function Dh(e,t,r,i,a,s,o,n,c){const l=e,h=t;let u=Math.abs(r/2),p=Math.abs(i/2);u+=ot(.01*u,c),p+=ot(.01*p,c);let d=a,m=s;for(;d<0;)d+=2*Math.PI,m+=2*Math.PI;m-d>2*Math.PI&&(d=0,m=2*Math.PI);const g=2*Math.PI/c.curveStepCount,y=Math.min(g/2,(m-d)/2),b=Ih(y,l,h,u,p,d,m,1,c);if(!c.disableMultiStroke){const x=Ih(y,l,h,u,p,d,m,1.5,c);b.push(...x)}return o&&(n?b.push(...gr(l,h,l+u*Math.cos(d),h+p*Math.sin(d),c),...gr(l,h,l+u*Math.cos(m),h+p*Math.sin(m),c)):b.push({op:"lineTo",data:[l,h]},{op:"lineTo",data:[l+u*Math.cos(d),h+p*Math.sin(d)]})),{type:"path",ops:b}}function $h(e,t){const r=em(tm(Vl(e))),i=[];let a=[0,0],s=[0,0];for(const{key:o,data:n}of r)switch(o){case"M":s=[n[0],n[1]],a=[n[0],n[1]];break;case"L":i.push(...gr(s[0],s[1],n[0],n[1],t)),s=[n[0],n[1]];break;case"C":{const[c,l,h,u,p,d]=n;i.push(...MS(c,l,h,u,p,d,s,t)),s=[p,d];break}case"Z":i.push(...gr(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]]}return{type:"path",ops:i}}function Xn(e,t){const r=[];for(const i of e)if(i.length){const a=t.maxRandomnessOffset||0,s=i.length;if(s>2){r.push({op:"move",data:[i[0][0]+ot(a,t),i[0][1]+ot(a,t)]});for(let o=1;o<s;o++)r.push({op:"lineTo",data:[i[o][0]+ot(a,t),i[o][1]+ot(a,t)]})}}return{type:"fillPath",ops:r}}function Qr(e,t){return function(r,i){let a=r.fillStyle||"hachure";if(!de[a])switch(a){case"zigzag":de[a]||(de[a]=new _S(i));break;case"cross-hatch":de[a]||(de[a]=new wS(i));break;case"dots":de[a]||(de[a]=new CS(i));break;case"dashed":de[a]||(de[a]=new SS(i));break;case"zigzag-line":de[a]||(de[a]=new TS(i));break;default:a="hachure",de[a]||(de[a]=new Gl(i))}return de[a]}(t,AS).fillPolygons(e,t)}function Oh(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function sm(e){return e.randomizer||(e.randomizer=new BS(e.seed||0)),e.randomizer.next()}function Ys(e,t,r,i=1){return r.roughness*i*(sm(r)*(t-e)+e)}function ot(e,t,r=1){return Ys(-e,e,t,r)}function gr(e,t,r,i,a,s=!1){const o=s?a.disableMultiStrokeFill:a.disableMultiStroke,n=qo(e,t,r,i,a,!0,!1);if(o)return n;const c=qo(e,t,r,i,a,!0,!0);return n.concat(c)}function qo(e,t,r,i,a,s,o){const n=Math.pow(e-r,2)+Math.pow(t-i,2),c=Math.sqrt(n);let l=1;l=c<200?1:c>500?.4:-.0016668*c+1.233334;let h=a.maxRandomnessOffset||0;h*h*100>n&&(h=c/10);const u=h/2,p=.2+.2*sm(a);let d=a.bowing*a.maxRandomnessOffset*(i-t)/200,m=a.bowing*a.maxRandomnessOffset*(e-r)/200;d=ot(d,a,l),m=ot(m,a,l);const g=[],y=()=>ot(u,a,l),b=()=>ot(h,a,l),x=a.preserveVertices;return o?g.push({op:"move",data:[e+(x?0:y()),t+(x?0:y())]}):g.push({op:"move",data:[e+(x?0:ot(h,a,l)),t+(x?0:ot(h,a,l))]}),o?g.push({op:"bcurveTo",data:[d+e+(r-e)*p+y(),m+t+(i-t)*p+y(),d+e+2*(r-e)*p+y(),m+t+2*(i-t)*p+y(),r+(x?0:y()),i+(x?0:y())]}):g.push({op:"bcurveTo",data:[d+e+(r-e)*p+b(),m+t+(i-t)*p+b(),d+e+2*(r-e)*p+b(),m+t+2*(i-t)*p+b(),r+(x?0:b()),i+(x?0:b())]}),g}function Xa(e,t,r){if(!e.length)return[];const i=[];i.push([e[0][0]+ot(t,r),e[0][1]+ot(t,r)]),i.push([e[0][0]+ot(t,r),e[0][1]+ot(t,r)]);for(let a=1;a<e.length;a++)i.push([e[a][0]+ot(t,r),e[a][1]+ot(t,r)]),a===e.length-1&&i.push([e[a][0]+ot(t,r),e[a][1]+ot(t,r)]);return Us(i,null,r)}function Us(e,t,r){const i=e.length,a=[];if(i>3){const s=[],o=1-r.curveTightness;a.push({op:"move",data:[e[1][0],e[1][1]]});for(let n=1;n+2<i;n++){const c=e[n];s[0]=[c[0],c[1]],s[1]=[c[0]+(o*e[n+1][0]-o*e[n-1][0])/6,c[1]+(o*e[n+1][1]-o*e[n-1][1])/6],s[2]=[e[n+1][0]+(o*e[n][0]-o*e[n+2][0])/6,e[n+1][1]+(o*e[n][1]-o*e[n+2][1])/6],s[3]=[e[n+1][0],e[n+1][1]],a.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(a.push({op:"move",data:[e[1][0],e[1][1]]}),a.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&a.push(...qo(e[0][0],e[0][1],e[1][0],e[1][1],r,!0,!0));return a}function Rh(e,t,r,i,a,s,o,n){const c=[],l=[];if(n.roughness===0){e/=4,l.push([t+i*Math.cos(-e),r+a*Math.sin(-e)]);for(let h=0;h<=2*Math.PI;h+=e){const u=[t+i*Math.cos(h),r+a*Math.sin(h)];c.push(u),l.push(u)}l.push([t+i*Math.cos(0),r+a*Math.sin(0)]),l.push([t+i*Math.cos(e),r+a*Math.sin(e)])}else{const h=ot(.5,n)-Math.PI/2;l.push([ot(s,n)+t+.9*i*Math.cos(h-e),ot(s,n)+r+.9*a*Math.sin(h-e)]);const u=2*Math.PI+h-.01;for(let p=h;p<u;p+=e){const d=[ot(s,n)+t+i*Math.cos(p),ot(s,n)+r+a*Math.sin(p)];c.push(d),l.push(d)}l.push([ot(s,n)+t+i*Math.cos(h+2*Math.PI+.5*o),ot(s,n)+r+a*Math.sin(h+2*Math.PI+.5*o)]),l.push([ot(s,n)+t+.98*i*Math.cos(h+o),ot(s,n)+r+.98*a*Math.sin(h+o)]),l.push([ot(s,n)+t+.9*i*Math.cos(h+.5*o),ot(s,n)+r+.9*a*Math.sin(h+.5*o)])}return[l,c]}function Ih(e,t,r,i,a,s,o,n,c){const l=s+ot(.1,c),h=[];h.push([ot(n,c)+t+.9*i*Math.cos(l-e),ot(n,c)+r+.9*a*Math.sin(l-e)]);for(let u=l;u<=o;u+=e)h.push([ot(n,c)+t+i*Math.cos(u),ot(n,c)+r+a*Math.sin(u)]);return h.push([t+i*Math.cos(o),r+a*Math.sin(o)]),h.push([t+i*Math.cos(o),r+a*Math.sin(o)]),Us(h,null,c)}function MS(e,t,r,i,a,s,o,n){const c=[],l=[n.maxRandomnessOffset||1,(n.maxRandomnessOffset||1)+.3];let h=[0,0];const u=n.disableMultiStroke?1:2,p=n.preserveVertices;for(let d=0;d<u;d++)d===0?c.push({op:"move",data:[o[0],o[1]]}):c.push({op:"move",data:[o[0]+(p?0:ot(l[0],n)),o[1]+(p?0:ot(l[0],n))]}),h=p?[a,s]:[a+ot(l[d],n),s+ot(l[d],n)],c.push({op:"bcurveTo",data:[e+ot(l[d],n),t+ot(l[d],n),r+ot(l[d],n),i+ot(l[d],n),h[0],h[1]]});return c}function Gi(e){return[...e]}function Ph(e,t=0){const r=e.length;if(r<3)throw new Error("A curve must have at least three points.");const i=[];if(r===3)i.push(Gi(e[0]),Gi(e[1]),Gi(e[2]),Gi(e[2]));else{const a=[];a.push(e[0],e[0]);for(let n=1;n<e.length;n++)a.push(e[n]),n===e.length-1&&a.push(e[n]);const s=[],o=1-t;i.push(Gi(a[0]));for(let n=1;n+2<a.length;n++){const c=a[n];s[0]=[c[0],c[1]],s[1]=[c[0]+(o*a[n+1][0]-o*a[n-1][0])/6,c[1]+(o*a[n+1][1]-o*a[n-1][1])/6],s[2]=[a[n+1][0]+(o*a[n][0]-o*a[n+2][0])/6,a[n+1][1]+(o*a[n][1]-o*a[n+2][1])/6],s[3]=[a[n+1][0],a[n+1][1]],i.push(s[1],s[2],s[3])}}return i}function ps(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function FS(e,t,r){const i=ps(t,r);if(i===0)return ps(e,t);let a=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/i;return a=Math.max(0,Math.min(1,a)),ps(e,Sr(t,r,a))}function Sr(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]}function Wo(e,t,r,i){const a=i||[];if(function(n,c){const l=n[c+0],h=n[c+1],u=n[c+2],p=n[c+3];let d=3*h[0]-2*l[0]-p[0];d*=d;let m=3*h[1]-2*l[1]-p[1];m*=m;let g=3*u[0]-2*p[0]-l[0];g*=g;let y=3*u[1]-2*p[1]-l[1];return y*=y,d<g&&(d=g),m<y&&(m=y),d+m}(e,t)<r){const n=e[t+0];a.length?(s=a[a.length-1],o=n,Math.sqrt(ps(s,o))>1&&a.push(n)):a.push(n),a.push(e[t+3])}else{const c=e[t+0],l=e[t+1],h=e[t+2],u=e[t+3],p=Sr(c,l,.5),d=Sr(l,h,.5),m=Sr(h,u,.5),g=Sr(p,d,.5),y=Sr(d,m,.5),b=Sr(g,y,.5);Wo([c,p,g,b],0,r,a),Wo([b,y,m,u],0,r,a)}var s,o;return a}function DS(e,t){return Gs(e,0,e.length,t)}function Gs(e,t,r,i,a){const s=a||[],o=e[t],n=e[r-1];let c=0,l=1;for(let h=t+1;h<r-1;++h){const u=FS(e[h],o,n);u>c&&(c=u,l=h)}return Math.sqrt(c)>i?(Gs(e,t,l+1,i,s),Gs(e,l,r,i,s)):(s.length||s.push(o),s.push(n)),s}function Kn(e,t=.15,r){const i=[],a=(e.length-1)/3;for(let s=0;s<a;s++)Wo(e,3*s,t,i);return r&&r>0?Gs(i,0,i.length,r):i}const be="none";class Vs{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,r,i){return{shape:t,sets:r||[],options:i||this.defaultOptions}}line(t,r,i,a,s){const o=this._o(s);return this._d("line",[im(t,r,i,a,o)],o)}rectangle(t,r,i,a,s){const o=this._o(s),n=[],c=LS(t,r,i,a,o);if(o.fill){const l=[[t,r],[t+i,r],[t+i,r+a],[t,r+a]];o.fillStyle==="solid"?n.push(Xn([l],o)):n.push(Qr([l],o))}return o.stroke!==be&&n.push(c),this._d("rectangle",n,o)}ellipse(t,r,i,a,s){const o=this._o(s),n=[],c=am(i,a,o),l=zo(t,r,o,c);if(o.fill)if(o.fillStyle==="solid"){const h=zo(t,r,o,c).opset;h.type="fillPath",n.push(h)}else n.push(Qr([l.estimatedPoints],o));return o.stroke!==be&&n.push(l.opset),this._d("ellipse",n,o)}circle(t,r,i,a){const s=this.ellipse(t,r,i,i,a);return s.shape="circle",s}linearPath(t,r){const i=this._o(r);return this._d("linearPath",[us(t,!1,i)],i)}arc(t,r,i,a,s,o,n=!1,c){const l=this._o(c),h=[],u=Dh(t,r,i,a,s,o,n,!0,l);if(n&&l.fill)if(l.fillStyle==="solid"){const p=Object.assign({},l);p.disableMultiStroke=!0;const d=Dh(t,r,i,a,s,o,!0,!1,p);d.type="fillPath",h.push(d)}else h.push(function(p,d,m,g,y,b,x){const k=p,C=d;let S=Math.abs(m/2),v=Math.abs(g/2);S+=ot(.01*S,x),v+=ot(.01*v,x);let _=y,R=b;for(;_<0;)_+=2*Math.PI,R+=2*Math.PI;R-_>2*Math.PI&&(_=0,R=2*Math.PI);const P=(R-_)/x.curveStepCount,$=[];for(let A=_;A<=R;A+=P)$.push([k+S*Math.cos(A),C+v*Math.sin(A)]);return $.push([k+S*Math.cos(R),C+v*Math.sin(R)]),$.push([k,C]),Qr([$],x)}(t,r,i,a,s,o,l));return l.stroke!==be&&h.push(u),this._d("arc",h,l)}curve(t,r){const i=this._o(r),a=[],s=Fh(t,i);if(i.fill&&i.fill!==be)if(i.fillStyle==="solid"){const o=Fh(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],n=t;if(n.length){const c=typeof n[0][0]=="number"?[n]:n;for(const l of c)l.length<3?o.push(...l):l.length===3?o.push(...Kn(Ph([l[0],l[0],l[1],l[2]]),10,(1+i.roughness)/2)):o.push(...Kn(Ph(l),10,(1+i.roughness)/2))}o.length&&a.push(Qr([o],i))}return i.stroke!==be&&a.push(s),this._d("curve",a,i)}polygon(t,r){const i=this._o(r),a=[],s=us(t,!0,i);return i.fill&&(i.fillStyle==="solid"?a.push(Xn([t],i)):a.push(Qr([t],i))),i.stroke!==be&&a.push(s),this._d("polygon",a,i)}path(t,r){const i=this._o(r),a=[];if(!t)return this._d("path",a,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==be,o=i.stroke!==be,n=!!(i.simplification&&i.simplification<1),c=function(h,u,p){const d=em(tm(Vl(h))),m=[];let g=[],y=[0,0],b=[];const x=()=>{b.length>=4&&g.push(...Kn(b,u)),b=[]},k=()=>{x(),g.length&&(m.push(g),g=[])};for(const{key:S,data:v}of d)switch(S){case"M":k(),y=[v[0],v[1]],g.push(y);break;case"L":x(),g.push([v[0],v[1]]);break;case"C":if(!b.length){const _=g.length?g[g.length-1]:y;b.push([_[0],_[1]])}b.push([v[0],v[1]]),b.push([v[2],v[3]]),b.push([v[4],v[5]]);break;case"Z":x(),g.push([y[0],y[1]])}if(k(),!p)return m;const C=[];for(const S of m){const v=DS(S,p);v.length&&C.push(v)}return C}(t,1,n?4-4*(i.simplification||1):(1+i.roughness)/2),l=$h(t,i);if(s)if(i.fillStyle==="solid")if(c.length===1){const h=$h(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));a.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else a.push(Xn(c,i));else a.push(Qr(c,i));return o&&(n?c.forEach(h=>{a.push(us(h,!1,i))}):a.push(l)),this._d("path",a,i)}opsToPath(t,r){let i="";for(const a of t.ops){const s=typeof r=="number"&&r>=0?a.data.map(o=>+o.toFixed(r)):a.data;switch(a.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `}}return i.trim()}toPaths(t){const r=t.sets||[],i=t.options||this.defaultOptions,a=[];for(const s of r){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:be};break;case"fillPath":o={d:this.opsToPath(s),stroke:be,strokeWidth:0,fill:i.fill||be};break;case"fillSketch":o=this.fillSketch(s,i)}o&&a.push(o)}return a}fillSketch(t,r){let i=r.fillWeight;return i<0&&(i=r.strokeWidth/2),{d:this.opsToPath(t),stroke:r.fill||be,strokeWidth:i,fill:be}}_mergedShape(t){return t.filter((r,i)=>i===0||r.op!=="move")}}class $S{constructor(t,r){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Vs(r)}draw(t){const r=t.sets||[],i=t.options||this.getDefaultOptions(),a=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of r)switch(o.type){case"path":a.save(),a.strokeStyle=i.stroke==="none"?"transparent":i.stroke,a.lineWidth=i.strokeWidth,i.strokeLineDash&&a.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(a.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(a,o,s),a.restore();break;case"fillPath":{a.save(),a.fillStyle=i.fill||"";const n=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(a,o,s,n),a.restore();break}case"fillSketch":this.fillSketch(a,o,i)}}fillSketch(t,r,i){let a=i.fillWeight;a<0&&(a=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=a,this._drawToContext(t,r,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,r,i,a="nonzero"){t.beginPath();for(const s of r.ops){const o=typeof i=="number"&&i>=0?s.data.map(n=>+n.toFixed(i)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1])}}r.type==="fillPath"?t.fill(a):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,r,i,a,s){const o=this.gen.line(t,r,i,a,s);return this.draw(o),o}rectangle(t,r,i,a,s){const o=this.gen.rectangle(t,r,i,a,s);return this.draw(o),o}ellipse(t,r,i,a,s){const o=this.gen.ellipse(t,r,i,a,s);return this.draw(o),o}circle(t,r,i,a){const s=this.gen.circle(t,r,i,a);return this.draw(s),s}linearPath(t,r){const i=this.gen.linearPath(t,r);return this.draw(i),i}polygon(t,r){const i=this.gen.polygon(t,r);return this.draw(i),i}arc(t,r,i,a,s,o,n=!1,c){const l=this.gen.arc(t,r,i,a,s,o,n,c);return this.draw(l),l}curve(t,r){const i=this.gen.curve(t,r);return this.draw(i),i}path(t,r){const i=this.gen.path(t,r);return this.draw(i),i}}const Ka="http://www.w3.org/2000/svg";class OS{constructor(t,r){this.svg=t,this.gen=new Vs(r)}draw(t){const r=t.sets||[],i=t.options||this.getDefaultOptions(),a=this.svg.ownerDocument||window.document,s=a.createElementNS(Ka,"g"),o=t.options.fixedDecimalPlaceDigits;for(const n of r){let c=null;switch(n.type){case"path":c=a.createElementNS(Ka,"path"),c.setAttribute("d",this.opsToPath(n,o)),c.setAttribute("stroke",i.stroke),c.setAttribute("stroke-width",i.strokeWidth+""),c.setAttribute("fill","none"),i.strokeLineDash&&c.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&c.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break;case"fillPath":c=a.createElementNS(Ka,"path"),c.setAttribute("d",this.opsToPath(n,o)),c.setAttribute("stroke","none"),c.setAttribute("stroke-width","0"),c.setAttribute("fill",i.fill||""),t.shape!=="curve"&&t.shape!=="polygon"||c.setAttribute("fill-rule","evenodd");break;case"fillSketch":c=this.fillSketch(a,n,i)}c&&s.appendChild(c)}return s}fillSketch(t,r,i){let a=i.fillWeight;a<0&&(a=i.strokeWidth/2);const s=t.createElementNS(Ka,"path");return s.setAttribute("d",this.opsToPath(r,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",a+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,r){return this.gen.opsToPath(t,r)}line(t,r,i,a,s){const o=this.gen.line(t,r,i,a,s);return this.draw(o)}rectangle(t,r,i,a,s){const o=this.gen.rectangle(t,r,i,a,s);return this.draw(o)}ellipse(t,r,i,a,s){const o=this.gen.ellipse(t,r,i,a,s);return this.draw(o)}circle(t,r,i,a){const s=this.gen.circle(t,r,i,a);return this.draw(s)}linearPath(t,r){const i=this.gen.linearPath(t,r);return this.draw(i)}polygon(t,r){const i=this.gen.polygon(t,r);return this.draw(i)}arc(t,r,i,a,s,o,n=!1,c){const l=this.gen.arc(t,r,i,a,s,o,n,c);return this.draw(l)}curve(t,r){const i=this.gen.curve(t,r);return this.draw(i)}path(t,r){const i=this.gen.path(t,r);return this.draw(i)}}var V={canvas:(e,t)=>new $S(e,t),svg:(e,t)=>new OS(e,t),generator:e=>new Vs(e),newSeed:()=>Vs.newSeed()},ut=f(async(e,t,r)=>{var u,p;let i;const a=t.useHtmlLabels||qt((u=kt())==null?void 0:u.htmlLabels);r?i=r:i="node default";const s=e.insert("g").attr("class",i).attr("id",t.domId||t.id),o=s.insert("g").attr("class","label").attr("style",le(t.labelStyle));let n;t.label===void 0?n="":n=typeof t.label=="string"?t.label:t.label[0];const c=await xr(o,Or(jr(n),kt()),{useHtmlLabels:a,width:t.width||((p=kt().flowchart)==null?void 0:p.wrappingWidth),cssClasses:"markdown-node-label",style:t.labelStyle,addSvgBackground:!!t.icon||!!t.img});let l=c.getBBox();const h=((t==null?void 0:t.padding)??0)/2;if(a){const d=c.children[0],m=bt(c),g=d.getElementsByTagName("img");if(g){const y=n.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(b=>new Promise(x=>{function k(){if(b.style.display="flex",b.style.flexDirection="column",y){const C=kt().fontSize?kt().fontSize:window.getComputedStyle(document.body).fontSize,S=5,[v=vu.fontSize]=mn(C),_=v*S+"px";b.style.minWidth=_,b.style.maxWidth=_}else b.style.width="100%";x(b)}f(k,"setupImage"),setTimeout(()=>{b.complete&&k()}),b.addEventListener("error",k),b.addEventListener("load",k)})))}l=d.getBoundingClientRect(),m.attr("width",l.width),m.attr("height",l.height)}return a?o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"):o.attr("transform","translate(0, "+-l.height/2+")"),t.centerLabel&&o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:l,halfPadding:h,label:o}},"labelHelper"),Zn=f(async(e,t,r)=>{var c,l,h,u,p,d;const i=r.useHtmlLabels||qt((l=(c=kt())==null?void 0:c.flowchart)==null?void 0:l.htmlLabels),a=e.insert("g").attr("class","label").attr("style",r.labelStyle||""),s=await xr(a,Or(jr(t),kt()),{useHtmlLabels:i,width:r.width||((u=(h=kt())==null?void 0:h.flowchart)==null?void 0:u.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let o=s.getBBox();const n=r.padding/2;if(qt((d=(p=kt())==null?void 0:p.flowchart)==null?void 0:d.htmlLabels)){const m=s.children[0],g=bt(s);o=m.getBoundingClientRect(),g.attr("width",o.width),g.attr("height",o.height)}return i?a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):a.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&a.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),a.insert("rect",":first-child"),{shapeSvg:e,bbox:o,halfPadding:n,label:a}},"insertLabel"),Q=f((e,t)=>{const r=t.node().getBBox();e.width=r.width,e.height=r.height},"updateNodeBounds"),lt=f((e,t)=>(e.look==="handDrawn"?"rough-node":"node")+" "+e.cssClasses+" "+(t||""),"getNodeClasses");function xt(e){const t=e.map((r,i)=>`${i===0?"M":"L"}${r.x},${r.y}`);return t.push("Z"),t.join(" ")}f(xt,"createPathFromPoints");function yr(e,t,r,i,a,s){const o=[],c=r-e,l=i-t,h=c/s,u=2*Math.PI/h,p=t+l/2;for(let d=0;d<=50;d++){const m=d/50,g=e+m*c,y=p+a*Math.sin(u*(g-e));o.push({x:g,y})}return o}f(yr,"generateFullSineWavePoints");function Xl(e,t,r,i,a,s){const o=[],n=a*Math.PI/180,h=(s*Math.PI/180-n)/(i-1);for(let u=0;u<i;u++){const p=n+u*h,d=e+r*Math.cos(p),m=t+r*Math.sin(p);o.push({x:-d,y:-m})}return o}f(Xl,"generateCirclePoints");var RS=f((e,t)=>{var r=e.x,i=e.y,a=t.x-r,s=t.y-i,o=e.width/2,n=e.height/2,c,l;return Math.abs(s)*o>Math.abs(a)*n?(s<0&&(n=-n),c=s===0?0:n*a/s,l=n):(a<0&&(o=-o),c=o,l=a===0?0:o*s/a),{x:r+c,y:i+l}},"intersectRect"),Ai=RS;function nm(e,t){t&&e.attr("style",t)}f(nm,"applyStyle");async function om(e){const t=bt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=t.append("xhtml:div");let i=e.label;e.label&&xi(e.label)&&(i=await el(e.label.replace(Ti.lineBreakRegex,`
`),kt()));const a=e.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+a+'" '+(e.labelStyle?'style="'+e.labelStyle+'"':"")+">"+i+"</span>"),nm(r,e.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}f(om,"addHtmlLabel");var IS=f(async(e,t,r,i)=>{let a=e||"";if(typeof a=="object"&&(a=a[0]),qt(kt().flowchart.htmlLabels)){a=a.replace(/\\n|\n/g,"<br />"),O.info("vertexText"+a);const s={isNode:i,label:jr(a).replace(/fa[blrs]?:fa-[\w-]+/g,n=>`<i class='${n.replace(":"," ")}'></i>`),labelStyle:t&&t.replace("fill:","color:")};return await om(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",t.replace("color:","fill:"));let o=[];typeof a=="string"?o=a.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(a)?o=a:o=[];for(const n of o){const c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","0"),r?c.setAttribute("class","title-row"):c.setAttribute("class","row"),c.textContent=n.trim(),s.appendChild(c)}return s}},"createLabel"),Mr=IS,lr=f((e,t,r,i,a)=>["M",e+a,t,"H",e+r-a,"A",a,a,0,0,1,e+r,t+a,"V",t+i-a,"A",a,a,0,0,1,e+r-a,t+i,"H",e+a,"A",a,a,0,0,1,e,t+i-a,"V",t+a,"A",a,a,0,0,1,e+a,t,"Z"].join(" "),"createRoundedRectPathD"),PS=f(e=>{const{handDrawnSeed:t}=kt();return{fill:e,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:e,seed:t}},"solidStateFill"),Li=f(e=>{const t=NS([...e.cssCompiledStyles||[],...e.cssStyles||[]]);return{stylesMap:t,stylesArray:[...t]}},"compileStyles"),NS=f(e=>{const t=new Map;return e.forEach(r=>{const[i,a]=r.split(":");t.set(i.trim(),a==null?void 0:a.trim())}),t},"styles2Map"),lm=f(e=>e==="color"||e==="font-size"||e==="font-family"||e==="font-weight"||e==="font-style"||e==="text-decoration"||e==="text-align"||e==="text-transform"||e==="line-height"||e==="letter-spacing"||e==="word-spacing"||e==="text-shadow"||e==="text-overflow"||e==="white-space"||e==="word-wrap"||e==="word-break"||e==="overflow-wrap"||e==="hyphens","isLabelStyle"),J=f(e=>{const{stylesArray:t}=Li(e),r=[],i=[],a=[],s=[];return t.forEach(o=>{const n=o[0];lm(n)?r.push(o.join(":")+" !important"):(i.push(o.join(":")+" !important"),n.includes("stroke")&&a.push(o.join(":")+" !important"),n==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:i.join(";"),stylesArray:t,borderStyles:a,backgroundStyles:s}},"styles2String"),K=f((e,t)=>{var c;const{themeVariables:r,handDrawnSeed:i}=kt(),{nodeBorder:a,mainBkg:s}=r,{stylesMap:o}=Li(e);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||a,seed:i,strokeWidth:((c=o.get("stroke-width"))==null?void 0:c.replace("px",""))||1.3,fillLineDash:[0,0]},t)},"userNodeOverrides"),cm=f(async(e,t)=>{O.info("Creating subgraph rect for ",t.id,t);const r=kt(),{themeVariables:i,handDrawnSeed:a}=r,{clusterBkg:s,clusterBorder:o}=i,{labelStyles:n,nodeStyles:c,borderStyles:l,backgroundStyles:h}=J(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),p=qt(r.flowchart.htmlLabels),d=u.insert("g").attr("class","cluster-label "),m=await xr(d,t.label,{style:t.labelStyle,useHtmlLabels:p,isNode:!0});let g=m.getBBox();if(qt(r.flowchart.htmlLabels)){const _=m.children[0],R=bt(m);g=_.getBoundingClientRect(),R.attr("width",g.width),R.attr("height",g.height)}const y=t.width<=g.width+t.padding?g.width+t.padding:t.width;t.width<=g.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height,x=t.x-y/2,k=t.y-b/2;O.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const _=V.svg(u),R=K(t,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:a}),P=_.path(lr(x,k,y,b,0),R);C=u.insert(()=>(O.debug("Rough node insert CXC",P),P),":first-child"),C.select("path:nth-child(2)").attr("style",l.join(";")),C.select("path").attr("style",h.join(";").replace("fill","stroke"))}else C=u.insert("rect",":first-child"),C.attr("style",c).attr("rx",t.rx).attr("ry",t.ry).attr("x",x).attr("y",k).attr("width",y).attr("height",b);const{subGraphTitleTopMargin:S}=fl(r);if(d.attr("transform",`translate(${t.x-g.width/2}, ${t.y-t.height/2+S})`),n){const _=d.select("span");_&&_.attr("style",n)}const v=C.node().getBBox();return t.offsetX=0,t.width=v.width,t.height=v.height,t.offsetY=g.height-t.padding/2,t.intersect=function(_){return Ai(t,_)},{cluster:u,labelBBox:g}},"rect"),zS=f((e,t)=>{const r=e.insert("g").attr("class","note-cluster").attr("id",t.id),i=r.insert("rect",":first-child"),a=0*t.padding,s=a/2;i.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-s).attr("y",t.y-t.height/2-s).attr("width",t.width+a).attr("height",t.height+a).attr("fill","none");const o=i.node().getBBox();return t.width=o.width,t.height=o.height,t.intersect=function(n){return Ai(t,n)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),qS=f(async(e,t)=>{const r=kt(),{themeVariables:i,handDrawnSeed:a}=r,{altBackground:s,compositeBackground:o,compositeTitleBackground:n,nodeBorder:c}=i,l=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-id",t.id).attr("data-look",t.look),h=l.insert("g",":first-child"),u=l.insert("g").attr("class","cluster-label");let p=l.append("rect");const d=u.node().appendChild(await Mr(t.label,t.labelStyle,void 0,!0));let m=d.getBBox();if(qt(r.flowchart.htmlLabels)){const P=d.children[0],$=bt(d);m=P.getBoundingClientRect(),$.attr("width",m.width),$.attr("height",m.height)}const g=0*t.padding,y=g/2,b=(t.width<=m.width+t.padding?m.width+t.padding:t.width)+g;t.width<=m.width+t.padding?t.diff=(b-t.width)/2-t.padding:t.diff=-t.padding;const x=t.height+g,k=t.height+g-m.height-6,C=t.x-b/2,S=t.y-x/2;t.width=b;const v=t.y-t.height/2-y+m.height+2;let _;if(t.look==="handDrawn"){const P=t.cssClasses.includes("statediagram-cluster-alt"),$=V.svg(l),A=t.rx||t.ry?$.path(lr(C,S,b,x,10),{roughness:.7,fill:n,fillStyle:"solid",stroke:c,seed:a}):$.rectangle(C,S,b,x,{seed:a});_=l.insert(()=>A,":first-child");const z=$.rectangle(C,v,b,k,{fill:P?s:o,fillStyle:P?"hachure":"solid",stroke:c,seed:a});_=l.insert(()=>A,":first-child"),p=l.insert(()=>z)}else _=h.insert("rect",":first-child"),_.attr("class","outer").attr("x",C).attr("y",S).attr("width",b).attr("height",x).attr("data-look",t.look),p.attr("class","inner").attr("x",C).attr("y",v).attr("width",b).attr("height",k);u.attr("transform",`translate(${t.x-m.width/2}, ${S+1-(qt(r.flowchart.htmlLabels)?0:3)})`);const R=_.node().getBBox();return t.height=R.height,t.offsetX=0,t.offsetY=m.height-t.padding/2,t.labelBBox=m,t.intersect=function(P){return Ai(t,P)},{cluster:l,labelBBox:m}},"roundedWithTitle"),WS=f(async(e,t)=>{O.info("Creating subgraph rect for ",t.id,t);const r=kt(),{themeVariables:i,handDrawnSeed:a}=r,{clusterBkg:s,clusterBorder:o}=i,{labelStyles:n,nodeStyles:c,borderStyles:l,backgroundStyles:h}=J(t),u=e.insert("g").attr("class","cluster "+t.cssClasses).attr("id",t.id).attr("data-look",t.look),p=qt(r.flowchart.htmlLabels),d=u.insert("g").attr("class","cluster-label "),m=await xr(d,t.label,{style:t.labelStyle,useHtmlLabels:p,isNode:!0,width:t.width});let g=m.getBBox();if(qt(r.flowchart.htmlLabels)){const _=m.children[0],R=bt(m);g=_.getBoundingClientRect(),R.attr("width",g.width),R.attr("height",g.height)}const y=t.width<=g.width+t.padding?g.width+t.padding:t.width;t.width<=g.width+t.padding?t.diff=(y-t.width)/2-t.padding:t.diff=-t.padding;const b=t.height,x=t.x-y/2,k=t.y-b/2;O.trace("Data ",t,JSON.stringify(t));let C;if(t.look==="handDrawn"){const _=V.svg(u),R=K(t,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:a}),P=_.path(lr(x,k,y,b,t.rx),R);C=u.insert(()=>(O.debug("Rough node insert CXC",P),P),":first-child"),C.select("path:nth-child(2)").attr("style",l.join(";")),C.select("path").attr("style",h.join(";").replace("fill","stroke"))}else C=u.insert("rect",":first-child"),C.attr("style",c).attr("rx",t.rx).attr("ry",t.ry).attr("x",x).attr("y",k).attr("width",y).attr("height",b);const{subGraphTitleTopMargin:S}=fl(r);if(d.attr("transform",`translate(${t.x-g.width/2}, ${t.y-t.height/2+S})`),n){const _=d.select("span");_&&_.attr("style",n)}const v=C.node().getBBox();return t.offsetX=0,t.width=v.width,t.height=v.height,t.offsetY=g.height-t.padding/2,t.intersect=function(_){return Ai(t,_)},{cluster:u,labelBBox:g}},"kanbanSection"),HS=f((e,t)=>{const r=kt(),{themeVariables:i,handDrawnSeed:a}=r,{nodeBorder:s}=i,o=e.insert("g").attr("class",t.cssClasses).attr("id",t.id).attr("data-look",t.look),n=o.insert("g",":first-child"),c=0*t.padding,l=t.width+c;t.diff=-t.padding;const h=t.height+c,u=t.x-l/2,p=t.y-h/2;t.width=l;let d;if(t.look==="handDrawn"){const y=V.svg(o).rectangle(u,p,l,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:a});d=o.insert(()=>y,":first-child")}else d=n.insert("rect",":first-child"),d.attr("class","divider").attr("x",u).attr("y",p).attr("width",l).attr("height",h).attr("data-look",t.look);const m=d.node().getBBox();return t.height=m.height,t.offsetX=0,t.offsetY=0,t.intersect=function(g){return Ai(t,g)},{cluster:o,labelBBox:{}}},"divider"),jS=cm,YS={rect:cm,squareRect:jS,roundedWithTitle:qS,noteGroup:zS,divider:HS,kanbanSection:WS},hm=new Map,US=f(async(e,t)=>{const r=t.shape||"rect",i=await YS[r](e,t);return hm.set(t.id,i),i},"insertCluster"),xL=f(()=>{hm=new Map},"clear");function um(e,t){return e.intersect(t)}f(um,"intersectNode");var GS=um;function pm(e,t,r,i){var a=e.x,s=e.y,o=a-i.x,n=s-i.y,c=Math.sqrt(t*t*n*n+r*r*o*o),l=Math.abs(t*r*o/c);i.x<a&&(l=-l);var h=Math.abs(t*r*n/c);return i.y<s&&(h=-h),{x:a+l,y:s+h}}f(pm,"intersectEllipse");var dm=pm;function fm(e,t,r){return dm(e,t,t,r)}f(fm,"intersectCircle");var VS=fm;function mm(e,t,r,i){var a,s,o,n,c,l,h,u,p,d,m,g,y,b,x;if(a=t.y-e.y,o=e.x-t.x,c=t.x*e.y-e.x*t.y,p=a*r.x+o*r.y+c,d=a*i.x+o*i.y+c,!(p!==0&&d!==0&&Ho(p,d))&&(s=i.y-r.y,n=r.x-i.x,l=i.x*r.y-r.x*i.y,h=s*e.x+n*e.y+l,u=s*t.x+n*t.y+l,!(h!==0&&u!==0&&Ho(h,u))&&(m=a*n-s*o,m!==0)))return g=Math.abs(m/2),y=o*l-n*c,b=y<0?(y-g)/m:(y+g)/m,y=s*c-a*l,x=y<0?(y-g)/m:(y+g)/m,{x:b,y:x}}f(mm,"intersectLine");function Ho(e,t){return e*t>0}f(Ho,"sameSign");var XS=mm;function gm(e,t,r){let i=e.x,a=e.y,s=[],o=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(h){o=Math.min(o,h.x),n=Math.min(n,h.y)}):(o=Math.min(o,t.x),n=Math.min(n,t.y));let c=i-e.width/2-o,l=a-e.height/2-n;for(let h=0;h<t.length;h++){let u=t[h],p=t[h<t.length-1?h+1:0],d=XS(e,r,{x:c+u.x,y:l+u.y},{x:c+p.x,y:l+p.y});d&&s.push(d)}return s.length?(s.length>1&&s.sort(function(h,u){let p=h.x-r.x,d=h.y-r.y,m=Math.sqrt(p*p+d*d),g=u.x-r.x,y=u.y-r.y,b=Math.sqrt(g*g+y*y);return m<b?-1:m===b?0:1}),s[0]):e}f(gm,"intersectPolygon");var KS=gm,U={node:GS,circle:VS,ellipse:dm,polygon:KS,rect:Ai};function ym(e,t){const{labelStyles:r}=J(t);t.labelStyle=r;const i=lt(t);let a=i;i||(a="anchor");const s=e.insert("g").attr("class",a).attr("id",t.domId||t.id),o=1,{cssStyles:n}=t,c=V.svg(s),l=K(t,{fill:"black",stroke:"none",fillStyle:"solid"});t.look!=="handDrawn"&&(l.roughness=0);const h=c.circle(0,0,o*2,l),u=s.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",le(n)),Q(t,u),t.intersect=function(p){return O.info("Circle intersect",t,o,p),U.circle(t,o,p)},s}f(ym,"anchor");function jo(e,t,r,i,a,s,o){const c=(e+r)/2,l=(t+i)/2,h=Math.atan2(i-t,r-e),u=(r-e)/2,p=(i-t)/2,d=u/a,m=p/s,g=Math.sqrt(d**2+m**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const y=Math.sqrt(1-g**2),b=c+y*s*Math.sin(h)*(o?-1:1),x=l-y*a*Math.cos(h)*(o?-1:1),k=Math.atan2((t-x)/s,(e-b)/a);let S=Math.atan2((i-x)/s,(r-b)/a)-k;o&&S<0&&(S+=2*Math.PI),!o&&S>0&&(S-=2*Math.PI);const v=[];for(let _=0;_<20;_++){const R=_/19,P=k+R*S,$=b+a*Math.cos(P),A=x+s*Math.sin(P);v.push({x:$,y:A})}return v}f(jo,"generateArcPoints");async function bm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=s.width+t.padding+20,n=s.height+t.padding,c=n/2,l=c/(2.5+n/50),{cssStyles:h}=t,u=[{x:o/2,y:-n/2},{x:-o/2,y:-n/2},...jo(-o/2,-n/2,-o/2,n/2,l,c,!1),{x:o/2,y:n/2},...jo(o/2,n/2,o/2,-n/2,l,c,!0)],p=V.svg(a),d=K(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=xt(u),g=p.path(m,d),y=a.insert(()=>g,":first-child");return y.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(${l/2}, 0)`),Q(t,y),t.intersect=function(b){return U.polygon(t,u,b)},a}f(bm,"bowTieRect");function cr(e,t,r,i){return e.insert("polygon",":first-child").attr("points",i.map(function(a){return a.x+","+a.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+r/2+")")}f(cr,"insertPolygonShape");async function xm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=s.height+t.padding,n=12,c=s.width+t.padding+n,l=0,h=c,u=-o,p=0,d=[{x:l+n,y:u},{x:h,y:u},{x:h,y:p},{x:l,y:p},{x:l,y:u+n},{x:l+n,y:u}];let m;const{cssStyles:g}=t;if(t.look==="handDrawn"){const y=V.svg(a),b=K(t,{}),x=xt(d),k=y.path(x,b);m=a.insert(()=>k,":first-child").attr("transform",`translate(${-c/2}, ${o/2})`),g&&m.attr("style",g)}else m=cr(a,c,o,d);return i&&m.attr("style",i),Q(t,m),t.intersect=function(y){return U.polygon(t,d,y)},a}f(xm,"card");function vm(e,t){const{nodeStyles:r}=J(t);t.label="";const i=e.insert("g").attr("class",lt(t)).attr("id",t.domId??t.id),{cssStyles:a}=t,s=Math.max(28,t.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],n=V.svg(i),c=K(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const l=xt(o),h=n.path(l,c),u=i.insert(()=>h,":first-child");return a&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",a),r&&t.look!=="handDrawn"&&u.selectAll("path").attr("style",r),t.width=28,t.height=28,t.intersect=function(p){return U.polygon(t,o,p)},i}f(vm,"choice");async function km(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,halfPadding:o}=await ut(e,t,lt(t)),n=s.width/2+o;let c;const{cssStyles:l}=t;if(t.look==="handDrawn"){const h=V.svg(a),u=K(t,{}),p=h.circle(0,0,n*2,u);c=a.insert(()=>p,":first-child"),c.attr("class","basic label-container").attr("style",le(l))}else c=a.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",n).attr("cx",0).attr("cy",0);return Q(t,c),t.intersect=function(h){return O.info("Circle intersect",t,n,h),U.circle(t,n,h)},a}f(km,"circle");function _m(e){const t=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),i=e*2,a={x:i/2*t,y:i/2*r},s={x:-(i/2)*t,y:i/2*r},o={x:-(i/2)*t,y:-(i/2)*r},n={x:i/2*t,y:-(i/2)*r};return`M ${s.x},${s.y} L ${n.x},${n.y}
                   M ${a.x},${a.y} L ${o.x},${o.y}`}f(_m,"createLine");function wm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r,t.label="";const a=e.insert("g").attr("class",lt(t)).attr("id",t.domId??t.id),s=Math.max(30,(t==null?void 0:t.width)??0),{cssStyles:o}=t,n=V.svg(a),c=K(t,{});t.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const l=n.circle(0,0,s*2,c),h=_m(s),u=n.path(h,c),p=a.insert(()=>l,":first-child");return p.insert(()=>u),o&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",o),i&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",i),Q(t,p),t.intersect=function(d){return O.info("crossedCircle intersect",t,{radius:s,point:d}),U.circle(t,s,d)},a}f(wm,"crossedCircle");function Ke(e,t,r,i=100,a=0,s=180){const o=[],n=a*Math.PI/180,h=(s*Math.PI/180-n)/(i-1);for(let u=0;u<i;u++){const p=n+u*h,d=e+r*Math.cos(p),m=t+r*Math.sin(p);o.push({x:-d,y:-m})}return o}f(Ke,"generateCirclePoints");async function Cm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=s.width+(t.padding??0),c=s.height+(t.padding??0),l=Math.max(5,c*.1),{cssStyles:h}=t,u=[...Ke(n/2,-c/2,l,30,-90,0),{x:-n/2-l,y:l},...Ke(n/2+l*2,-l,l,20,-180,-270),...Ke(n/2+l*2,l,l,20,-90,-180),{x:-n/2-l,y:-c/2},...Ke(n/2,c/2,l,20,0,90)],p=[{x:n/2,y:-c/2-l},{x:-n/2,y:-c/2-l},...Ke(n/2,-c/2,l,20,-90,0),{x:-n/2-l,y:-l},...Ke(n/2+n*.1,-l,l,20,-180,-270),...Ke(n/2+n*.1,l,l,20,-90,-180),{x:-n/2-l,y:c/2},...Ke(n/2,c/2,l,20,0,90),{x:-n/2,y:c/2+l},{x:n/2,y:c/2+l}],d=V.svg(a),m=K(t,{fill:"none"});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=xt(u).replace("Z",""),b=d.path(y,m),x=xt(p),k=d.path(x,{...m}),C=a.insert("g",":first-child");return C.insert(()=>k,":first-child").attr("stroke-opacity",0),C.insert(()=>b,":first-child"),C.attr("class","text"),h&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${l}, 0)`),o.attr("transform",`translate(${-n/2+l-(s.x-(s.left??0))},${-c/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Q(t,C),t.intersect=function(S){return U.polygon(t,p,S)},a}f(Cm,"curlyBraceLeft");function Ze(e,t,r,i=100,a=0,s=180){const o=[],n=a*Math.PI/180,h=(s*Math.PI/180-n)/(i-1);for(let u=0;u<i;u++){const p=n+u*h,d=e+r*Math.cos(p),m=t+r*Math.sin(p);o.push({x:d,y:m})}return o}f(Ze,"generateCirclePoints");async function Sm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=s.width+(t.padding??0),c=s.height+(t.padding??0),l=Math.max(5,c*.1),{cssStyles:h}=t,u=[...Ze(n/2,-c/2,l,20,-90,0),{x:n/2+l,y:-l},...Ze(n/2+l*2,-l,l,20,-180,-270),...Ze(n/2+l*2,l,l,20,-90,-180),{x:n/2+l,y:c/2},...Ze(n/2,c/2,l,20,0,90)],p=[{x:-n/2,y:-c/2-l},{x:n/2,y:-c/2-l},...Ze(n/2,-c/2,l,20,-90,0),{x:n/2+l,y:-l},...Ze(n/2+l*2,-l,l,20,-180,-270),...Ze(n/2+l*2,l,l,20,-90,-180),{x:n/2+l,y:c/2},...Ze(n/2,c/2,l,20,0,90),{x:n/2,y:c/2+l},{x:-n/2,y:c/2+l}],d=V.svg(a),m=K(t,{fill:"none"});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=xt(u).replace("Z",""),b=d.path(y,m),x=xt(p),k=d.path(x,{...m}),C=a.insert("g",":first-child");return C.insert(()=>k,":first-child").attr("stroke-opacity",0),C.insert(()=>b,":first-child"),C.attr("class","text"),h&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${-l}, 0)`),o.attr("transform",`translate(${-n/2+(t.padding??0)/2-(s.x-(s.left??0))},${-c/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Q(t,C),t.intersect=function(S){return U.polygon(t,p,S)},a}f(Sm,"curlyBraceRight");function Ut(e,t,r,i=100,a=0,s=180){const o=[],n=a*Math.PI/180,h=(s*Math.PI/180-n)/(i-1);for(let u=0;u<i;u++){const p=n+u*h,d=e+r*Math.cos(p),m=t+r*Math.sin(p);o.push({x:-d,y:-m})}return o}f(Ut,"generateCirclePoints");async function Tm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=s.width+(t.padding??0),c=s.height+(t.padding??0),l=Math.max(5,c*.1),{cssStyles:h}=t,u=[...Ut(n/2,-c/2,l,30,-90,0),{x:-n/2-l,y:l},...Ut(n/2+l*2,-l,l,20,-180,-270),...Ut(n/2+l*2,l,l,20,-90,-180),{x:-n/2-l,y:-c/2},...Ut(n/2,c/2,l,20,0,90)],p=[...Ut(-n/2+l+l/2,-c/2,l,20,-90,-180),{x:n/2-l/2,y:l},...Ut(-n/2-l/2,-l,l,20,0,90),...Ut(-n/2-l/2,l,l,20,-90,0),{x:n/2-l/2,y:-l},...Ut(-n/2+l+l/2,c/2,l,30,-180,-270)],d=[{x:n/2,y:-c/2-l},{x:-n/2,y:-c/2-l},...Ut(n/2,-c/2,l,20,-90,0),{x:-n/2-l,y:-l},...Ut(n/2+l*2,-l,l,20,-180,-270),...Ut(n/2+l*2,l,l,20,-90,-180),{x:-n/2-l,y:c/2},...Ut(n/2,c/2,l,20,0,90),{x:-n/2,y:c/2+l},{x:n/2-l-l/2,y:c/2+l},...Ut(-n/2+l+l/2,-c/2,l,20,-90,-180),{x:n/2-l/2,y:l},...Ut(-n/2-l/2,-l,l,20,0,90),...Ut(-n/2-l/2,l,l,20,-90,0),{x:n/2-l/2,y:-l},...Ut(-n/2+l+l/2,c/2,l,30,-180,-270)],m=V.svg(a),g=K(t,{fill:"none"});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=xt(u).replace("Z",""),x=m.path(b,g),C=xt(p).replace("Z",""),S=m.path(C,g),v=xt(d),_=m.path(v,{...g}),R=a.insert("g",":first-child");return R.insert(()=>_,":first-child").attr("stroke-opacity",0),R.insert(()=>x,":first-child"),R.insert(()=>S,":first-child"),R.attr("class","text"),h&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",h),i&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",i),R.attr("transform",`translate(${l-l/4}, 0)`),o.attr("transform",`translate(${-n/2+(t.padding??0)/2-(s.x-(s.left??0))},${-c/2+(t.padding??0)/2-(s.y-(s.top??0))})`),Q(t,R),t.intersect=function(P){return U.polygon(t,d,P)},a}f(Tm,"curlyBraces");async function Bm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=80,n=20,c=Math.max(o,(s.width+(t.padding??0)*2)*1.25,(t==null?void 0:t.width)??0),l=Math.max(n,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=l/2,{cssStyles:u}=t,p=V.svg(a),d=K(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=c,g=l,y=m-h,b=g/4,x=[{x:y,y:0},{x:b,y:0},{x:0,y:g/2},{x:b,y:g},{x:y,y:g},...Xl(-y,-g/2,h,50,270,90)],k=xt(x),C=p.path(k,d),S=a.insert(()=>C,":first-child");return S.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&S.selectChildren("path").attr("style",i),S.attr("transform",`translate(${-c/2}, ${-l/2})`),Q(t,S),t.intersect=function(v){return U.polygon(t,x,v)},a}f(Bm,"curvedTrapezoid");var ZS=f((e,t,r,i,a,s)=>[`M${e},${t+s}`,`a${a},${s} 0,0,0 ${r},0`,`a${a},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${s} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createCylinderPathD"),QS=f((e,t,r,i,a,s)=>[`M${e},${t+s}`,`M${e+r},${t+s}`,`a${a},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${s} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createOuterCylinderPathD"),JS=f((e,t,r,i,a,s)=>[`M${e-r/2},${-i/2}`,`a${a},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Em(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+t.padding,t.width??0),c=n/2,l=c/(2.5+n/50),h=Math.max(s.height+l+t.padding,t.height??0);let u;const{cssStyles:p}=t;if(t.look==="handDrawn"){const d=V.svg(a),m=QS(0,0,n,h,c,l),g=JS(0,l,n,h,c,l),y=d.path(m,K(t,{})),b=d.path(g,K(t,{fill:"none"}));u=a.insert(()=>b,":first-child"),u=a.insert(()=>y,":first-child"),u.attr("class","basic label-container"),p&&u.attr("style",p)}else{const d=ZS(0,0,n,h,c,l);u=a.insert("path",":first-child").attr("d",d).attr("class","basic label-container").attr("style",le(p)).attr("style",i)}return u.attr("label-offset-y",l),u.attr("transform",`translate(${-n/2}, ${-(h/2+l)})`),Q(t,u),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(t.padding??0)/1.5-(s.y-(s.top??0))})`),t.intersect=function(d){const m=U.rect(t,d),g=m.x-(t.x??0);if(c!=0&&(Math.abs(g)<(t.width??0)/2||Math.abs(g)==(t.width??0)/2&&Math.abs(m.y-(t.y??0))>(t.height??0)/2-l)){let y=l*l*(1-g*g/(c*c));y>0&&(y=Math.sqrt(y)),y=l-y,d.y-(t.y??0)>0&&(y=-y),m.y+=y}return m},a}f(Em,"cylinder");async function Am(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=s.width+t.padding,c=s.height+t.padding,l=c*.2,h=-n/2,u=-c/2-l/2,{cssStyles:p}=t,d=V.svg(a),m=K(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:h,y:u+l},{x:-h,y:u+l},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+l}],y=d.polygon(g.map(x=>[x.x,x.y]),m),b=a.insert(()=>y,":first-child");return b.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),o.attr("transform",`translate(${h+(t.padding??0)/2-(s.x-(s.left??0))}, ${u+l+(t.padding??0)/2-(s.y-(s.top??0))})`),Q(t,b),t.intersect=function(x){return U.rect(t,x)},a}f(Am,"dividedRectangle");async function Lm(e,t){var p,d;const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,halfPadding:o}=await ut(e,t,lt(t)),c=s.width/2+o+5,l=s.width/2+o;let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const m=V.svg(a),g=K(t,{roughness:.2,strokeWidth:2.5}),y=K(t,{roughness:.2,strokeWidth:1.5}),b=m.circle(0,0,c*2,g),x=m.circle(0,0,l*2,y);h=a.insert("g",":first-child"),h.attr("class",le(t.cssClasses)).attr("style",le(u)),(p=h.node())==null||p.appendChild(b),(d=h.node())==null||d.appendChild(x)}else{h=a.insert("g",":first-child");const m=h.insert("circle",":first-child"),g=h.insert("circle");h.attr("class","basic label-container").attr("style",i),m.attr("class","outer-circle").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0),g.attr("class","inner-circle").attr("style",i).attr("r",l).attr("cx",0).attr("cy",0)}return Q(t,h),t.intersect=function(m){return O.info("DoubleCircle intersect",t,c,m),U.circle(t,c,m)},a}f(Lm,"doublecircle");function Mm(e,t,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:a}=J(t);t.label="",t.labelStyle=i;const s=e.insert("g").attr("class",lt(t)).attr("id",t.domId??t.id),o=7,{cssStyles:n}=t,c=V.svg(s),{nodeBorder:l}=r,h=K(t,{fillStyle:"solid"});t.look!=="handDrawn"&&(h.roughness=0);const u=c.circle(0,0,o*2,h),p=s.insert(()=>u,":first-child");return p.selectAll("path").attr("style",`fill: ${l} !important;`),n&&n.length>0&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",n),a&&t.look!=="handDrawn"&&p.selectAll("path").attr("style",a),Q(t,p),t.intersect=function(d){return O.info("filledCircle intersect",t,{radius:o,point:d}),U.circle(t,o,d)},s}f(Mm,"filledCircle");async function Fm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=s.width+(t.padding??0),c=n+s.height,l=n+s.height,h=[{x:0,y:-c},{x:l,y:-c},{x:l/2,y:0}],{cssStyles:u}=t,p=V.svg(a),d=K(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=xt(h),g=p.path(m,d),y=a.insert(()=>g,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return u&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",i),t.width=n,t.height=c,Q(t,y),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-c/2+(t.padding??0)/2+(s.y-(s.top??0))})`),t.intersect=function(b){return O.info("Triangle intersect",t,h,b),U.polygon(t,h,b)},a}f(Fm,"flippedTriangle");function Dm(e,t,{dir:r,config:{state:i,themeVariables:a}}){const{nodeStyles:s}=J(t);t.label="";const o=e.insert("g").attr("class",lt(t)).attr("id",t.domId??t.id),{cssStyles:n}=t;let c=Math.max(70,(t==null?void 0:t.width)??0),l=Math.max(10,(t==null?void 0:t.height)??0);r==="LR"&&(c=Math.max(10,(t==null?void 0:t.width)??0),l=Math.max(70,(t==null?void 0:t.height)??0));const h=-1*c/2,u=-1*l/2,p=V.svg(o),d=K(t,{stroke:a.lineColor,fill:a.lineColor});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=p.rectangle(h,u,c,l,d),g=o.insert(()=>m,":first-child");n&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",n),s&&t.look!=="handDrawn"&&g.selectAll("path").attr("style",s),Q(t,g);const y=(i==null?void 0:i.padding)??0;return t.width&&t.height&&(t.width+=y/2||0,t.height+=y/2||0),t.intersect=function(b){return U.rect(t,b)},o}f(Dm,"forkJoin");async function $m(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const a=80,s=50,{shapeSvg:o,bbox:n}=await ut(e,t,lt(t)),c=Math.max(a,n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s,n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=l/2,{cssStyles:u}=t,p=V.svg(o),d=K(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=[{x:-c/2,y:-l/2},{x:c/2-h,y:-l/2},...Xl(-c/2+h,0,h,50,90,270),{x:c/2-h,y:l/2},{x:-c/2,y:l/2}],g=xt(m),y=p.path(g,d),b=o.insert(()=>y,":first-child");return b.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),Q(t,b),t.intersect=function(x){return O.info("Pill intersect",t,{radius:h,point:x}),U.polygon(t,m,x)},o}f($m,"halfRoundedRectangle");var tT=f((e,t,r,i,a)=>[`M${e+a},${t}`,`L${e+r-a},${t}`,`L${e+r},${t-i/2}`,`L${e+r-a},${t-i}`,`L${e+a},${t-i}`,`L${e},${t-i/2}`,"Z"].join(" "),"createHexagonPathD");async function Om(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=4,n=s.height+t.padding,c=n/o,l=s.width+2*c+t.padding,h=[{x:c,y:0},{x:l-c,y:0},{x:l,y:-n/2},{x:l-c,y:-n},{x:c,y:-n},{x:0,y:-n/2}];let u;const{cssStyles:p}=t;if(t.look==="handDrawn"){const d=V.svg(a),m=K(t,{}),g=tT(0,0,l,n,c),y=d.path(g,m);u=a.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${n/2})`),p&&u.attr("style",p)}else u=cr(a,l,n,h);return i&&u.attr("style",i),t.width=l,t.height=n,Q(t,u),t.intersect=function(d){return U.polygon(t,h,d)},a}f(Om,"hexagon");async function Rm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.label="",t.labelStyle=r;const{shapeSvg:a}=await ut(e,t,lt(t)),s=Math.max(30,(t==null?void 0:t.width)??0),o=Math.max(30,(t==null?void 0:t.height)??0),{cssStyles:n}=t,c=V.svg(a),l=K(t,{});t.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const h=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],u=xt(h),p=c.path(u,l),d=a.insert(()=>p,":first-child");return d.attr("class","basic label-container"),n&&t.look!=="handDrawn"&&d.selectChildren("path").attr("style",n),i&&t.look!=="handDrawn"&&d.selectChildren("path").attr("style",i),d.attr("transform",`translate(${-s/2}, ${-o/2})`),Q(t,d),t.intersect=function(m){return O.info("Pill intersect",t,{points:h}),U.polygon(t,h,m)},a}f(Rm,"hourglass");async function Im(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=J(t);t.labelStyle=a;const s=t.assetHeight??48,o=t.assetWidth??48,n=Math.max(s,o),c=i==null?void 0:i.wrappingWidth;t.width=Math.max(n,c??0);const{shapeSvg:l,bbox:h,label:u}=await ut(e,t,"icon-shape default"),p=t.pos==="t",d=n,m=n,{nodeBorder:g}=r,{stylesMap:y}=Li(t),b=-m/2,x=-d/2,k=t.label?8:0,C=V.svg(l),S=K(t,{stroke:"none",fill:"none"});t.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const v=C.rectangle(b,x,m,d,S),_=Math.max(m,h.width),R=d+h.height+k,P=C.rectangle(-_/2,-R/2,_,R,{...S,fill:"transparent",stroke:"none"}),$=l.insert(()=>v,":first-child"),A=l.insert(()=>P);if(t.icon){const z=l.append("g");z.html(`<g>${await an(t.icon,{height:n,width:n,fallbackPrefix:""})}</g>`);const I=z.node().getBBox(),F=I.width,L=I.height,B=I.x,D=I.y;z.attr("transform",`translate(${-F/2-B},${p?h.height/2+k/2-L/2-D:-h.height/2-k/2-L/2-D})`),z.attr("style",`color: ${y.get("stroke")??g};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-R/2:R/2-h.height})`),$.attr("transform",`translate(0,${p?h.height/2+k/2:-h.height/2-k/2})`),Q(t,A),t.intersect=function(z){if(O.info("iconSquare intersect",t,z),!t.label)return U.rect(t,z);const I=t.x??0,F=t.y??0,L=t.height??0;let B=[];return p?B=[{x:I-h.width/2,y:F-L/2},{x:I+h.width/2,y:F-L/2},{x:I+h.width/2,y:F-L/2+h.height+k},{x:I+m/2,y:F-L/2+h.height+k},{x:I+m/2,y:F+L/2},{x:I-m/2,y:F+L/2},{x:I-m/2,y:F-L/2+h.height+k},{x:I-h.width/2,y:F-L/2+h.height+k}]:B=[{x:I-m/2,y:F-L/2},{x:I+m/2,y:F-L/2},{x:I+m/2,y:F-L/2+d},{x:I+h.width/2,y:F-L/2+d},{x:I+h.width/2/2,y:F+L/2},{x:I-h.width/2,y:F+L/2},{x:I-h.width/2,y:F-L/2+d},{x:I-m/2,y:F-L/2+d}],U.polygon(t,B,z)},l}f(Im,"icon");async function Pm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=J(t);t.labelStyle=a;const s=t.assetHeight??48,o=t.assetWidth??48,n=Math.max(s,o),c=i==null?void 0:i.wrappingWidth;t.width=Math.max(n,c??0);const{shapeSvg:l,bbox:h,label:u}=await ut(e,t,"icon-shape default"),p=20,d=t.label?8:0,m=t.pos==="t",{nodeBorder:g,mainBkg:y}=r,{stylesMap:b}=Li(t),x=V.svg(l),k=K(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const C=b.get("fill");k.stroke=C??y;const S=l.append("g");t.icon&&S.html(`<g>${await an(t.icon,{height:n,width:n,fallbackPrefix:""})}</g>`);const v=S.node().getBBox(),_=v.width,R=v.height,P=v.x,$=v.y,A=Math.max(_,R)*Math.SQRT2+p*2,z=x.circle(0,0,A,k),I=Math.max(A,h.width),F=A+h.height+d,L=x.rectangle(-I/2,-F/2,I,F,{...k,fill:"transparent",stroke:"none"}),B=l.insert(()=>z,":first-child"),D=l.insert(()=>L);return S.attr("transform",`translate(${-_/2-P},${m?h.height/2+d/2-R/2-$:-h.height/2-d/2-R/2-$})`),S.attr("style",`color: ${b.get("stroke")??g};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${m?-F/2:F/2-h.height})`),B.attr("transform",`translate(0,${m?h.height/2+d/2:-h.height/2-d/2})`),Q(t,D),t.intersect=function(E){return O.info("iconSquare intersect",t,E),U.rect(t,E)},l}f(Pm,"iconCircle");async function Nm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=J(t);t.labelStyle=a;const s=t.assetHeight??48,o=t.assetWidth??48,n=Math.max(s,o),c=i==null?void 0:i.wrappingWidth;t.width=Math.max(n,c??0);const{shapeSvg:l,bbox:h,halfPadding:u,label:p}=await ut(e,t,"icon-shape default"),d=t.pos==="t",m=n+u*2,g=n+u*2,{nodeBorder:y,mainBkg:b}=r,{stylesMap:x}=Li(t),k=-g/2,C=-m/2,S=t.label?8:0,v=V.svg(l),_=K(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const R=x.get("fill");_.stroke=R??b;const P=v.path(lr(k,C,g,m,5),_),$=Math.max(g,h.width),A=m+h.height+S,z=v.rectangle(-$/2,-A/2,$,A,{..._,fill:"transparent",stroke:"none"}),I=l.insert(()=>P,":first-child").attr("class","icon-shape2"),F=l.insert(()=>z);if(t.icon){const L=l.append("g");L.html(`<g>${await an(t.icon,{height:n,width:n,fallbackPrefix:""})}</g>`);const B=L.node().getBBox(),D=B.width,E=B.height,W=B.x,H=B.y;L.attr("transform",`translate(${-D/2-W},${d?h.height/2+S/2-E/2-H:-h.height/2-S/2-E/2-H})`),L.attr("style",`color: ${x.get("stroke")??y};`)}return p.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-A/2:A/2-h.height})`),I.attr("transform",`translate(0,${d?h.height/2+S/2:-h.height/2-S/2})`),Q(t,F),t.intersect=function(L){if(O.info("iconSquare intersect",t,L),!t.label)return U.rect(t,L);const B=t.x??0,D=t.y??0,E=t.height??0;let W=[];return d?W=[{x:B-h.width/2,y:D-E/2},{x:B+h.width/2,y:D-E/2},{x:B+h.width/2,y:D-E/2+h.height+S},{x:B+g/2,y:D-E/2+h.height+S},{x:B+g/2,y:D+E/2},{x:B-g/2,y:D+E/2},{x:B-g/2,y:D-E/2+h.height+S},{x:B-h.width/2,y:D-E/2+h.height+S}]:W=[{x:B-g/2,y:D-E/2},{x:B+g/2,y:D-E/2},{x:B+g/2,y:D-E/2+m},{x:B+h.width/2,y:D-E/2+m},{x:B+h.width/2/2,y:D+E/2},{x:B-h.width/2,y:D+E/2},{x:B-h.width/2,y:D-E/2+m},{x:B-g/2,y:D-E/2+m}],U.polygon(t,W,L)},l}f(Nm,"iconRounded");async function zm(e,t,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:a}=J(t);t.labelStyle=a;const s=t.assetHeight??48,o=t.assetWidth??48,n=Math.max(s,o),c=i==null?void 0:i.wrappingWidth;t.width=Math.max(n,c??0);const{shapeSvg:l,bbox:h,halfPadding:u,label:p}=await ut(e,t,"icon-shape default"),d=t.pos==="t",m=n+u*2,g=n+u*2,{nodeBorder:y,mainBkg:b}=r,{stylesMap:x}=Li(t),k=-g/2,C=-m/2,S=t.label?8:0,v=V.svg(l),_=K(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const R=x.get("fill");_.stroke=R??b;const P=v.path(lr(k,C,g,m,.1),_),$=Math.max(g,h.width),A=m+h.height+S,z=v.rectangle(-$/2,-A/2,$,A,{..._,fill:"transparent",stroke:"none"}),I=l.insert(()=>P,":first-child"),F=l.insert(()=>z);if(t.icon){const L=l.append("g");L.html(`<g>${await an(t.icon,{height:n,width:n,fallbackPrefix:""})}</g>`);const B=L.node().getBBox(),D=B.width,E=B.height,W=B.x,H=B.y;L.attr("transform",`translate(${-D/2-W},${d?h.height/2+S/2-E/2-H:-h.height/2-S/2-E/2-H})`),L.attr("style",`color: ${x.get("stroke")??y};`)}return p.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-A/2:A/2-h.height})`),I.attr("transform",`translate(0,${d?h.height/2+S/2:-h.height/2-S/2})`),Q(t,F),t.intersect=function(L){if(O.info("iconSquare intersect",t,L),!t.label)return U.rect(t,L);const B=t.x??0,D=t.y??0,E=t.height??0;let W=[];return d?W=[{x:B-h.width/2,y:D-E/2},{x:B+h.width/2,y:D-E/2},{x:B+h.width/2,y:D-E/2+h.height+S},{x:B+g/2,y:D-E/2+h.height+S},{x:B+g/2,y:D+E/2},{x:B-g/2,y:D+E/2},{x:B-g/2,y:D-E/2+h.height+S},{x:B-h.width/2,y:D-E/2+h.height+S}]:W=[{x:B-g/2,y:D-E/2},{x:B+g/2,y:D-E/2},{x:B+g/2,y:D-E/2+m},{x:B+h.width/2,y:D-E/2+m},{x:B+h.width/2/2,y:D+E/2},{x:B-h.width/2,y:D+E/2},{x:B-h.width/2,y:D-E/2+m},{x:B-g/2,y:D-E/2+m}],U.polygon(t,W,L)},l}f(zm,"iconSquare");async function qm(e,t,{config:{flowchart:r}}){const i=new Image;i.src=(t==null?void 0:t.img)??"",await i.decode();const a=Number(i.naturalWidth.toString().replace("px","")),s=Number(i.naturalHeight.toString().replace("px",""));t.imageAspectRatio=a/s;const{labelStyles:o}=J(t);t.labelStyle=o;const n=r==null?void 0:r.wrappingWidth;t.defaultWidth=r==null?void 0:r.wrappingWidth;const c=Math.max(t.label?n??0:0,(t==null?void 0:t.assetWidth)??a),l=t.constraint==="on"&&t!=null&&t.assetHeight?t.assetHeight*t.imageAspectRatio:c,h=t.constraint==="on"?l/t.imageAspectRatio:(t==null?void 0:t.assetHeight)??s;t.width=Math.max(l,n??0);const{shapeSvg:u,bbox:p,label:d}=await ut(e,t,"image-shape default"),m=t.pos==="t",g=-l/2,y=-h/2,b=t.label?8:0,x=V.svg(u),k=K(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const C=x.rectangle(g,y,l,h,k),S=Math.max(l,p.width),v=h+p.height+b,_=x.rectangle(-S/2,-v/2,S,v,{...k,fill:"none",stroke:"none"}),R=u.insert(()=>C,":first-child"),P=u.insert(()=>_);if(t.img){const $=u.append("image");$.attr("href",t.img),$.attr("width",l),$.attr("height",h),$.attr("preserveAspectRatio","none"),$.attr("transform",`translate(${-l/2},${m?v/2-h:-v/2})`)}return d.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${m?-h/2-p.height/2-b/2:h/2-p.height/2+b/2})`),R.attr("transform",`translate(0,${m?p.height/2+b/2:-p.height/2-b/2})`),Q(t,P),t.intersect=function($){if(O.info("iconSquare intersect",t,$),!t.label)return U.rect(t,$);const A=t.x??0,z=t.y??0,I=t.height??0;let F=[];return m?F=[{x:A-p.width/2,y:z-I/2},{x:A+p.width/2,y:z-I/2},{x:A+p.width/2,y:z-I/2+p.height+b},{x:A+l/2,y:z-I/2+p.height+b},{x:A+l/2,y:z+I/2},{x:A-l/2,y:z+I/2},{x:A-l/2,y:z-I/2+p.height+b},{x:A-p.width/2,y:z-I/2+p.height+b}]:F=[{x:A-l/2,y:z-I/2},{x:A+l/2,y:z-I/2},{x:A+l/2,y:z-I/2+h},{x:A+p.width/2,y:z-I/2+h},{x:A+p.width/2/2,y:z+I/2},{x:A-p.width/2,y:z+I/2},{x:A-p.width/2,y:z-I/2+h},{x:A-l/2,y:z-I/2+h}],U.polygon(t,F,$)},u}f(qm,"imageSquare");async function Wm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),n=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=[{x:0,y:0},{x:o,y:0},{x:o+3*n/6,y:-n},{x:-3*n/6,y:-n}];let l;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=V.svg(a),p=K(t,{}),d=xt(c),m=u.path(d,p);l=a.insert(()=>m,":first-child").attr("transform",`translate(${-o/2}, ${n/2})`),h&&l.attr("style",h)}else l=cr(a,o,n,c);return i&&l.attr("style",i),t.width=o,t.height=n,Q(t,l),t.intersect=function(u){return U.polygon(t,c,u)},a}f(Wm,"inv_trapezoid");async function Oa(e,t,r){const{labelStyles:i,nodeStyles:a}=J(t);t.labelStyle=i;const{shapeSvg:s,bbox:o}=await ut(e,t,lt(t)),n=Math.max(o.width+r.labelPaddingX*2,(t==null?void 0:t.width)||0),c=Math.max(o.height+r.labelPaddingY*2,(t==null?void 0:t.height)||0),l=-n/2,h=-c/2;let u,{rx:p,ry:d}=t;const{cssStyles:m}=t;if(r!=null&&r.rx&&r.ry&&(p=r.rx,d=r.ry),t.look==="handDrawn"){const g=V.svg(s),y=K(t,{}),b=p||d?g.path(lr(l,h,n,c,p||0),y):g.rectangle(l,h,n,c,y);u=s.insert(()=>b,":first-child"),u.attr("class","basic label-container").attr("style",le(m))}else u=s.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",a).attr("rx",le(p)).attr("ry",le(d)).attr("x",l).attr("y",h).attr("width",n).attr("height",c);return Q(t,u),t.intersect=function(g){return U.rect(t,g)},s}f(Oa,"drawRect");async function Hm(e,t){const{shapeSvg:r,bbox:i,label:a}=await ut(e,t,"label"),s=r.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),a.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),Q(t,s),t.intersect=function(c){return U.rect(t,c)},r}f(Hm,"labelRect");async function jm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),n=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),c=[{x:0,y:0},{x:o+3*n/6,y:0},{x:o,y:-n},{x:-(3*n)/6,y:-n}];let l;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=V.svg(a),p=K(t,{}),d=xt(c),m=u.path(d,p);l=a.insert(()=>m,":first-child").attr("transform",`translate(${-o/2}, ${n/2})`),h&&l.attr("style",h)}else l=cr(a,o,n,c);return i&&l.attr("style",i),t.width=o,t.height=n,Q(t,l),t.intersect=function(u){return U.polygon(t,c,u)},a}f(jm,"lean_left");async function Ym(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),n=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),c=[{x:-3*n/6,y:0},{x:o,y:0},{x:o+3*n/6,y:-n},{x:0,y:-n}];let l;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=V.svg(a),p=K(t,{}),d=xt(c),m=u.path(d,p);l=a.insert(()=>m,":first-child").attr("transform",`translate(${-o/2}, ${n/2})`),h&&l.attr("style",h)}else l=cr(a,o,n,c);return i&&l.attr("style",i),t.width=o,t.height=n,Q(t,l),t.intersect=function(u){return U.polygon(t,c,u)},a}f(Ym,"lean_right");function Um(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.label="",t.labelStyle=r;const a=e.insert("g").attr("class",lt(t)).attr("id",t.domId??t.id),{cssStyles:s}=t,o=Math.max(35,(t==null?void 0:t.width)??0),n=Math.max(35,(t==null?void 0:t.height)??0),c=7,l=[{x:o,y:0},{x:0,y:n+c/2},{x:o-2*c,y:n+c/2},{x:0,y:2*n},{x:o,y:n-c/2},{x:2*c,y:n-c/2}],h=V.svg(a),u=K(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const p=xt(l),d=h.path(p,u),m=a.insert(()=>d,":first-child");return s&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",s),i&&t.look!=="handDrawn"&&m.selectAll("path").attr("style",i),m.attr("transform",`translate(-${o/2},${-n})`),Q(t,m),t.intersect=function(g){return O.info("lightningBolt intersect",t,g),U.polygon(t,l,g)},a}f(Um,"lightningBolt");var eT=f((e,t,r,i,a,s,o)=>[`M${e},${t+s}`,`a${a},${s} 0,0,0 ${r},0`,`a${a},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${s} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+s+o}`,`a${a},${s} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),rT=f((e,t,r,i,a,s,o)=>[`M${e},${t+s}`,`M${e+r},${t+s}`,`a${a},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${a},${s} 0,0,0 ${r},0`,`l0,${-i}`,`M${e},${t+s+o}`,`a${a},${s} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),iT=f((e,t,r,i,a,s)=>[`M${e-r/2},${-i/2}`,`a${a},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Gm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0),t.width??0),c=n/2,l=c/(2.5+n/50),h=Math.max(s.height+l+(t.padding??0),t.height??0),u=h*.1;let p;const{cssStyles:d}=t;if(t.look==="handDrawn"){const m=V.svg(a),g=rT(0,0,n,h,c,l,u),y=iT(0,l,n,h,c,l),b=K(t,{}),x=m.path(g,b),k=m.path(y,b);a.insert(()=>k,":first-child").attr("class","line"),p=a.insert(()=>x,":first-child"),p.attr("class","basic label-container"),d&&p.attr("style",d)}else{const m=eT(0,0,n,h,c,l,u);p=a.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",le(d)).attr("style",i)}return p.attr("label-offset-y",l),p.attr("transform",`translate(${-n/2}, ${-(h/2+l)})`),Q(t,p),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+l-(s.y-(s.top??0))})`),t.intersect=function(m){const g=U.rect(t,m),y=g.x-(t.x??0);if(c!=0&&(Math.abs(y)<(t.width??0)/2||Math.abs(y)==(t.width??0)/2&&Math.abs(g.y-(t.y??0))>(t.height??0)/2-l)){let b=l*l*(1-y*y/(c*c));b>0&&(b=Math.sqrt(b)),b=l-b,m.y-(t.y??0)>0&&(b=-b),g.y+=b}return g},a}f(Gm,"linedCylinder");async function Vm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=c/4,h=c+l,{cssStyles:u}=t,p=V.svg(a),d=K(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=[{x:-n/2-n/2*.1,y:-h/2},{x:-n/2-n/2*.1,y:h/2},...yr(-n/2-n/2*.1,h/2,n/2+n/2*.1,h/2,l,.8),{x:n/2+n/2*.1,y:-h/2},{x:-n/2-n/2*.1,y:-h/2},{x:-n/2,y:-h/2},{x:-n/2,y:h/2*1.1},{x:-n/2,y:-h/2}],g=p.polygon(m.map(b=>[b.x,b.y]),d),y=a.insert(()=>g,":first-child");return y.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(0,${-l/2})`),o.attr("transform",`translate(${-n/2+(t.padding??0)+n/2*.1/2-(s.x-(s.left??0))},${-c/2+(t.padding??0)-l/2-(s.y-(s.top??0))})`),Q(t,y),t.intersect=function(b){return U.polygon(t,m,b)},a}f(Vm,"linedWaveEdgedRect");async function Xm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=5,h=-n/2,u=-c/2,{cssStyles:p}=t,d=V.svg(a),m=K(t,{}),g=[{x:h-l,y:u+l},{x:h-l,y:u+c+l},{x:h+n-l,y:u+c+l},{x:h+n-l,y:u+c},{x:h+n,y:u+c},{x:h+n,y:u+c-l},{x:h+n+l,y:u+c-l},{x:h+n+l,y:u-l},{x:h+l,y:u-l},{x:h+l,y:u},{x:h,y:u},{x:h,y:u+l}],y=[{x:h,y:u+l},{x:h+n-l,y:u+l},{x:h+n-l,y:u+c},{x:h+n,y:u+c},{x:h+n,y:u},{x:h,y:u}];t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const b=xt(g),x=d.path(b,m),k=xt(y),C=d.path(k,{...m,fill:"none"}),S=a.insert(()=>C,":first-child");return S.insert(()=>x,":first-child"),S.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(s.width/2)-l-(s.x-(s.left??0))}, ${-(s.height/2)+l-(s.y-(s.top??0))})`),Q(t,S),t.intersect=function(v){return U.polygon(t,g,v)},a}f(Xm,"multiRect");async function Km(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=c/4,h=c+l,u=-n/2,p=-h/2,d=5,{cssStyles:m}=t,g=yr(u-d,p+h+d,u+n-d,p+h+d,l,.8),y=g==null?void 0:g[g.length-1],b=[{x:u-d,y:p+d},{x:u-d,y:p+h+d},...g,{x:u+n-d,y:y.y-d},{x:u+n,y:y.y-d},{x:u+n,y:y.y-2*d},{x:u+n+d,y:y.y-2*d},{x:u+n+d,y:p-d},{x:u+d,y:p-d},{x:u+d,y:p},{x:u,y:p},{x:u,y:p+d}],x=[{x:u,y:p+d},{x:u+n-d,y:p+d},{x:u+n-d,y:y.y-d},{x:u+n,y:y.y-d},{x:u+n,y:p},{x:u,y:p}],k=V.svg(a),C=K(t,{});t.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const S=xt(b),v=k.path(S,C),_=xt(x),R=k.path(_,C),P=a.insert(()=>v,":first-child");return P.insert(()=>R),P.attr("class","basic label-container"),m&&t.look!=="handDrawn"&&P.selectAll("path").attr("style",m),i&&t.look!=="handDrawn"&&P.selectAll("path").attr("style",i),P.attr("transform",`translate(0,${-l/2})`),o.attr("transform",`translate(${-(s.width/2)-d-(s.x-(s.left??0))}, ${-(s.height/2)+d-l/2-(s.y-(s.top??0))})`),Q(t,P),t.intersect=function($){return U.polygon(t,b,$)},a}f(Km,"multiWaveEdgedRectangle");async function Zm(e,t,{config:{themeVariables:r}}){var b;const{labelStyles:i,nodeStyles:a}=J(t);t.labelStyle=i,t.useHtmlLabels||((b=ye().flowchart)==null?void 0:b.htmlLabels)!==!1||(t.centerLabel=!0);const{shapeSvg:o,bbox:n}=await ut(e,t,lt(t)),c=Math.max(n.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-c/2,u=-l/2,{cssStyles:p}=t,d=V.svg(o),m=K(t,{fill:r.noteBkgColor,stroke:r.noteBorderColor});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=d.rectangle(h,u,c,l,m),y=o.insert(()=>g,":first-child");return y.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",p),a&&t.look!=="handDrawn"&&y.selectAll("path").attr("style",a),Q(t,y),t.intersect=function(x){return U.rect(t,x)},o}f(Zm,"note");var aT=f((e,t,r)=>[`M${e+r/2},${t}`,`L${e+r},${t-r/2}`,`L${e+r/2},${t-r}`,`L${e},${t-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function Qm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=s.width+t.padding,n=s.height+t.padding,c=o+n,l=[{x:c/2,y:0},{x:c,y:-c/2},{x:c/2,y:-c},{x:0,y:-c/2}];let h;const{cssStyles:u}=t;if(t.look==="handDrawn"){const p=V.svg(a),d=K(t,{}),m=aT(0,0,c),g=p.path(m,d);h=a.insert(()=>g,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`),u&&h.attr("style",u)}else h=cr(a,c,c,l);return i&&h.attr("style",i),Q(t,h),t.intersect=function(p){return O.debug(`APA12 Intersect called SPLIT
point:`,p,`
node:
`,t,`
res:`,U.polygon(t,l,p)),U.polygon(t,l,p)},a}f(Qm,"question");async function Jm(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0),(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0),(t==null?void 0:t.height)??0),l=-n/2,h=-c/2,u=h/2,p=[{x:l+u,y:h},{x:l,y:0},{x:l+u,y:-h},{x:-l,y:-h},{x:-l,y:h}],{cssStyles:d}=t,m=V.svg(a),g=K(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=xt(p),b=m.path(y,g),x=a.insert(()=>b,":first-child");return x.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),x.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Q(t,x),t.intersect=function(k){return U.polygon(t,p,k)},a}f(Jm,"rect_left_inv_arrow");async function tg(e,t){var R,P;const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;let a;t.cssClasses?a="node "+t.cssClasses:a="node default";const s=e.insert("g").attr("class",a).attr("id",t.domId||t.id),o=s.insert("g"),n=s.insert("g").attr("class","label").attr("style",i),c=t.description,l=t.label,h=n.node().appendChild(await Mr(l,t.labelStyle,!0,!0));let u={width:0,height:0};if(qt((P=(R=kt())==null?void 0:R.flowchart)==null?void 0:P.htmlLabels)){const $=h.children[0],A=bt(h);u=$.getBoundingClientRect(),A.attr("width",u.width),A.attr("height",u.height)}O.info("Text 2",c);const p=c||[],d=h.getBBox(),m=n.node().appendChild(await Mr(p.join?p.join("<br/>"):p,t.labelStyle,!0,!0)),g=m.children[0],y=bt(m);u=g.getBoundingClientRect(),y.attr("width",u.width),y.attr("height",u.height);const b=(t.padding||0)/2;bt(m).attr("transform","translate( "+(u.width>d.width?0:(d.width-u.width)/2)+", "+(d.height+b+5)+")"),bt(h).attr("transform","translate( "+(u.width<d.width?0:-(d.width-u.width)/2)+", 0)"),u=n.node().getBBox(),n.attr("transform","translate("+-u.width/2+", "+(-u.height/2-b+3)+")");const x=u.width+(t.padding||0),k=u.height+(t.padding||0),C=-u.width/2-b,S=-u.height/2-b;let v,_;if(t.look==="handDrawn"){const $=V.svg(s),A=K(t,{}),z=$.path(lr(C,S,x,k,t.rx||0),A),I=$.line(-u.width/2-b,-u.height/2-b+d.height+b,u.width/2+b,-u.height/2-b+d.height+b,A);_=s.insert(()=>(O.debug("Rough node insert CXC",z),I),":first-child"),v=s.insert(()=>(O.debug("Rough node insert CXC",z),z),":first-child")}else v=o.insert("rect",":first-child"),_=o.insert("line"),v.attr("class","outer title-state").attr("style",i).attr("x",-u.width/2-b).attr("y",-u.height/2-b).attr("width",u.width+(t.padding||0)).attr("height",u.height+(t.padding||0)),_.attr("class","divider").attr("x1",-u.width/2-b).attr("x2",u.width/2+b).attr("y1",-u.height/2-b+d.height+b).attr("y2",-u.height/2-b+d.height+b);return Q(t,v),t.intersect=function($){return U.rect(t,$)},s}f(tg,"rectWithTitle");async function eg(e,t){const r={rx:5,ry:5,labelPaddingX:((t==null?void 0:t.padding)||0)*1,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return Oa(e,t,r)}f(eg,"roundedRect");async function rg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=(t==null?void 0:t.padding)??0,c=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=-s.width/2-n,u=-s.height/2-n,{cssStyles:p}=t,d=V.svg(a),m=K(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:h,y:u},{x:h+c+8,y:u},{x:h+c+8,y:u+l},{x:h-8,y:u+l},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+l}],y=d.polygon(g.map(x=>[x.x,x.y]),m),b=a.insert(()=>y,":first-child");return b.attr("class","basic label-container").attr("style",le(p)),i&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),p&&t.look!=="handDrawn"&&b.selectAll("path").attr("style",i),o.attr("transform",`translate(${-c/2+4+(t.padding??0)-(s.x-(s.left??0))},${-l/2+(t.padding??0)-(s.y-(s.top??0))})`),Q(t,b),t.intersect=function(x){return U.rect(t,x)},a}f(rg,"shadedProcess");async function ig(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=-n/2,h=-c/2,{cssStyles:u}=t,p=V.svg(a),d=K(t,{});t.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=[{x:l,y:h},{x:l,y:h+c},{x:l+n,y:h+c},{x:l+n,y:h-c/2}],g=xt(m),y=p.path(g,d),b=a.insert(()=>y,":first-child");return b.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",u),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),b.attr("transform",`translate(0, ${c/4})`),o.attr("transform",`translate(${-n/2+(t.padding??0)-(s.x-(s.left??0))}, ${-c/4+(t.padding??0)-(s.y-(s.top??0))})`),Q(t,b),t.intersect=function(x){return U.polygon(t,m,x)},a}f(ig,"slopedRect");async function ag(e,t){const r={rx:0,ry:0,labelPaddingX:((t==null?void 0:t.padding)||0)*2,labelPaddingY:((t==null?void 0:t.padding)||0)*1};return Oa(e,t,r)}f(ag,"squareRect");async function sg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=s.height+t.padding,n=s.width+o/4+t.padding;let c;const{cssStyles:l}=t;if(t.look==="handDrawn"){const h=V.svg(a),u=K(t,{}),p=lr(-n/2,-o/2,n,o,o/2),d=h.path(p,u);c=a.insert(()=>d,":first-child"),c.attr("class","basic label-container").attr("style",le(l))}else c=a.insert("rect",":first-child"),c.attr("class","basic label-container").attr("style",i).attr("rx",o/2).attr("ry",o/2).attr("x",-n/2).attr("y",-o/2).attr("width",n).attr("height",o);return Q(t,c),t.intersect=function(h){return U.rect(t,h)},a}f(sg,"stadium");async function ng(e,t){return Oa(e,t,{rx:5,ry:5})}f(ng,"state");function og(e,t,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:a}=J(t);t.labelStyle=i;const{cssStyles:s}=t,{lineColor:o,stateBorder:n,nodeBorder:c}=r,l=e.insert("g").attr("class","node default").attr("id",t.domId||t.id),h=V.svg(l),u=K(t,{});t.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const p=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),d=n??c,m=h.circle(0,0,5,{...u,fill:d,stroke:d,strokeWidth:2,fillStyle:"solid"}),g=l.insert(()=>p,":first-child");return g.insert(()=>m),s&&g.selectAll("path").attr("style",s),a&&g.selectAll("path").attr("style",a),Q(t,g),t.intersect=function(y){return U.circle(t,7,y)},l}f(og,"stateEnd");function lg(e,t,{config:{themeVariables:r}}){const{lineColor:i}=r,a=e.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s;if(t.look==="handDrawn"){const n=V.svg(a).circle(0,0,14,PS(i));s=a.insert(()=>n),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=a.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Q(t,s),t.intersect=function(o){return U.circle(t,7,o)},a}f(lg,"stateStart");async function cg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=((t==null?void 0:t.padding)||0)/2,n=s.width+t.padding,c=s.height+t.padding,l=-s.width/2-o,h=-s.height/2-o,u=[{x:0,y:0},{x:n,y:0},{x:n,y:-c},{x:0,y:-c},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-c},{x:-8,y:-c},{x:-8,y:0}];if(t.look==="handDrawn"){const p=V.svg(a),d=K(t,{}),m=p.rectangle(l-8,h,n+16,c,d),g=p.line(l,h,l,h+c,d),y=p.line(l+n,h,l+n,h+c,d);a.insert(()=>g,":first-child"),a.insert(()=>y,":first-child");const b=a.insert(()=>m,":first-child"),{cssStyles:x}=t;b.attr("class","basic label-container").attr("style",le(x)),Q(t,b)}else{const p=cr(a,n,c,u);i&&p.attr("style",i),Q(t,p)}return t.intersect=function(p){return U.polygon(t,u,p)},a}f(cg,"subroutine");async function hg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),n=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),c=-o/2,l=-n/2,h=.2*n,u=.2*n,{cssStyles:p}=t,d=V.svg(a),m=K(t,{}),g=[{x:c-h/2,y:l},{x:c+o+h/2,y:l},{x:c+o+h/2,y:l+n},{x:c-h/2,y:l+n}],y=[{x:c+o-h/2,y:l+n},{x:c+o+h/2,y:l+n},{x:c+o+h/2,y:l+n-u}];t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const b=xt(g),x=d.path(b,m),k=xt(y),C=d.path(k,{...m,fillStyle:"solid"}),S=a.insert(()=>C,":first-child");return S.insert(()=>x,":first-child"),S.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",i),Q(t,S),t.intersect=function(v){return U.polygon(t,g,v)},a}f(hg,"taggedRect");async function ug(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=c/4,h=.2*n,u=.2*c,p=c+l,{cssStyles:d}=t,m=V.svg(a),g=K(t,{});t.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:-n/2-n/2*.1,y:p/2},...yr(-n/2-n/2*.1,p/2,n/2+n/2*.1,p/2,l,.8),{x:n/2+n/2*.1,y:-p/2},{x:-n/2-n/2*.1,y:-p/2}],b=-n/2+n/2*.1,x=-p/2-u*.4,k=[{x:b+n-h,y:(x+c)*1.4},{x:b+n,y:x+c-u},{x:b+n,y:(x+c)*.9},...yr(b+n,(x+c)*1.3,b+n-h,(x+c)*1.5,-c*.03,.5)],C=xt(y),S=m.path(C,g),v=xt(k),_=m.path(v,{...g,fillStyle:"solid"}),R=a.insert(()=>_,":first-child");return R.insert(()=>S,":first-child"),R.attr("class","basic label-container"),d&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",d),i&&t.look!=="handDrawn"&&R.selectAll("path").attr("style",i),R.attr("transform",`translate(0,${-l/2})`),o.attr("transform",`translate(${-n/2+(t.padding??0)-(s.x-(s.left??0))},${-c/2+(t.padding??0)-l/2-(s.y-(s.top??0))})`),Q(t,R),t.intersect=function(P){return U.polygon(t,y,P)},a}f(ug,"taggedWaveEdgedRectangle");async function pg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=Math.max(s.width+t.padding,(t==null?void 0:t.width)||0),n=Math.max(s.height+t.padding,(t==null?void 0:t.height)||0),c=-o/2,l=-n/2,h=a.insert("rect",":first-child");return h.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",c).attr("y",l).attr("width",o).attr("height",n),Q(t,h),t.intersect=function(u){return U.rect(t,u)},a}f(pg,"text");var sT=f((e,t,r,i,a,s)=>`M${e},${t}
    a${a},${s} 0,0,1 0,${-i}
    l${r},0
    a${a},${s} 0,0,1 0,${i}
    M${r},${-i}
    a${a},${s} 0,0,0 0,${i}
    l${-r},0`,"createCylinderPathD"),nT=f((e,t,r,i,a,s)=>[`M${e},${t}`,`M${e+r},${t}`,`a${a},${s} 0,0,0 0,${-i}`,`l${-r},0`,`a${a},${s} 0,0,0 0,${i}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),oT=f((e,t,r,i,a,s)=>[`M${e+r/2},${-i/2}`,`a${a},${s} 0,0,0 0,${i}`].join(" "),"createInnerCylinderPathD");async function dg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o,halfPadding:n}=await ut(e,t,lt(t)),c=t.look==="neo"?n*2:n,l=s.height+c,h=l/2,u=h/(2.5+l/50),p=s.width+u+c,{cssStyles:d}=t;let m;if(t.look==="handDrawn"){const g=V.svg(a),y=nT(0,0,p,l,u,h),b=oT(0,0,p,l,u,h),x=g.path(y,K(t,{})),k=g.path(b,K(t,{fill:"none"}));m=a.insert(()=>k,":first-child"),m=a.insert(()=>x,":first-child"),m.attr("class","basic label-container"),d&&m.attr("style",d)}else{const g=sT(0,0,p,l,u,h);m=a.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",le(d)).attr("style",i),m.attr("class","basic label-container"),d&&m.selectAll("path").attr("style",d),i&&m.selectAll("path").attr("style",i)}return m.attr("label-offset-x",u),m.attr("transform",`translate(${-p/2}, ${l/2} )`),o.attr("transform",`translate(${-(s.width/2)-u-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Q(t,m),t.intersect=function(g){const y=U.rect(t,g),b=y.y-(t.y??0);if(h!=0&&(Math.abs(b)<(t.height??0)/2||Math.abs(b)==(t.height??0)/2&&Math.abs(y.x-(t.x??0))>(t.width??0)/2-u)){let x=u*u*(1-b*b/(h*h));x!=0&&(x=Math.sqrt(Math.abs(x))),x=u-x,g.x-(t.x??0)>0&&(x=-x),y.x+=x}return y},a}f(dg,"tiltedCylinder");async function fg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=s.width+t.padding,n=s.height+t.padding,c=[{x:-3*n/6,y:0},{x:o+3*n/6,y:0},{x:o,y:-n},{x:0,y:-n}];let l;const{cssStyles:h}=t;if(t.look==="handDrawn"){const u=V.svg(a),p=K(t,{}),d=xt(c),m=u.path(d,p);l=a.insert(()=>m,":first-child").attr("transform",`translate(${-o/2}, ${n/2})`),h&&l.attr("style",h)}else l=cr(a,o,n,c);return i&&l.attr("style",i),t.width=o,t.height=n,Q(t,l),t.intersect=function(u){return U.polygon(t,c,u)},a}f(fg,"trapezoid");async function mg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=60,n=20,c=Math.max(o,s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(n,s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),{cssStyles:h}=t,u=V.svg(a),p=K(t,{});t.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const d=[{x:-c/2*.8,y:-l/2},{x:c/2*.8,y:-l/2},{x:c/2,y:-l/2*.6},{x:c/2,y:l/2},{x:-c/2,y:l/2},{x:-c/2,y:-l/2*.6}],m=xt(d),g=u.path(m,p),y=a.insert(()=>g,":first-child");return y.attr("class","basic label-container"),h&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",h),i&&t.look!=="handDrawn"&&y.selectChildren("path").attr("style",i),Q(t,y),t.intersect=function(b){return U.polygon(t,d,b)},a}f(mg,"trapezoidalPentagon");async function gg(e,t){var x;const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=qt((x=kt().flowchart)==null?void 0:x.htmlLabels),c=s.width+(t.padding??0),l=c+s.height,h=c+s.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-l}],{cssStyles:p}=t,d=V.svg(a),m=K(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=xt(u),y=d.path(g,m),b=a.insert(()=>y,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return p&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",p),i&&t.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),t.width=c,t.height=l,Q(t,b),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${l/2-(s.height+(t.padding??0)/(n?2:1)-(s.y-(s.top??0)))})`),t.intersect=function(k){return O.info("Triangle intersect",t,u,k),U.polygon(t,u,k)},a}f(gg,"triangle");async function yg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=c/8,h=c+l,{cssStyles:u}=t,d=70-n,m=d>0?d/2:0,g=V.svg(a),y=K(t,{});t.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-n/2-m,y:h/2},...yr(-n/2-m,h/2,n/2+m,h/2,l,.8),{x:n/2+m,y:-h/2},{x:-n/2-m,y:-h/2}],x=xt(b),k=g.path(x,y),C=a.insert(()=>k,":first-child");return C.attr("class","basic label-container"),u&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",u),i&&t.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(0,${-l/2})`),o.attr("transform",`translate(${-n/2+(t.padding??0)-(s.x-(s.left??0))},${-c/2+(t.padding??0)-l-(s.y-(s.top??0))})`),Q(t,C),t.intersect=function(S){return U.polygon(t,b,S)},a}f(yg,"waveEdgedRectangle");async function bg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s}=await ut(e,t,lt(t)),o=100,n=50,c=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),l=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),h=c/l;let u=c,p=l;u>p*h?p=u/h:u=p*h,u=Math.max(u,o),p=Math.max(p,n);const d=Math.min(p*.2,p/4),m=p+d*2,{cssStyles:g}=t,y=V.svg(a),b=K(t,{});t.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-u/2,y:m/2},...yr(-u/2,m/2,u/2,m/2,d,1),{x:u/2,y:-m/2},...yr(u/2,-m/2,-u/2,-m/2,d,-1)],k=xt(x),C=y.path(k,b),S=a.insert(()=>C,":first-child");return S.attr("class","basic label-container"),g&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",g),i&&t.look!=="handDrawn"&&S.selectAll("path").attr("style",i),Q(t,S),t.intersect=function(v){return U.polygon(t,x,v)},a}f(bg,"waveRectangle");async function xg(e,t){const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const{shapeSvg:a,bbox:s,label:o}=await ut(e,t,lt(t)),n=Math.max(s.width+(t.padding??0)*2,(t==null?void 0:t.width)??0),c=Math.max(s.height+(t.padding??0)*2,(t==null?void 0:t.height)??0),l=5,h=-n/2,u=-c/2,{cssStyles:p}=t,d=V.svg(a),m=K(t,{}),g=[{x:h-l,y:u-l},{x:h-l,y:u+c},{x:h+n,y:u+c},{x:h+n,y:u-l}],y=`M${h-l},${u-l} L${h+n},${u-l} L${h+n},${u+c} L${h-l},${u+c} L${h-l},${u-l}
                M${h-l},${u} L${h+n},${u}
                M${h},${u-l} L${h},${u+c}`;t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const b=d.path(y,m),x=a.insert(()=>b,":first-child");return x.attr("transform",`translate(${l/2}, ${l/2})`),x.attr("class","basic label-container"),p&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",p),i&&t.look!=="handDrawn"&&x.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(s.width/2)+l/2-(s.x-(s.left??0))}, ${-(s.height/2)+l/2-(s.y-(s.top??0))})`),Q(t,x),t.intersect=function(k){return U.polygon(t,g,k)},a}f(xg,"windowPane");async function Kl(e,t){var W,H,G;const r=t;if(r.alias&&(t.label=r.alias),t.look==="handDrawn"){const{themeVariables:Z}=ye(),{background:it}=Z,yt={...t,id:t.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${it}`]};await Kl(e,yt)}const i=ye();t.useHtmlLabels=i.htmlLabels;let a=((W=i.er)==null?void 0:W.diagramPadding)??10,s=((H=i.er)==null?void 0:H.entityPadding)??6;const{cssStyles:o}=t,{labelStyles:n}=J(t);if(r.attributes.length===0&&t.label){const Z={rx:0,ry:0,labelPaddingX:a,labelPaddingY:a*1.5};nr(t.label,i)+Z.labelPaddingX*2<i.er.minEntityWidth&&(t.width=i.er.minEntityWidth);const it=await Oa(e,t,Z);if(!qt(i.htmlLabels)){const yt=it.select("text"),at=(G=yt.node())==null?void 0:G.getBBox();yt.attr("transform",`translate(${-at.width/2}, 0)`)}return it}i.htmlLabels||(a*=1.25,s*=1.25);let c=lt(t);c||(c="node default");const l=e.insert("g").attr("class",c).attr("id",t.domId||t.id),h=await ti(l,t.label??"",i,0,0,["name"],n);h.height+=s;let u=0;const p=[];let d=0,m=0,g=0,y=0,b=!0,x=!0;for(const Z of r.attributes){const it=await ti(l,Z.type,i,0,u,["attribute-type"],n);d=Math.max(d,it.width+a);const yt=await ti(l,Z.name,i,0,u,["attribute-name"],n);m=Math.max(m,yt.width+a);const at=await ti(l,Z.keys.join(),i,0,u,["attribute-keys"],n);g=Math.max(g,at.width+a);const Ft=await ti(l,Z.comment,i,0,u,["attribute-comment"],n);y=Math.max(y,Ft.width+a),u+=Math.max(it.height,yt.height,at.height,Ft.height)+s,p.push(u)}p.pop();let k=4;g<=a&&(b=!1,g=0,k--),y<=a&&(x=!1,y=0,k--);const C=l.node().getBBox();if(h.width+a*2-(d+m+g+y)>0){const Z=h.width+a*2-(d+m+g+y);d+=Z/k,m+=Z/k,g>0&&(g+=Z/k),y>0&&(y+=Z/k)}const S=d+m+g+y,v=V.svg(l),_=K(t,{});t.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const R=Math.max(C.width+a*2,(t==null?void 0:t.width)||0,S),P=Math.max(C.height+(p[0]||u)+s,(t==null?void 0:t.height)||0),$=-R/2,A=-P/2;l.selectAll("g:not(:first-child)").each((Z,it,yt)=>{const at=bt(yt[it]),Ft=at.attr("transform");let $t=0,Kt=0;if(Ft){const Bt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(Ft);Bt&&($t=parseFloat(Bt[1]),Kt=parseFloat(Bt[2]),at.attr("class").includes("attribute-name")?$t+=d:at.attr("class").includes("attribute-keys")?$t+=d+m:at.attr("class").includes("attribute-comment")&&($t+=d+m+g))}at.attr("transform",`translate(${$+a/2+$t}, ${Kt+A+h.height+s/2})`)}),l.select(".name").attr("transform","translate("+-h.width/2+", "+(A+s/2)+")");const z=v.rectangle($,A,R,P,_),I=l.insert(()=>z,":first-child").attr("style",o.join("")),{themeVariables:F}=ye(),{rowEven:L,rowOdd:B,nodeBorder:D}=F;p.push(0);for(const[Z,it]of p.entries()){if(Z===0&&p.length>1)continue;const yt=Z%2===0&&it!==0,at=v.rectangle($,h.height+A+it,R,h.height,{..._,fill:yt?L:B,stroke:D});l.insert(()=>at,"g.label").attr("style",o.join("")).attr("class",`row-rect-${Z%2===0?"even":"odd"}`)}let E=v.line($,h.height+A,R+$,h.height+A,_);l.insert(()=>E).attr("class","divider"),E=v.line(d+$,h.height+A,d+$,P+A,_),l.insert(()=>E).attr("class","divider"),b&&(E=v.line(d+m+$,h.height+A,d+m+$,P+A,_),l.insert(()=>E).attr("class","divider")),x&&(E=v.line(d+m+g+$,h.height+A,d+m+g+$,P+A,_),l.insert(()=>E).attr("class","divider"));for(const Z of p)E=v.line($,h.height+A+Z,R+$,h.height+A+Z,_),l.insert(()=>E).attr("class","divider");return Q(t,I),t.intersect=function(Z){return U.rect(t,Z)},l}f(Kl,"erBox");async function ti(e,t,r,i=0,a=0,s=[],o=""){const n=e.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${i}, ${a})`).attr("style",o);t!==Dc(t)&&(t=Dc(t),t=t.replaceAll("<","&lt;").replaceAll(">","&gt;"));const c=n.node().appendChild(await xr(n,t,{width:nr(t,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(t.includes("&lt;")||t.includes("&gt;")){let h=c.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let l=c.getBBox();if(qt(r.htmlLabels)){const h=c.children[0];h.style.textAlign="start";const u=bt(c);l=h.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}return l}f(ti,"addText");async function vg(e,t,r,i,a=r.class.padding??12){const s=i?0:3,o=e.insert("g").attr("class",lt(t)).attr("id",t.domId||t.id);let n=null,c=null,l=null,h=null,u=0,p=0,d=0;if(n=o.insert("g").attr("class","annotation-group text"),t.annotations.length>0){const x=t.annotations[0];await ea(n,{text:`«${x}»`},0),u=n.node().getBBox().height}c=o.insert("g").attr("class","label-group text"),await ea(c,t,0,["font-weight: bolder"]);const m=c.node().getBBox();p=m.height,l=o.insert("g").attr("class","members-group text");let g=0;for(const x of t.members){const k=await ea(l,x,g,[x.parseClassifier()]);g+=k+s}d=l.node().getBBox().height,d<=0&&(d=a/2),h=o.insert("g").attr("class","methods-group text");let y=0;for(const x of t.methods){const k=await ea(h,x,y,[x.parseClassifier()]);y+=k+s}let b=o.node().getBBox();if(n!==null){const x=n.node().getBBox();n.attr("transform",`translate(${-x.width/2})`)}return c.attr("transform",`translate(${-m.width/2}, ${u})`),b=o.node().getBBox(),l.attr("transform",`translate(0, ${u+p+a*2})`),b=o.node().getBBox(),h.attr("transform",`translate(0, ${u+p+(d?d+a*4:a*2)})`),b=o.node().getBBox(),{shapeSvg:o,bbox:b}}f(vg,"textHelper");async function ea(e,t,r,i=[]){const a=e.insert("g").attr("class","label").attr("style",i.join("; ")),s=ye();let o="useHtmlLabels"in t?t.useHtmlLabels:qt(s.htmlLabels)??!0,n="";"text"in t?n=t.text:n=t.label,!o&&n.startsWith("\\")&&(n=n.substring(1)),xi(n)&&(o=!0);const c=await xr(a,nl(jr(n)),{width:nr(n,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let l,h=1;if(o){const u=c.children[0],p=bt(c);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const d=u.getElementsByTagName("img");if(d){const m=n.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...d].map(g=>new Promise(y=>{function b(){var x;if(g.style.display="flex",g.style.flexDirection="column",m){const k=((x=s.fontSize)==null?void 0:x.toString())??window.getComputedStyle(document.body).fontSize,S=parseInt(k,10)*5+"px";g.style.minWidth=S,g.style.maxWidth=S}else g.style.width="100%";y(g)}f(b,"setupImage"),setTimeout(()=>{g.complete&&b()}),g.addEventListener("error",b),g.addEventListener("load",b)})))}l=u.getBoundingClientRect(),p.attr("width",l.width),p.attr("height",l.height)}else{i.includes("font-weight: bolder")&&bt(c).selectAll("tspan").attr("font-weight",""),h=c.children.length;const u=c.children[0];(c.textContent===""||c.textContent.includes("&gt"))&&(u.textContent=n[0]+n.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),n[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),l=c.getBBox()}return a.attr("transform","translate(0,"+(-l.height/(2*h)+r)+")"),l.height}f(ea,"addText");async function kg(e,t){var P,$;const r=kt(),i=r.class.padding??12,a=i,s=t.useHtmlLabels??qt(r.htmlLabels)??!0,o=t;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:n,bbox:c}=await vg(e,t,r,s,a),{labelStyles:l,nodeStyles:h}=J(t);t.labelStyle=l,t.cssStyles=o.styles||"";const u=((P=o.styles)==null?void 0:P.join(";"))||h||"";t.cssStyles||(t.cssStyles=u.replaceAll("!important","").split(";"));const p=o.members.length===0&&o.methods.length===0&&!(($=r.class)!=null&&$.hideEmptyMembersBox),d=V.svg(n),m=K(t,{});t.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=c.width;let y=c.height;o.members.length===0&&o.methods.length===0?y+=a:o.members.length>0&&o.methods.length===0&&(y+=a*2);const b=-g/2,x=-y/2,k=d.rectangle(b-i,x-i-(p?i:o.members.length===0&&o.methods.length===0?-i/2:0),g+2*i,y+2*i+(p?i*2:o.members.length===0&&o.methods.length===0?-i:0),m),C=n.insert(()=>k,":first-child");C.attr("class","basic label-container");const S=C.node().getBBox();n.selectAll(".text").each((A,z,I)=>{var W;const F=bt(I[z]),L=F.attr("transform");let B=0;if(L){const G=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(L);G&&(B=parseFloat(G[2]))}let D=B+x+i-(p?i:o.members.length===0&&o.methods.length===0?-i/2:0);s||(D-=4);let E=b;(F.attr("class").includes("label-group")||F.attr("class").includes("annotation-group"))&&(E=-((W=F.node())==null?void 0:W.getBBox().width)/2||0,n.selectAll("text").each(function(H,G,Z){window.getComputedStyle(Z[G]).textAnchor==="middle"&&(E=0)})),F.attr("transform",`translate(${E}, ${D})`)});const v=n.select(".annotation-group").node().getBBox().height-(p?i/2:0)||0,_=n.select(".label-group").node().getBBox().height-(p?i/2:0)||0,R=n.select(".members-group").node().getBBox().height-(p?i/2:0)||0;if(o.members.length>0||o.methods.length>0||p){const A=d.line(S.x,v+_+x+i,S.x+S.width,v+_+x+i,m);n.insert(()=>A).attr("class","divider").attr("style",u)}if(p||o.members.length>0||o.methods.length>0){const A=d.line(S.x,v+_+R+x+a*2+i,S.x+S.width,v+_+R+x+i+a*2,m);n.insert(()=>A).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&n.selectAll("path").attr("style",u),C.select(":nth-child(2)").attr("style",u),n.selectAll(".divider").select("path").attr("style",u),t.labelStyle?n.selectAll("span").attr("style",t.labelStyle):n.selectAll("span").attr("style",u),!s){const A=RegExp(/color\s*:\s*([^;]*)/),z=A.exec(u);if(z){const I=z[0].replace("color","fill");n.selectAll("tspan").attr("style",I)}else if(l){const I=A.exec(l);if(I){const F=I[0].replace("color","fill");n.selectAll("tspan").attr("style",F)}}}return Q(t,C),t.intersect=function(A){return U.rect(t,A)},n}f(kg,"classBox");async function _g(e,t){var v,_;const{labelStyles:r,nodeStyles:i}=J(t);t.labelStyle=r;const a=t,s=t,o=20,n=20,c="verifyMethod"in t,l=lt(t),h=e.insert("g").attr("class",l).attr("id",t.domId??t.id);let u;c?u=await De(h,`&lt;&lt;${a.type}&gt;&gt;`,0,t.labelStyle):u=await De(h,"&lt;&lt;Element&gt;&gt;",0,t.labelStyle);let p=u;const d=await De(h,a.name,p,t.labelStyle+"; font-weight: bold;");if(p+=d+n,c){const R=await De(h,`${a.requirementId?`Id: ${a.requirementId}`:""}`,p,t.labelStyle);p+=R;const P=await De(h,`${a.text?`Text: ${a.text}`:""}`,p,t.labelStyle);p+=P;const $=await De(h,`${a.risk?`Risk: ${a.risk}`:""}`,p,t.labelStyle);p+=$,await De(h,`${a.verifyMethod?`Verification: ${a.verifyMethod}`:""}`,p,t.labelStyle)}else{const R=await De(h,`${s.type?`Type: ${s.type}`:""}`,p,t.labelStyle);p+=R,await De(h,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,p,t.labelStyle)}const m=(((v=h.node())==null?void 0:v.getBBox().width)??200)+o,g=(((_=h.node())==null?void 0:_.getBBox().height)??200)+o,y=-m/2,b=-g/2,x=V.svg(h),k=K(t,{});t.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const C=x.rectangle(y,b,m,g,k),S=h.insert(()=>C,":first-child");if(S.attr("class","basic label-container").attr("style",i),h.selectAll(".label").each((R,P,$)=>{const A=bt($[P]),z=A.attr("transform");let I=0,F=0;if(z){const E=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(z);E&&(I=parseFloat(E[1]),F=parseFloat(E[2]))}const L=F-g/2;let B=y+o/2;(P===0||P===1)&&(B=I),A.attr("transform",`translate(${B}, ${L+o})`)}),p>u+d+n){const R=x.line(y,b+u+d+n,y+m,b+u+d+n,k);h.insert(()=>R).attr("style",i)}return Q(t,S),t.intersect=function(R){return U.rect(t,R)},h}f(_g,"requirementBox");async function De(e,t,r,i=""){if(t==="")return 0;const a=e.insert("g").attr("class","label").attr("style",i),s=kt(),o=s.htmlLabels??!0,n=await xr(a,nl(jr(t)),{width:nr(t,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:i},s);let c;if(o){const l=n.children[0],h=bt(n);c=l.getBoundingClientRect(),h.attr("width",c.width),h.attr("height",c.height)}else{const l=n.children[0];for(const h of l.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),i&&h.setAttribute("style",i);c=n.getBBox(),c.height+=6}return a.attr("transform",`translate(${-c.width/2},${-c.height/2+r})`),c.height}f(De,"addText");var lT=f(e=>{switch(e){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function wg(e,t,{config:r}){var z,I;const{labelStyles:i,nodeStyles:a}=J(t);t.labelStyle=i||"";const s=10,o=t.width;t.width=(t.width??200)-10;const{shapeSvg:n,bbox:c,label:l}=await ut(e,t,lt(t)),h=t.padding||10;let u="",p;"ticket"in t&&t.ticket&&((z=r==null?void 0:r.kanban)!=null&&z.ticketBaseUrl)&&(u=(I=r==null?void 0:r.kanban)==null?void 0:I.ticketBaseUrl.replace("#TICKET#",t.ticket),p=n.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const d={useHtmlLabels:t.useHtmlLabels,labelStyle:t.labelStyle||"",width:t.width,img:t.img,padding:t.padding||8,centerLabel:!1};let m,g;p?{label:m,bbox:g}=await Zn(p,"ticket"in t&&t.ticket||"",d):{label:m,bbox:g}=await Zn(n,"ticket"in t&&t.ticket||"",d);const{label:y,bbox:b}=await Zn(n,"assigned"in t&&t.assigned||"",d);t.width=o;const x=10,k=(t==null?void 0:t.width)||0,C=Math.max(g.height,b.height)/2,S=Math.max(c.height+x*2,(t==null?void 0:t.height)||0)+C,v=-k/2,_=-S/2;l.attr("transform","translate("+(h-k/2)+", "+(-C-c.height/2)+")"),m.attr("transform","translate("+(h-k/2)+", "+(-C+c.height/2)+")"),y.attr("transform","translate("+(h+k/2-b.width-2*s)+", "+(-C+c.height/2)+")");let R;const{rx:P,ry:$}=t,{cssStyles:A}=t;if(t.look==="handDrawn"){const F=V.svg(n),L=K(t,{}),B=P||$?F.path(lr(v,_,k,S,P||0),L):F.rectangle(v,_,k,S,L);R=n.insert(()=>B,":first-child"),R.attr("class","basic label-container").attr("style",A||null)}else{R=n.insert("rect",":first-child"),R.attr("class","basic label-container __APA__").attr("style",a).attr("rx",P??5).attr("ry",$??5).attr("x",v).attr("y",_).attr("width",k).attr("height",S);const F="priority"in t&&t.priority;if(F){const L=n.append("line"),B=v+2,D=_+Math.floor((P??0)/2),E=_+S-Math.floor((P??0)/2);L.attr("x1",B).attr("y1",D).attr("x2",B).attr("y2",E).attr("stroke-width","4").attr("stroke",lT(F))}}return Q(t,R),t.height=S,t.intersect=function(F){return U.rect(t,F)},n}f(wg,"kanbanItem");var cT=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:ag},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:eg},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:sg},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:cg},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:Em},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:km},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:Qm},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:Om},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Ym},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:jm},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:fg},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Wm},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:Lm},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:pg},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:xm},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:rg},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:lg},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:og},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Dm},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:Rm},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:Cm},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:Sm},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:Tm},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:Um},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:yg},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:$m},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:dg},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Gm},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:Bm},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:Am},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:gg},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:xg},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:Mm},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:mg},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Fm},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:ig},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Km},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Xm},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:bm},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:wm},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:ug},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:hg},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:bg},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Jm},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Vm}],hT=f(()=>{const t=[...Object.entries({state:ng,choice:vm,note:Zm,rectWithTitle:tg,labelRect:Hm,iconSquare:zm,iconCircle:Pm,icon:Im,iconRounded:Nm,imageSquare:qm,anchor:ym,kanbanItem:wg,classBox:kg,erBox:Kl,requirementBox:_g}),...cT.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(a=>[a,r.handler]))];return Object.fromEntries(t)},"generateShapeMap"),Cg=hT();function uT(e){return e in Cg}f(uT,"isValidShape");var kn=new Map;async function Sg(e,t,r){let i,a;t.shape==="rect"&&(t.rx&&t.ry?t.shape="roundedRect":t.shape="squareRect");const s=t.shape?Cg[t.shape]:void 0;if(!s)throw new Error(`No such shape: ${t.shape}. Please check your syntax.`);if(t.link){let o;r.config.securityLevel==="sandbox"?o="_top":t.linkTarget&&(o=t.linkTarget||"_blank"),i=e.insert("svg:a").attr("xlink:href",t.link).attr("target",o??null),a=await s(i,t,r)}else a=await s(e,t,r),i=a;return t.tooltip&&a.attr("title",t.tooltip),kn.set(t.id,i),t.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}f(Sg,"insertNode");var vL=f((e,t)=>{kn.set(t.id,e)},"setNodeElem"),kL=f(()=>{kn.clear()},"clear"),_L=f(e=>{const t=kn.get(e.id);O.trace("Transforming node",e.diff,e,"translate("+(e.x-e.width/2-5)+", "+e.width/2+")");const r=8,i=e.diff||0;return e.clusterNode?t.attr("transform","translate("+(e.x+i-e.width/2)+", "+(e.y-e.height/2-r)+")"):t.attr("transform","translate("+e.x+", "+e.y+")"),i},"positionNode"),pT=f((e,t,r,i,a,s)=>{t.arrowTypeStart&&Nh(e,"start",t.arrowTypeStart,r,i,a,s),t.arrowTypeEnd&&Nh(e,"end",t.arrowTypeEnd,r,i,a,s)},"addEdgeMarkers"),dT={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},Nh=f((e,t,r,i,a,s,o)=>{var u;const n=dT[r];if(!n){O.warn(`Unknown arrow type: ${r}`);return}const c=n.type,h=`${a}_${s}-${c}${t==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const p=o.replace(/[^\dA-Za-z]/g,"_"),d=`${h}_${p}`;if(!document.getElementById(d)){const m=document.getElementById(h);if(m){const g=m.cloneNode(!0);g.id=d,g.querySelectorAll("path, circle, line").forEach(b=>{b.setAttribute("stroke",o),n.fill&&b.setAttribute("fill",o)}),(u=m.parentNode)==null||u.appendChild(g)}}e.attr(`marker-${t}`,`url(${i}#${d})`)}else e.attr(`marker-${t}`,`url(${i}#${h})`)},"addEdgeMarker"),Xs=new Map,Gt=new Map,wL=f(()=>{Xs.clear(),Gt.clear()},"clear"),Vi=f(e=>e?e.reduce((r,i)=>r+";"+i,""):"","getLabelStyles"),fT=f(async(e,t)=>{let r=qt(kt().flowchart.htmlLabels);const i=await xr(e,t.label,{style:Vi(t.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});O.info("abc82",t,t.labelType);const a=e.insert("g").attr("class","edgeLabel"),s=a.insert("g").attr("class","label");s.node().appendChild(i);let o=i.getBBox();if(r){const c=i.children[0],l=bt(i);o=c.getBoundingClientRect(),l.attr("width",o.width),l.attr("height",o.height)}s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),Xs.set(t.id,a),t.width=o.width,t.height=o.height;let n;if(t.startLabelLeft){const c=await Mr(t.startLabelLeft,Vi(t.labelStyle)),l=e.insert("g").attr("class","edgeTerminals"),h=l.insert("g").attr("class","inner");n=h.node().appendChild(c);const u=c.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),Gt.get(t.id)||Gt.set(t.id,{}),Gt.get(t.id).startLeft=l,ra(n,t.startLabelLeft)}if(t.startLabelRight){const c=await Mr(t.startLabelRight,Vi(t.labelStyle)),l=e.insert("g").attr("class","edgeTerminals"),h=l.insert("g").attr("class","inner");n=l.node().appendChild(c),h.node().appendChild(c);const u=c.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),Gt.get(t.id)||Gt.set(t.id,{}),Gt.get(t.id).startRight=l,ra(n,t.startLabelRight)}if(t.endLabelLeft){const c=await Mr(t.endLabelLeft,Vi(t.labelStyle)),l=e.insert("g").attr("class","edgeTerminals"),h=l.insert("g").attr("class","inner");n=h.node().appendChild(c);const u=c.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),l.node().appendChild(c),Gt.get(t.id)||Gt.set(t.id,{}),Gt.get(t.id).endLeft=l,ra(n,t.endLabelLeft)}if(t.endLabelRight){const c=await Mr(t.endLabelRight,Vi(t.labelStyle)),l=e.insert("g").attr("class","edgeTerminals"),h=l.insert("g").attr("class","inner");n=h.node().appendChild(c);const u=c.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),l.node().appendChild(c),Gt.get(t.id)||Gt.set(t.id,{}),Gt.get(t.id).endRight=l,ra(n,t.endLabelRight)}return i},"insertEdgeLabel");function ra(e,t){kt().flowchart.htmlLabels&&e&&(e.style.width=t.length*9+"px",e.style.height="12px")}f(ra,"setTerminalWidth");var mT=f((e,t)=>{O.debug("Moving label abc88 ",e.id,e.label,Xs.get(e.id),t);let r=t.updatedPath?t.updatedPath:t.originalPath;const i=kt(),{subGraphTitleTotalMargin:a}=fl(i);if(e.label){const s=Xs.get(e.id);let o=e.x,n=e.y;if(r){const c=Oe.calcLabelPosition(r);O.debug("Moving label "+e.label+" from (",o,",",n,") to (",c.x,",",c.y,") abc88"),t.updatedPath&&(o=c.x,n=c.y)}s.attr("transform",`translate(${o}, ${n+a/2})`)}if(e.startLabelLeft){const s=Gt.get(e.id).startLeft;let o=e.x,n=e.y;if(r){const c=Oe.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_left",r);o=c.x,n=c.y}s.attr("transform",`translate(${o}, ${n})`)}if(e.startLabelRight){const s=Gt.get(e.id).startRight;let o=e.x,n=e.y;if(r){const c=Oe.calcTerminalLabelPosition(e.arrowTypeStart?10:0,"start_right",r);o=c.x,n=c.y}s.attr("transform",`translate(${o}, ${n})`)}if(e.endLabelLeft){const s=Gt.get(e.id).endLeft;let o=e.x,n=e.y;if(r){const c=Oe.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_left",r);o=c.x,n=c.y}s.attr("transform",`translate(${o}, ${n})`)}if(e.endLabelRight){const s=Gt.get(e.id).endRight;let o=e.x,n=e.y;if(r){const c=Oe.calcTerminalLabelPosition(e.arrowTypeEnd?10:0,"end_right",r);o=c.x,n=c.y}s.attr("transform",`translate(${o}, ${n})`)}},"positionEdgeLabel"),gT=f((e,t)=>{const r=e.x,i=e.y,a=Math.abs(t.x-r),s=Math.abs(t.y-i),o=e.width/2,n=e.height/2;return a>=o||s>=n},"outsideNode"),yT=f((e,t,r)=>{O.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);const i=e.x,a=e.y,s=Math.abs(i-r.x),o=e.width/2;let n=r.x<t.x?o-s:o+s;const c=e.height/2,l=Math.abs(t.y-r.y),h=Math.abs(t.x-r.x);if(Math.abs(a-t.y)*o>Math.abs(i-t.x)*c){let u=r.y<t.y?t.y-c-a:a-c-t.y;n=h*u/l;const p={x:r.x<t.x?r.x+n:r.x-h+n,y:r.y<t.y?r.y+l-u:r.y-l+u};return n===0&&(p.x=t.x,p.y=t.y),h===0&&(p.x=t.x),l===0&&(p.y=t.y),O.debug(`abc89 top/bottom calc, Q ${l}, q ${u}, R ${h}, r ${n}`,p),p}else{r.x<t.x?n=t.x-o-i:n=i-o-t.x;let u=l*n/h,p=r.x<t.x?r.x+h-n:r.x-h+n,d=r.y<t.y?r.y+u:r.y-u;return O.debug(`sides calc abc89, Q ${l}, q ${u}, R ${h}, r ${n}`,{_x:p,_y:d}),n===0&&(p=t.x,d=t.y),h===0&&(p=t.x),l===0&&(d=t.y),{x:p,y:d}}},"intersection"),zh=f((e,t)=>{O.warn("abc88 cutPathAtIntersect",e,t);let r=[],i=e[0],a=!1;return e.forEach(s=>{if(O.info("abc88 checking point",s,t),!gT(t,s)&&!a){const o=yT(t,i,s);O.debug("abc88 inside",s,i,o),O.debug("abc88 intersection",o,t);let n=!1;r.forEach(c=>{n=n||c.x===o.x&&c.y===o.y}),r.some(c=>c.x===o.x&&c.y===o.y)?O.warn("abc88 no intersect",o,r):r.push(o),a=!0}else O.warn("abc88 outside",s,i),i=s,a||r.push(s)}),O.debug("returning points",r),r},"cutPathAtIntersect");function Tg(e){const t=[],r=[];for(let i=1;i<e.length-1;i++){const a=e[i-1],s=e[i],o=e[i+1];(a.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-a.y)>5||a.y===s.y&&s.x===o.x&&Math.abs(s.x-a.x)>5&&Math.abs(s.y-o.y)>5)&&(t.push(s),r.push(i))}return{cornerPoints:t,cornerPointPositions:r}}f(Tg,"extractCornerPoints");var qh=f(function(e,t,r){const i=t.x-e.x,a=t.y-e.y,s=Math.sqrt(i*i+a*a),o=r/s;return{x:t.x-o*i,y:t.y-o*a}},"findAdjacentPoint"),bT=f(function(e){const{cornerPointPositions:t}=Tg(e),r=[];for(let i=0;i<e.length;i++)if(t.includes(i)){const a=e[i-1],s=e[i+1],o=e[i],n=qh(a,o,5),c=qh(s,o,5),l=c.x-n.x,h=c.y-n.y;r.push(n);const u=Math.sqrt(2)*2;let p={x:o.x,y:o.y};if(Math.abs(s.x-a.x)>10&&Math.abs(s.y-a.y)>=10){O.debug("Corner point fixing",Math.abs(s.x-a.x),Math.abs(s.y-a.y));const d=5;o.x===n.x?p={x:l<0?n.x-d+u:n.x+d-u,y:h<0?n.y-u:n.y+u}:p={x:l<0?n.x-u:n.x+u,y:h<0?n.y-d+u:n.y+d-u}}else O.debug("Corner point skipping fixing",Math.abs(s.x-a.x),Math.abs(s.y-a.y));r.push(p,c)}else r.push(e[i]);return r},"fixCorners"),xT=f(function(e,t,r,i,a,s,o){var P;const{handDrawnSeed:n}=kt();let c=t.points,l=!1;const h=a;var u=s;const p=[];for(const $ in t.cssCompiledStyles)lm($)||p.push(t.cssCompiledStyles[$]);u.intersect&&h.intersect&&(c=c.slice(1,t.points.length-1),c.unshift(h.intersect(c[0])),O.debug("Last point APA12",t.start,"-->",t.end,c[c.length-1],u,u.intersect(c[c.length-1])),c.push(u.intersect(c[c.length-1]))),t.toCluster&&(O.info("to cluster abc88",r.get(t.toCluster)),c=zh(t.points,r.get(t.toCluster).node),l=!0),t.fromCluster&&(O.debug("from cluster abc88",r.get(t.fromCluster),JSON.stringify(c,null,2)),c=zh(c.reverse(),r.get(t.fromCluster).node).reverse(),l=!0);let d=c.filter($=>!Number.isNaN($.y));d=bT(d);let m=cs;switch(m=Ds,t.curve){case"linear":m=Ds;break;case"basis":m=cs;break;case"cardinal":m=Vd;break;case"bumpX":m=Hd;break;case"bumpY":m=jd;break;case"catmullRom":m=Kd;break;case"monotoneX":m=rf;break;case"monotoneY":m=af;break;case"natural":m=nf;break;case"step":m=of;break;case"stepAfter":m=cf;break;case"stepBefore":m=lf;break;default:m=cs}const{x:g,y}=Wx(t),b=Rk().x(g).y(y).curve(m);let x;switch(t.thickness){case"normal":x="edge-thickness-normal";break;case"thick":x="edge-thickness-thick";break;case"invisible":x="edge-thickness-invisible";break;default:x="edge-thickness-normal"}switch(t.pattern){case"solid":x+=" edge-pattern-solid";break;case"dotted":x+=" edge-pattern-dotted";break;case"dashed":x+=" edge-pattern-dashed";break;default:x+=" edge-pattern-solid"}let k,C=b(d);const S=Array.isArray(t.style)?t.style:[t.style];let v=S.find($=>$==null?void 0:$.startsWith("stroke:"));if(t.look==="handDrawn"){const $=V.svg(e);Object.assign([],d);const A=$.path(C,{roughness:.3,seed:n});x+=" transition",k=bt(A).select("path").attr("id",t.id).attr("class"," "+x+(t.classes?" "+t.classes:"")).attr("style",S?S.reduce((I,F)=>I+";"+F,""):"");let z=k.attr("d");k.attr("d",z),e.node().appendChild(k.node())}else{const $=p.join(";"),A=S?S.reduce((F,L)=>F+L+";",""):"";let z="";t.animate&&(z=" edge-animation-fast"),t.animation&&(z=" edge-animation-"+t.animation);const I=$?$+";"+A+";":A;k=e.append("path").attr("d",C).attr("id",t.id).attr("class"," "+x+(t.classes?" "+t.classes:"")+(z??"")).attr("style",I),v=(P=I.match(/stroke:([^;]+)/))==null?void 0:P[1]}let _="";(kt().flowchart.arrowMarkerAbsolute||kt().state.arrowMarkerAbsolute)&&(_=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,_=_.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),O.info("arrowTypeStart",t.arrowTypeStart),O.info("arrowTypeEnd",t.arrowTypeEnd),pT(k,t,_,o,i,v);let R={};return l&&(R.updatedPath=c),R.originalPath=t.points,R},"insertEdge"),vT=f((e,t,r,i)=>{t.forEach(a=>{RT[a](e,r,i)})},"insertMarkers"),kT=f((e,t,r)=>{O.trace("Making markers for ",r),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionStart").attr("class","marker extension "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-extensionEnd").attr("class","marker extension "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),_T=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionStart").attr("class","marker composition "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-compositionEnd").attr("class","marker composition "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),wT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationStart").attr("class","marker aggregation "+t).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-aggregationEnd").attr("class","marker aggregation "+t).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),CT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyStart").attr("class","marker dependency "+t).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),e.append("defs").append("marker").attr("id",r+"_"+t+"-dependencyEnd").attr("class","marker dependency "+t).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),ST=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopStart").attr("class","marker lollipop "+t).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),e.append("defs").append("marker").attr("id",r+"_"+t+"-lollipopEnd").attr("class","marker lollipop "+t).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),TT=f((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-pointEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-pointStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),BT=f((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-circleEnd").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-circleStart").attr("class","marker "+t).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),ET=f((e,t,r)=>{e.append("marker").attr("id",r+"_"+t+"-crossEnd").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),e.append("marker").attr("id",r+"_"+t+"-crossStart").attr("class","marker cross "+t).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),AT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),LT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneStart").attr("class","marker onlyOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),e.append("defs").append("marker").attr("id",r+"_"+t+"-onlyOneEnd").attr("class","marker onlyOne "+t).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),MT=f((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneStart").attr("class","marker zeroOrOne "+t).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("d","M9,0 L9,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+t).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),a.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),FT=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreStart").attr("class","marker oneOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),e.append("defs").append("marker").attr("id",r+"_"+t+"-oneOrMoreEnd").attr("class","marker oneOrMore "+t).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),DT=f((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+t).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const a=e.append("defs").append("marker").attr("id",r+"_"+t+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+t).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),a.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),$T=f((e,t,r)=>{e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),OT=f((e,t,r)=>{const i=e.append("defs").append("marker").attr("id",r+"_"+t+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");i.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),i.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),i.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),RT={extension:kT,composition:_T,aggregation:wT,dependency:CT,lollipop:ST,point:TT,circle:BT,cross:ET,barb:AT,only_one:LT,zero_or_one:MT,one_or_more:FT,zero_or_more:DT,requirement_arrow:$T,requirement_contains:OT},IT=vT,PT={common:Ti,getConfig:ye,insertCluster:US,insertEdge:xT,insertEdgeLabel:fT,insertMarkers:IT,insertNode:Sg,interpolateToCurve:Ml,labelHelper:ut,log:O,positionEdgeLabel:mT},_a={},Bg=f(e=>{for(const t of e)_a[t.name]=t},"registerLayoutLoaders"),NT=f(()=>{Bg([{name:"dagre",loader:f(async()=>await St(()=>import("./CamzhwYo.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),"loader")}])},"registerDefaultLayoutLoaders");NT();var CL=f(async(e,t)=>{if(!(e.layoutAlgorithm in _a))throw new Error(`Unknown layout algorithm: ${e.layoutAlgorithm}`);const r=_a[e.layoutAlgorithm];return(await r.loader()).render(e,t,PT,{algorithm:r.algorithm})},"render"),SL=f((e="",{fallback:t="dagre"}={})=>{if(e in _a)return e;if(t in _a)return O.warn(`Layout algorithm ${e} is not registered. Using ${t} as fallback.`),t;throw new Error(`Both layout algorithms ${e} and ${t} are not registered.`)},"getRegisteredLayoutAlgorithm"),Wh={name:"mermaid",version:"11.6.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.4",katex:"^0.16.9",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^15.0.7",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",chokidar:"^4.0.3",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.0.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},zT=f(e=>{var a;const{securityLevel:t}=kt();let r=bt("body");if(t==="sandbox"){const o=((a=bt(`#i${e}`).node())==null?void 0:a.contentDocument)??document;r=bt(o.body)}return r.select(`#${e}`)},"selectSvgElement"),Eg="comm",Ag="rule",Lg="decl",qT="@import",WT="@namespace",HT="@keyframes",jT="@layer",Mg=Math.abs,Zl=String.fromCharCode;function Fg(e){return e.trim()}function ds(e,t,r){return e.replace(t,r)}function YT(e,t,r){return e.indexOf(t,r)}function ni(e,t){return e.charCodeAt(t)|0}function Ci(e,t,r){return e.slice(t,r)}function $e(e){return e.length}function UT(e){return e.length}function Za(e,t){return t.push(e),e}var _n=1,Si=1,Dg=0,Ce=0,It=0,Mi="";function Ql(e,t,r,i,a,s,o,n){return{value:e,root:t,parent:r,type:i,props:a,children:s,line:_n,column:Si,length:o,return:"",siblings:n}}function GT(){return It}function VT(){return It=Ce>0?ni(Mi,--Ce):0,Si--,It===10&&(Si=1,_n--),It}function Ee(){return It=Ce<Dg?ni(Mi,Ce++):0,Si++,It===10&&(Si=1,_n++),It}function pr(){return ni(Mi,Ce)}function fs(){return Ce}function wn(e,t){return Ci(Mi,e,t)}function wa(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function XT(e){return _n=Si=1,Dg=$e(Mi=e),Ce=0,[]}function KT(e){return Mi="",e}function Qn(e){return Fg(wn(Ce-1,Yo(e===91?e+2:e===40?e+1:e)))}function ZT(e){for(;(It=pr())&&It<33;)Ee();return wa(e)>2||wa(It)>3?"":" "}function QT(e,t){for(;--t&&Ee()&&!(It<48||It>102||It>57&&It<65||It>70&&It<97););return wn(e,fs()+(t<6&&pr()==32&&Ee()==32))}function Yo(e){for(;Ee();)switch(It){case e:return Ce;case 34:case 39:e!==34&&e!==39&&Yo(It);break;case 40:e===41&&Yo(e);break;case 92:Ee();break}return Ce}function JT(e,t){for(;Ee()&&e+It!==57;)if(e+It===84&&pr()===47)break;return"/*"+wn(t,Ce-1)+"*"+Zl(e===47?e:Ee())}function tB(e){for(;!wa(pr());)Ee();return wn(e,Ce)}function eB(e){return KT(ms("",null,null,null,[""],e=XT(e),0,[0],e))}function ms(e,t,r,i,a,s,o,n,c){for(var l=0,h=0,u=o,p=0,d=0,m=0,g=1,y=1,b=1,x=0,k="",C=a,S=s,v=i,_=k;y;)switch(m=x,x=Ee()){case 40:if(m!=108&&ni(_,u-1)==58){YT(_+=ds(Qn(x),"&","&\f"),"&\f",Mg(l?n[l-1]:0))!=-1&&(b=-1);break}case 34:case 39:case 91:_+=Qn(x);break;case 9:case 10:case 13:case 32:_+=ZT(m);break;case 92:_+=QT(fs()-1,7);continue;case 47:switch(pr()){case 42:case 47:Za(rB(JT(Ee(),fs()),t,r,c),c),(wa(m||1)==5||wa(pr()||1)==5)&&$e(_)&&Ci(_,-1,void 0)!==" "&&(_+=" ");break;default:_+="/"}break;case 123*g:n[l++]=$e(_)*b;case 125*g:case 59:case 0:switch(x){case 0:case 125:y=0;case 59+h:b==-1&&(_=ds(_,/\f/g,"")),d>0&&($e(_)-u||g===0&&m===47)&&Za(d>32?jh(_+";",i,r,u-1,c):jh(ds(_," ","")+";",i,r,u-2,c),c);break;case 59:_+=";";default:if(Za(v=Hh(_,t,r,l,h,a,n,k,C=[],S=[],u,s),s),x===123)if(h===0)ms(_,t,v,v,C,s,u,n,S);else{switch(p){case 99:if(ni(_,3)===110)break;case 108:if(ni(_,2)===97)break;default:h=0;case 100:case 109:case 115:}h?ms(e,v,v,i&&Za(Hh(e,v,v,0,0,a,n,k,a,C=[],u,S),S),a,S,u,n,i?C:S):ms(_,v,v,v,[""],S,0,n,S)}}l=h=d=0,g=b=1,k=_="",u=o;break;case 58:u=1+$e(_),d=m;default:if(g<1){if(x==123)--g;else if(x==125&&g++==0&&VT()==125)continue}switch(_+=Zl(x),x*g){case 38:b=h>0?1:(_+="\f",-1);break;case 44:n[l++]=($e(_)-1)*b,b=1;break;case 64:pr()===45&&(_+=Qn(Ee())),p=pr(),h=u=$e(k=_+=tB(fs())),x++;break;case 45:m===45&&$e(_)==2&&(g=0)}}return s}function Hh(e,t,r,i,a,s,o,n,c,l,h,u){for(var p=a-1,d=a===0?s:[""],m=UT(d),g=0,y=0,b=0;g<i;++g)for(var x=0,k=Ci(e,p+1,p=Mg(y=o[g])),C=e;x<m;++x)(C=Fg(y>0?d[x]+" "+k:ds(k,/&\f/g,d[x])))&&(c[b++]=C);return Ql(e,t,r,a===0?Ag:n,c,l,h,u)}function rB(e,t,r,i){return Ql(e,t,r,Eg,Zl(GT()),Ci(e,2,-2),0,i)}function jh(e,t,r,i,a){return Ql(e,t,r,Lg,Ci(e,0,i),Ci(e,i+1,-1),i,a)}function Uo(e,t){for(var r="",i=0;i<e.length;i++)r+=t(e[i],i,e,t)||"";return r}function iB(e,t,r,i){switch(e.type){case jT:if(e.children.length)break;case qT:case WT:case Lg:return e.return=e.return||e.value;case Eg:return"";case HT:return e.return=e.value+"{"+Uo(e.children,i)+"}";case Ag:if(!$e(e.value=e.props.join(",")))return""}return $e(r=Uo(e.children,i))?e.return=e.value+"{"+r+"}":""}var aB=df(Object.keys,Object),sB=Object.prototype,nB=sB.hasOwnProperty;function oB(e){if(!dn(e))return aB(e);var t=[];for(var r in Object(e))nB.call(e,r)&&r!="constructor"&&t.push(r);return t}var Go=Hr(qe,"DataView"),Vo=Hr(qe,"Promise"),Xo=Hr(qe,"Set"),Ko=Hr(qe,"WeakMap"),Yh="[object Map]",lB="[object Object]",Uh="[object Promise]",Gh="[object Set]",Vh="[object WeakMap]",Xh="[object DataView]",cB=Wr(Go),hB=Wr(ka),uB=Wr(Vo),pB=Wr(Xo),dB=Wr(Ko),Tr=Bi;(Go&&Tr(new Go(new ArrayBuffer(1)))!=Xh||ka&&Tr(new ka)!=Yh||Vo&&Tr(Vo.resolve())!=Uh||Xo&&Tr(new Xo)!=Gh||Ko&&Tr(new Ko)!=Vh)&&(Tr=function(e){var t=Bi(e),r=t==lB?e.constructor:void 0,i=r?Wr(r):"";if(i)switch(i){case cB:return Xh;case hB:return Yh;case uB:return Uh;case pB:return Gh;case dB:return Vh}return t});var fB="[object Map]",mB="[object Set]",gB=Object.prototype,yB=gB.hasOwnProperty;function Kh(e){if(e==null)return!0;if(fn(e)&&(zs(e)||typeof e=="string"||typeof e.splice=="function"||Al(e)||Ll(e)||Ns(e)))return!e.length;var t=Tr(e);if(t==fB||t==mB)return!e.size;if(dn(e))return!oB(e).length;for(var r in e)if(yB.call(e,r))return!1;return!0}var $g="c4",bB=f(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),xB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./CrmB1nin.js");return{diagram:t}},__vite__mapDeps([6,7]),import.meta.url);return{id:$g,diagram:e}},"loader"),vB={id:$g,detector:bB,loader:xB},kB=vB,Og="flowchart",_B=f((e,t)=>{var r,i;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},"detector"),wB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BLE-GVTX.js");return{diagram:t}},__vite__mapDeps([8,9,10]),import.meta.url);return{id:Og,diagram:e}},"loader"),CB={id:Og,detector:_B,loader:wB},SB=CB,Rg="flowchart-v2",TB=f((e,t)=>{var r,i,a;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"&&(t.layout="elk"),/^\s*graph/.test(e)&&((a=t==null?void 0:t.flowchart)==null?void 0:a.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e))},"detector"),BB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BLE-GVTX.js");return{diagram:t}},__vite__mapDeps([8,9,10]),import.meta.url);return{id:Rg,diagram:e}},"loader"),EB={id:Rg,detector:TB,loader:BB},AB=EB,Ig="er",LB=f(e=>/^\s*erDiagram/.test(e),"detector"),MB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./QP5EQZch.js");return{diagram:t}},__vite__mapDeps([11,9,10]),import.meta.url);return{id:Ig,diagram:e}},"loader"),FB={id:Ig,detector:LB,loader:MB},DB=FB,Pg="gitGraph",$B=f(e=>/^\s*gitGraph/.test(e),"detector"),OB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BLwtxOm8.js");return{diagram:t}},__vite__mapDeps([12,13,14,15,16,2,4,5]),import.meta.url);return{id:Pg,diagram:e}},"loader"),RB={id:Pg,detector:$B,loader:OB},IB=RB,Ng="gantt",PB=f(e=>/^\s*gantt/.test(e),"detector"),NB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./CAz7My0s.js");return{diagram:t}},__vite__mapDeps([17,18,19]),import.meta.url);return{id:Ng,diagram:e}},"loader"),zB={id:Ng,detector:PB,loader:NB},qB=zB,zg="info",WB=f(e=>/^\s*info/.test(e),"detector"),HB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./Bqq0WE8X.js");return{diagram:t}},__vite__mapDeps([20,15,16,2,4,5]),import.meta.url);return{id:zg,diagram:e}},"loader"),jB={id:zg,detector:WB,loader:HB},qg="pie",YB=f(e=>/^\s*pie/.test(e),"detector"),UB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./2mmdKLe-.js");return{diagram:t}},__vite__mapDeps([21,13,15,16,2,4,5,22,23,19]),import.meta.url);return{id:qg,diagram:e}},"loader"),GB={id:qg,detector:YB,loader:UB},Wg="quadrantChart",VB=f(e=>/^\s*quadrantChart/.test(e),"detector"),XB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./qeXIC3eA.js");return{diagram:t}},__vite__mapDeps([24,18,19]),import.meta.url);return{id:Wg,diagram:e}},"loader"),KB={id:Wg,detector:VB,loader:XB},ZB=KB,Hg="xychart",QB=f(e=>/^\s*xychart-beta/.test(e),"detector"),JB=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./61Q8gS81.js");return{diagram:t}},__vite__mapDeps([25,19,23,18]),import.meta.url);return{id:Hg,diagram:e}},"loader"),tE={id:Hg,detector:QB,loader:JB},eE=tE,jg="requirement",rE=f(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),iE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BbsZzAbj.js");return{diagram:t}},__vite__mapDeps([26,9]),import.meta.url);return{id:jg,diagram:e}},"loader"),aE={id:jg,detector:rE,loader:iE},sE=aE,Yg="sequence",nE=f(e=>/^\s*sequenceDiagram/.test(e),"detector"),oE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./CeiuZJ0a.js");return{diagram:t}},__vite__mapDeps([27,7,14]),import.meta.url);return{id:Yg,diagram:e}},"loader"),lE={id:Yg,detector:nE,loader:oE},cE=lE,Ug="class",hE=f((e,t)=>{var r;return((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},"detector"),uE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./CvaQCpDt.js");return{diagram:t}},__vite__mapDeps([28,29,9]),import.meta.url);return{id:Ug,diagram:e}},"loader"),pE={id:Ug,detector:hE,loader:uE},dE=pE,Gg="classDiagram",fE=f((e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},"detector"),mE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./_CSIl-1n.js");return{diagram:t}},__vite__mapDeps([30,29,9]),import.meta.url);return{id:Gg,diagram:e}},"loader"),gE={id:Gg,detector:fE,loader:mE},yE=gE,Vg="state",bE=f((e,t)=>{var r;return((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},"detector"),xE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./CX1shJk8.js");return{diagram:t}},__vite__mapDeps([31,32,9,1,2,3,4]),import.meta.url);return{id:Vg,diagram:e}},"loader"),vE={id:Vg,detector:bE,loader:xE},kE=vE,Xg="stateDiagram",_E=f((e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),wE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./B7gt-3VW.js");return{diagram:t}},__vite__mapDeps([33,32,9]),import.meta.url);return{id:Xg,diagram:e}},"loader"),CE={id:Xg,detector:_E,loader:wE},SE=CE,Kg="journey",TE=f(e=>/^\s*journey/.test(e),"detector"),BE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./CiJ2LdPj.js");return{diagram:t}},__vite__mapDeps([34,7,22]),import.meta.url);return{id:Kg,diagram:e}},"loader"),EE={id:Kg,detector:TE,loader:BE},AE=EE,LE=f((e,t,r)=>{O.debug(`rendering svg for syntax error
`);const i=zT(t),a=i.append("g");i.attr("viewBox","0 0 2412 512"),Au(i,100,512,!0),a.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),a.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),a.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),a.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),a.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),a.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),a.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),a.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),Zg={draw:LE},ME=Zg,FE={db:{},renderer:Zg,parser:{parse:f(()=>{},"parse")}},DE=FE,Qg="flowchart-elk",$E=f((e,t={})=>{var r;return/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(t.layout="elk",!0):!1},"detector"),OE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BLE-GVTX.js");return{diagram:t}},__vite__mapDeps([8,9,10]),import.meta.url);return{id:Qg,diagram:e}},"loader"),RE={id:Qg,detector:$E,loader:OE},IE=RE,Jg="timeline",PE=f(e=>/^\s*timeline/.test(e),"detector"),NE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BfweUt7U.js");return{diagram:t}},__vite__mapDeps([35,22]),import.meta.url);return{id:Jg,diagram:e}},"loader"),zE={id:Jg,detector:PE,loader:NE},qE=zE,ty="mindmap",WE=f(e=>/^\s*mindmap/.test(e),"detector"),HE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./DrGJgFUT.js");return{diagram:t}},__vite__mapDeps([36,37]),import.meta.url);return{id:ty,diagram:e}},"loader"),jE={id:ty,detector:WE,loader:HE},YE=jE,ey="kanban",UE=f(e=>/^\s*kanban/.test(e),"detector"),GE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BMRbkWfe.js");return{diagram:t}},[],import.meta.url);return{id:ey,diagram:e}},"loader"),VE={id:ey,detector:UE,loader:GE},XE=VE,ry="sankey",KE=f(e=>/^\s*sankey-beta/.test(e),"detector"),ZE=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./C5vTxv-M.js");return{diagram:t}},__vite__mapDeps([38,23,19]),import.meta.url);return{id:ry,diagram:e}},"loader"),QE={id:ry,detector:KE,loader:ZE},JE=QE,iy="packet",tA=f(e=>/^\s*packet-beta/.test(e),"detector"),eA=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BWspesYA.js");return{diagram:t}},__vite__mapDeps([39,13,15,16,2,4,5]),import.meta.url);return{id:iy,diagram:e}},"loader"),rA={id:iy,detector:tA,loader:eA},ay="radar",iA=f(e=>/^\s*radar-beta/.test(e),"detector"),aA=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./DLqOngTL.js");return{diagram:t}},__vite__mapDeps([40,13,15,16,2,4,5]),import.meta.url);return{id:ay,diagram:e}},"loader"),sA={id:ay,detector:iA,loader:aA},sy="block",nA=f(e=>/^\s*block-beta/.test(e),"detector"),oA=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./BmDt7LiJ.js");return{diagram:t}},__vite__mapDeps([41,5,2,1,10]),import.meta.url);return{id:sy,diagram:e}},"loader"),lA={id:sy,detector:nA,loader:oA},cA=lA,ny="architecture",hA=f(e=>/^\s*architecture/.test(e),"detector"),uA=f(async()=>{const{diagram:e}=await St(async()=>{const{diagram:t}=await import("./B0ty5lEO.js");return{diagram:t}},__vite__mapDeps([42,13,14,15,16,2,4,5,37]),import.meta.url);return{id:ny,diagram:e}},"loader"),pA={id:ny,detector:hA,loader:uA},dA=pA,Zh=!1,Cn=f(()=>{Zh||(Zh=!0,xs("error",DE,e=>e.toLowerCase().trim()==="error"),xs("---",{db:{clear:f(()=>{},"clear")},styles:{},renderer:{draw:f(()=>{},"draw")},parser:{parse:f(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:f(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),gu(kB,XE,yE,dE,DB,qB,jB,GB,sE,cE,IE,AB,SB,YE,qE,IB,SE,kE,AE,ZB,JE,rA,eE,cA,dA,sA))},"addDiagrams"),fA=f(async()=>{O.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(gi).map(async([r,{detector:i,loader:a}])=>{if(a)try{oo(r)}catch{try{const{diagram:s,id:o}=await a();xs(o,s,i)}catch(s){throw O.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete gi[r],s}}}))).filter(r=>r.status==="rejected");if(t.length>0){O.error(`Failed to load ${t.length} external diagrams`);for(const r of t)O.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams"),mA="graphics-document document";function oy(e,t){e.attr("role",mA),t!==""&&e.attr("aria-roledescription",t)}f(oy,"setA11yDiagramInfo");function ly(e,t,r,i){if(e.insert!==void 0){if(r){const a=`chart-desc-${i}`;e.attr("aria-describedby",a),e.insert("desc",":first-child").attr("id",a).text(r)}if(t){const a=`chart-title-${i}`;e.attr("aria-labelledby",a),e.insert("title",":first-child").attr("id",a).text(t)}}}f(ly,"addSVGa11yTitleDescription");var $r,Zo=($r=class{constructor(t,r,i,a,s){this.type=t,this.text=r,this.db=i,this.parser=a,this.renderer=s}static async fromText(t,r={}){var l,h;const i=ye(),a=tl(t,i);t=RC(t)+`
`;try{oo(a)}catch{const u=W0(a);if(!u)throw new mu(`Diagram ${a} not found.`);const{id:p,diagram:d}=await u();xs(p,d)}const{db:s,parser:o,renderer:n,init:c}=oo(a);return o.parser&&(o.parser.yy=s),(l=s.clear)==null||l.call(s),c==null||c(i),r.title&&((h=s.setDiagramTitle)==null||h.call(s,r.title)),await o.parse(t),new $r(a,t,s,o,n)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}},f($r,"Diagram"),$r),Qh=[],gA=f(()=>{Qh.forEach(e=>{e()}),Qh=[]},"attachFunctions"),yA=f(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function cy(e){const t=e.match(fu);if(!t)return{text:e,metadata:{}};let r=qx(t[1],{schema:zx})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:e.slice(t[0].length),metadata:i}}f(cy,"extractFrontMatter");var bA=f(e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,i)=>"<"+r+i.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),xA=f(e=>{const{text:t,metadata:r}=cy(e),{displayMode:i,title:a,config:s={}}=r;return i&&(s.gantt||(s.gantt={}),s.gantt.displayMode=i),{title:a,config:s,text:t}},"processFrontmatter"),vA=f(e=>{const t=Oe.detectInit(e)??{},r=Oe.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:i})=>i==="wrap"):(r==null?void 0:r.type)==="wrap"&&(t.wrap=!0),{text:wC(e),directive:t}},"processDirectives");function Jl(e){const t=bA(e),r=xA(t),i=vA(r.text),a=Rl(r.config,i.directive);return e=yA(i.text),{code:e,title:r.title,config:a}}f(Jl,"preprocessDiagram");function hy(e){const t=new TextEncoder().encode(e),r=Array.from(t,i=>String.fromCodePoint(i)).join("");return btoa(r)}f(hy,"toBase64");var kA=5e4,_A="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",wA="sandbox",CA="loose",SA="http://www.w3.org/2000/svg",TA="http://www.w3.org/1999/xlink",BA="http://www.w3.org/1999/xhtml",EA="100%",AA="100%",LA="border:0;margin:0;",MA="margin:0",FA="allow-top-navigation-by-user-activation allow-popups",DA='The "iframe" tag is not supported by your browser.',$A=["foreignobject"],OA=["dominant-baseline"];function tc(e){const t=Jl(e);return ys(),ab(t.config??{}),t}f(tc,"processAndSetConfigs");async function uy(e,t){Cn();try{const{code:r,config:i}=tc(e);return{diagramType:(await dy(r)).type,config:i}}catch(r){if(t!=null&&t.suppressErrors)return!1;throw r}}f(uy,"parse");var Jh=f((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),RA=f((e,t=new Map)=>{var i;let r="";if(e.themeCSS!==void 0&&(r+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){const n=e.htmlLabels??((i=e.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(c=>{Kh(c.styles)||n.forEach(l=>{r+=Jh(c.id,l,c.styles)}),Kh(c.textStyles)||(r+=Jh(c.id,"tspan",((c==null?void 0:c.textStyles)||[]).map(l=>l.replace("color","fill"))))})}return r},"createCssStyles"),IA=f((e,t,r,i)=>{const a=RA(e,r),s=wb(t,a,e.themeVariables);return Uo(eB(`${i}{${s}}`),iB)},"createUserStyles"),PA=f((e="",t,r)=>{let i=e;return!r&&!t&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=jr(i),i=i.replace(/<br>/g,"<br/>"),i},"cleanUpSvgCode"),NA=f((e="",t)=>{var a,s;const r=(s=(a=t==null?void 0:t.viewBox)==null?void 0:a.baseVal)!=null&&s.height?t.viewBox.baseVal.height+"px":AA,i=hy(`<body style="${MA}">${e}</body>`);return`<iframe style="width:${EA};height:${r};${LA}" src="data:text/html;charset=UTF-8;base64,${i}" sandbox="${FA}">
  ${DA}
</iframe>`},"putIntoIFrame"),tu=f((e,t,r,i,a)=>{const s=e.append("div");s.attr("id",r),i&&s.attr("style",i);const o=s.append("svg").attr("id",t).attr("width","100%").attr("xmlns",SA);return a&&o.attr("xmlns:xlink",a),o.append("g"),e},"appendDivSvgG");function Qo(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}f(Qo,"sandboxedIframe");var zA=f((e,t,r,i)=>{var a,s,o;(a=e.getElementById(t))==null||a.remove(),(s=e.getElementById(r))==null||s.remove(),(o=e.getElementById(i))==null||o.remove()},"removeExistingElements"),qA=f(async function(e,t,r){var z,I,F,L,B,D;Cn();const i=tc(t);t=i.code;const a=ye();O.debug(a),t.length>((a==null?void 0:a.maxTextSize)??kA)&&(t=_A);const s="#"+e,o="i"+e,n="#"+o,c="d"+e,l="#"+c,h=f(()=>{const W=bt(p?n:l).node();W&&"remove"in W&&W.remove()},"removeTempElements");let u=bt("body");const p=a.securityLevel===wA,d=a.securityLevel===CA,m=a.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),p){const E=Qo(bt(r),o);u=bt(E.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=bt(r);tu(u,e,c,`font-family: ${m}`,TA)}else{if(zA(document,e,c,o),p){const E=Qo(bt("body"),o);u=bt(E.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=bt("body");tu(u,e,c)}let g,y;try{g=await Zo.fromText(t,{title:i.title})}catch(E){if(a.suppressErrorRendering)throw h(),E;g=await Zo.fromText("error"),y=E}const b=u.select(l).node(),x=g.type,k=b.firstChild,C=k.firstChild,S=(I=(z=g.renderer).getClasses)==null?void 0:I.call(z,t,g),v=IA(a,x,S,s),_=document.createElement("style");_.innerHTML=v,k.insertBefore(_,C);try{await g.renderer.draw(t,e,Wh.version,g)}catch(E){throw a.suppressErrorRendering?h():ME.draw(t,e,Wh.version),E}const R=u.select(`${l} svg`),P=(L=(F=g.db).getAccTitle)==null?void 0:L.call(F),$=(D=(B=g.db).getAccDescription)==null?void 0:D.call(B);fy(x,R,P,$),u.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",BA);let A=u.select(l).node().innerHTML;if(O.debug("config.arrowMarkerAbsolute",a.arrowMarkerAbsolute),A=PA(A,p,qt(a.arrowMarkerAbsolute)),p){const E=u.select(l+" svg").node();A=NA(A,E)}else d||(A=mi.sanitize(A,{ADD_TAGS:$A,ADD_ATTR:OA,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(gA(),y)throw y;return h(),{diagramType:x,svg:A,bindFunctions:g.db.bindFunctions}},"render");function py(e={}){var i;const t=Vt({},e);t!=null&&t.fontFamily&&!((i=t.themeVariables)!=null&&i.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),rb(t),t!=null&&t.theme&&t.theme in ir?t.themeVariables=ir[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=ir.default.getThemeVariables(t.themeVariables));const r=typeof t=="object"?eb(t):_u();Jo(r.logLevel),Cn()}f(py,"initialize");var dy=f((e,t={})=>{const{code:r}=Jl(e);return Zo.fromText(r,t)},"getDiagramFromText");function fy(e,t,r,i){oy(t,e),ly(t,r,i,t.attr("id"))}f(fy,"addA11yInfo");var zr=Object.freeze({render:qA,parse:uy,getDiagramFromText:dy,initialize:py,getConfig:ye,setConfig:wu,getSiteConfig:_u,updateSiteConfig:ib,reset:f(()=>{ys()},"reset"),globalReset:f(()=>{ys(yi)},"globalReset"),defaultConfig:yi});Jo(ye().logLevel);ys(ye());var WA=f((e,t,r)=>{O.warn(e),Ol(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),my=f(async function(e={querySelector:".mermaid"}){try{await HA(e)}catch(t){if(Ol(t)&&O.error(t.str),xe.parseError&&xe.parseError(t),!e.suppressErrors)throw O.error("Use the suppressErrors option to suppress these errors"),t}},"run"),HA=f(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const i=zr.getConfig();O.debug(`${e?"":"No "}Callback function found`);let a;if(r)a=r;else if(t)a=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");O.debug(`Found ${a.length} diagrams`),(i==null?void 0:i.startOnLoad)!==void 0&&(O.debug("Start On Load: "+(i==null?void 0:i.startOnLoad)),zr.updateSiteConfig({startOnLoad:i==null?void 0:i.startOnLoad}));const s=new Oe.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let o;const n=[];for(const c of Array.from(a)){if(O.info("Rendering diagram: "+c.id),c.getAttribute("data-processed"))continue;c.setAttribute("data-processed","true");const l=`mermaid-${s.next()}`;o=c.innerHTML,o=Hf(Oe.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=Oe.detectInit(o);h&&O.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:p}=await xy(l,o,c);c.innerHTML=u,e&&await e(l),p&&p(c)}catch(u){WA(u,n,xe.parseError)}}if(n.length>0)throw n[0]},"runThrowsErrors"),gy=f(function(e){zr.initialize(e)},"initialize"),jA=f(async function(e,t,r){O.warn("mermaid.init is deprecated. Please use run instead."),e&&gy(e);const i={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?i.querySelector=t:t&&(t instanceof HTMLElement?i.nodes=[t]:i.nodes=t),await my(i)},"init"),YA=f(async(e,{lazyLoad:t=!0}={})=>{Cn(),gu(...e),t===!1&&await fA()},"registerExternalDiagrams"),yy=f(function(){if(xe.startOnLoad){const{startOnLoad:e}=zr.getConfig();e&&xe.run().catch(t=>O.error("Mermaid failed to initialize",t))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",yy,!1);var UA=f(function(e){xe.parseError=e},"setParseErrorHandler"),Ks=[],Jn=!1,by=f(async()=>{if(!Jn){for(Jn=!0;Ks.length>0;){const e=Ks.shift();if(e)try{await e()}catch(t){O.error("Error executing queue",t)}}Jn=!1}},"executeQueue"),GA=f(async(e,t)=>new Promise((r,i)=>{const a=f(()=>new Promise((s,o)=>{zr.parse(e,t).then(n=>{s(n),r(n)},n=>{var c;O.error("Error parsing",n),(c=xe.parseError)==null||c.call(xe,n),o(n),i(n)})}),"performCall");Ks.push(a),by().catch(i)}),"parse"),xy=f((e,t,r)=>new Promise((i,a)=>{const s=f(()=>new Promise((o,n)=>{zr.render(e,t,r).then(c=>{o(c),i(c)},c=>{var l;O.error("Error parsing",c),(l=xe.parseError)==null||l.call(xe,c),n(c),a(c)})}),"performCall");Ks.push(s),by().catch(a)}),"render"),xe={startOnLoad:!0,mermaidAPI:zr,parse:GA,render:xy,init:jA,run:my,registerExternalDiagrams:YA,registerLayoutLoaders:Bg,initialize:gy,parseError:void 0,contentLoaded:yy,setParseErrorHandler:UA,detectType:tl,registerIconPacks:h1},eu=xe;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const vy={date:"2025-06-09",tags:["Algorithms"],keywords:["Bloom filters","Probabilistic data structures","Hash functions","Bit arrays"],title:"Grokking Bloom Filters: The Classic Bloom Filter Demystified",preview:"How a tiny data structure cuts memory usage by 90% — while helping systems instantly check if data exists.",draft:!1,hero:"/images/blog/008-bloom-filters-pt1/hero.jpg"},{date:TL,tags:BL,keywords:EL,title:AL,preview:LL,draft:ML,hero:FL}=vy;var VA=Xt(`<p>There’s a special category of data structures known as probabilistic data structures — and I have a soft spot for some of them. One of my absolute favorites is the Bloom filter. It’s a beautifully simple concept that tackles a surprisingly common challenge: how can we quickly check whether something belongs to a set — without eating up loads of memory?</p> <p>Even though Bloom filters aren’t something most of us use directly in everyday business code, they quietly work behind the scenes in the infrastructure of modern distributed systems, databases, and web services.</p> <p>Instead of storing the actual data, Bloom filters use a clever combo of hash functions and bit arrays to give us lightning-fast answers to a very simple question: is this thing definitely not in the set — or is it maybe there?</p> <p>This post is a deep dive — it’s long, and we’ll take our time walking through how Bloom filters work, how they’re built, and how they behave. But if you’re just here to see it in action, feel free to jump straight to the <a href="#live-demo">interactive playground</a> and try it out yourself. Or, if you’re ready to tune your own Bloom filter, head over to the <a href="#play-with-the-numbers">calculator</a> to configure parameters for your use case.</p> <h2 id="contents"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#contents">#</a>Contents</h2> <ul><li><a href="#what-is-a-bloom-filter">What is a Bloom Filter?</a></li> <li><a href="#how-bloom-filters-work">How Bloom Filters Work</a> <ul><li><a href="#live-demo">Live Demo</a></li> <li><a href="#why-cant-we-delete">Why Can’t We Delete?</a></li> <li><a href="#can-it-scale">Can It Scale?</a></li></ul></li> <li><a href="#optimizing-hash-functions">Optimizing Hash Functions</a> <ul><li><a href="#double-hashing-approach">Double Hashing Approach</a></li> <li><a href="#wide-hash-split">Wide Hash Split</a></li> <li><a href="#recap">Recap</a></li></ul></li> <li><a href="#how-to-calculate-parameters">How to Calculate Parameters</a> <ul><li><a href="#the-false-positive-rate">The False Positive Rate</a></li> <li><a href="#how-parameters-affect-performance">How Parameters Affect Performance</a></li> <li><a href="#calculating-optimal-parameters">Calculating Optimal Parameters</a></li> <li><a href="#examples-with-calculations">Examples With Calculations</a></li> <li><a href="#play-with-the-numbers">Play With The Numbers</a></li></ul></li> <li><a href="#wrapping-up">Wrapping Up</a></li></ul> <h2 id="what-is-a-bloom-filter"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#what-is-a-bloom-filter">#</a>What is a Bloom Filter?</h2> <p>A Bloom filter is a space-efficient probabilistic data structure designed to test whether an element belongs to a set. The key insight behind Bloom filters is their fundamental trade-off: they can guarantee with absolute certainty that an element is <em>not</em> in the set, but when they report that an element <em>is</em> present, there’s a small chance this may be a false positive. This asymmetry makes them especially useful as a first-line filter in systems where false positives are acceptable, but false negatives are not.</p> <blockquote><p>If you’re not familiar with the terms <em>false positive</em> and <em>false negative</em>, here’s a quick translation:</p> <ul><li>A <strong>false positive</strong> means the system says “yes, it’s here” when actually it’s not.</li> <li>A <strong>false negative</strong> means the system says “no, it’s not here” when actually it is.</li></ul></blockquote> <p>The core idea is simple yet powerful. Rather than storing the actual elements, a Bloom filter keeps only hashed representations of the elements inside a compact bit array. This sacrifices some precision but delivers outstanding space efficiency and fast query times. For example, a typical Bloom filter with a 1% error rate requires just about 9.6 bits per element—regardless of the size of the elements themselves. That’s a significant improvement over traditional data structures like hash tables or hash sets, which must store the full data items.</p> <p>Bloom filters may report false positives — claiming an element is present when it isn’t — but they never report false negatives. This makes them extremely reliable for exclusion queries. This property has made Bloom filters invaluable in a wide range of applications, from web caching to database query optimization, where the cost of a false positive is far lower than the cost of missing a true member.</p> <h2 id="how-bloom-filters-work"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#how-bloom-filters-work">#</a>How Bloom Filters Work</h2> <p>The algorithm behind Bloom filters is elegantly built on three main components: a fixed-size bit array, multiple independent hash functions, and straightforward insertion and lookup operations. An empty Bloom filter starts as a bit array of <code>m</code> bits, all initialized to 0, and comes equipped with <code>k</code> different hash functions that map each element to exact <code>k</code> positions within the array. For optimal performance, these hash functions should ideally be independent and uniformly distributed.</p> <blockquote><p>A hash function is a function that takes an input (like a string or number) and deterministically maps it to a number within a fixed range — in this case, some positions in the bit array.<br> When we say that hash functions should be <strong>independent</strong>, we mean that knowing the output of one hash function doesn’t help you guess or calculate the output of another — each one works on its own, like rolling different dice.<br> And when we say they are <strong>uniformly distributed</strong>, we mean that they spread their results evenly across all possible positions, so no part of the resulting bit array gets overloaded with too many bits set.</p> <p>Examples of commonly used hash functions include MurmurHash, xxHash, CityHash, or cryptographic ones like SHA-256 (though cryptographic hashes are usually overkill for Bloom filters).</p></blockquote> <!> <p>Inserting an element is fast and deterministic: the element is fed into each of the <code>k</code> hash functions, producing <code>k</code> unique array positions. The bits at all these positions are then set to 1. No matter how many elements have already been inserted, this operation always requires exactly <code>k</code> hash calculations and <code>k</code> bit updates. The beauty of this approach is its simplicity—there’s no need for collision resolution or complex data structures.</p> <p>Lookup works similarly. To check whether an element might be in the set, the algorithm runs the element through the same <code>k</code> hash functions to obtain <code>k</code> positions. If any of these bits is 0, the element is definitely not in the set — this is guaranteed, since insertion would have set all these bits to 1.</p> <!> <p>However, if all the bits are 1, the element <em>might</em> be in the set, but there’s also a chance that these bits were set by previous insertions of other elements. This creates the possibility of a false positive.</p> <!> <p>The math behind this comes from the probabilistic nature of hash collisions. As more elements are added, more bits get flipped to 1, which increases the chance that any random combination of <code>k</code> positions is already occupied, even for elements that were never inserted. That’s why the false positive rate grows with the number of elements, while the false negative rate stays at zero — if an element was inserted, it will always test as present.</p> <h3 id="live-demo"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#live-demo">#</a>Live Demo</h3> <p>Let’s get our hands dirty.</p> <p>In the interactive playground below, you can <strong>insert any string values into the Bloom filter</strong> and watch how it modifies the internal bit array. You can also <strong>check if a value is present</strong>, and see how Bloom filters may return <code>possibly present</code> even for things you never inserted — that’s our famous false positives in action.</p> <p>A few technical notes about this demo:</p> <ul><li>It uses a <strong>double hashing technique</strong> (which we’ll cover in more detail later). In short: instead of generating many completely separate hashes, it combines just two distinct hash functions to simulate any number of <code>k</code> hash functions. This approach is both efficient and widely used in real-world Bloom filters.</li> <li>For simplicity and to keep things visual, the filter here uses a very compact bit array — only <strong>16 bits</strong> (<code>m = 16</code>) and sets <code>k = 4</code> bit positions for each element.</li></ul> <p>Here’s what happens under the hood:</p> <ul><li>When you add a value: the filter applies the double hash to calculate <code>k</code> positions and flips the corresponding bits to <code>1</code>.</li> <li>When you check a value: it verifies if all these bits are still set to <code>1</code>. If yes — it says “maybe”; if any of them is <code>0</code> — it’s a definite “no”.</li></ul> <!> <h3 id="why-cant-we-delete"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#why-cant-we-delete">#</a>Why Can’t We Delete?</h3> <p>As you may have already noticed, we have <strong>INSERT</strong> and <strong>CHECK</strong> operations in Bloom filters, but I never mentioned a <strong>DELETE</strong> operation. That’s because — in the original design — we simply can’t. At least, not without breaking some of the guarantees that make Bloom filters useful in the first place. (Though, as we’ll see later in the series, there <em>are</em> variations of Bloom filters that support deletion.)</p> <p>The root of the problem is that multiple elements may hash to the same bit positions. When you attempt to delete an element by resetting its bits back to <code>0</code>, you risk clearing bits that may still be in use by other elements. Since Bloom filters are designed to avoid <strong>false negatives</strong>, any operation that might accidentally remove evidence of another element’s presence would break this guarantee.</p> <p>As one researcher <a href="https://www.math.umd.edu/~immortal/CMSC420/notes/bloomfilters.pdf" rel="nofollow">puts it nicely:</a>:</p> <blockquote><p>“There is no deletion basically because the only reasonable way to delete would be to hash the key and then set those corresponding bits to 0, but this could cause false negatives for other keys.”</p></blockquote> <p>Let’s visualize this. Imagine a Bloom filter as a shared apartment building where multiple tenants (elements) occupy overlapping rooms (bit positions).</p> <ul><li>When Alice moves in, she gets keys to rooms <code>3</code>, <code>7</code>, and <code>12</code>.</li> <li>When Bob moves in, he gets keys to rooms <code>7</code>, <code>15</code>, and <code>23</code>.</li></ul> <p>Notice: both Alice and Bob share room <code>7</code>.</p> <p>Now, if Alice moves out and we naively “delete” her by switching off the lights (setting bits to <code>0</code>) in rooms <code>3</code>, <code>7</code>, and <code>12</code>, we inadvertently turn off room <code>7</code>, which Bob still needs.<br> The next time someone asks, “Is Bob still living here?” the system might falsely answer “No” — even though Bob never left. That’s a <strong>false negative</strong>, and Bloom filters are designed specifically to prevent that.</p> <!> <p>Of course, for a quick and dirty workaround, an engineer might introduce a second “blacklist” Bloom filter to track deletions. When checking membership, an element would only be considered present if it’s in the main filter <strong>and</strong> not in the deletion filter. But this comes with its own trade-offs — and we’ll cover better solutions later.</p> <h3 id="can-it-scale"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#can-it-scale">#</a>Can It Scale?</h3> <p>The second major limitation of standard Bloom filters is their <strong>fixed size</strong>. Once you create a Bloom filter, you can’t resize it on the fly without breaking its mathematical guarantees.</p> <p>Traditional Bloom filters require you to <strong>declare their size upfront</strong> — it’s a bit like booking an apartment based on how many guests you <em>think</em> might show up. This creates the classic “Goldilocks problem”:</p> <ul><li><strong>Underestimated capacity</strong>: You planned for 1M elements but end up with 1.2M? The false positive rate can shoot up to 20% or even higher.</li> <li><strong>Overestimated capacity</strong>: You reserved space for 10M elements but only store 1M? You’re wasting 90% of your allocated memory.</li></ul> <p>The <a href="https://gsd.di.uminho.pt/members/cbm/ps/dbloom.pdf" rel="nofollow">solution</a> — or rather, the workaround — is fairly straightforward: monitor the Bloom filter’s saturation. Once the false positive rate crosses an unacceptable threshold, you simply add another (larger) Bloom filter. To check membership, you query all filters in sequence until you get a match or exhaust them.</p> <h2 id="optimizing-hash-functions"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#optimizing-hash-functions">#</a>Optimizing Hash Functions</h2> <p>As we discussed earlier, the key to an efficient Bloom filter lies in having k independent and uniformly distributed hash functions. The more evenly they spread their outputs across the bit array, the lower the risk of false positives.</p> <p>While this idea is elegant in theory, it’s more complicated in practice — creating and computing many truly independent hash functions can be both conceptually challenging and computationally expensive.</p> <p>Designing good hash functions isn’t something most engineers do every day. Creating a brand new hash function that minimizes collisions and evenly spreads values across the bit array is far from trivial. And Bloom filters typically require at least two hash functions — sometimes even four or more depending on your workload and the nature of the data you’re adding.</p> <p>As you probably noticed in your day-to-day work, we rarely write our own math-heavy algorithms from scratch. Instead, we lean on solid, battle-tested abstractions: hashing libraries, built-in data structures, utility modules, etc. Even if you’re adventurous enough to roll out your own Bloom filter implementation, you probably don’t want to spend weeks designing hash functions from scratch — but you still want decent performance.</p> <p>On top of that, hash computation itself can get expensive, especially if you’re using cryptographic hashes like SHA-256. These functions are overkill for Bloom filters and introduce unnecessary overhead. Faster non-cryptographic hash functions like <strong>MurmurHash</strong> or <strong>xxHash</strong> are much better suited for this use case — but even then, if you naively calculate <em>k</em> separate hashes per element, the cost adds up.</p> <p>Let’s take a look at a simple, naive approach just to set the baseline:</p> <!> <p>At first glance, problem solved: you’re generating multiple hash values by salting your input with different constants. It works, and it’s easy to implement. But this method has an important drawback — you need to compute <em>k</em> separate hashes for every element, which becomes costly for larger <em>k</em> values (say 10 or more) — especially if the hash function itself isn’t cheap.</p> <p>While this approach might be acceptable for use-cases where performance isn’t important, let’s be honest: for such cases, you probably don’t even need a Bloom filter — a plain old <code>Set</code> would do the job just fine.</p> <h3 id="double-hashing-approach"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#double-hashing-approach">#</a>Double Hashing Approach</h3> <p>Luckily, there’s a well-known trick to avoid computing <em>k</em> independent hash functions while still achieving almost the same statistical behavior. This method is often called <strong>double hashing</strong> or <strong>Kirsch-Mitzenmacher optimization</strong>, after the authors who <a href="https://www.eecs.harvard.edu/~michaelm/postscripts/rsa2008.pdf" rel="nofollow">formally analyzed it</a>.</p> <p>The idea is surprisingly simple: instead of calculating <em>k</em> totally independent hashes, you calculate just two independent hash functions, and then combine them to generate the rest.</p> <p>The formula goes like this:</p> <div class="math math-display"><!></div> <p>Where:</p> <ul><li><code>h1(x)</code> and <code>h2(x)</code> are two independent hash functions (or at least two reasonably uncorrelated ones).</li> <li><code>i</code> is the index of the hash function you want (ranging from 0 to k-1).</li> <li>Each resulting value is then typically reduced by modulo <code>m</code> (the bit array size) to map it into the bit array in case it’s larger than the bit array size.</li></ul> <p>In code, it may look something like this:</p> <!> <p>This approach has several nice properties:</p> <ul><li>You only calculate <strong>two</strong> hash functions per inserted element, no matter how many hash functions <em>k</em> you want.</li> <li>You get a whole sequence of hash values that are nicely spread across your bit array.</li> <li>The results are nearly as good as having fully independent hashes, at least for practical Bloom filter usage.</li></ul> <!> <h4 id="why-does-double-hashing-work"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#why-does-double-hashing-work">#</a>Why does Double-Hashing Work?</h4> <p>Without diving too deep into math: Kirsch and Mitzenmacher showed that this sequence of hashes behaves <em>almost</em> like having <em>k</em> independent hashes for the purposes of a Bloom filter. The false-positive rate remains essentially the same, while computational cost is dramatically reduced.</p> <p>This optimization is commonly used in real-world Bloom filter implementations — for example, it’s part of <a href="https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/utils/BloomFilter.java" rel="nofollow">Cassandra’s BloomFilter implementation</a>.</p> <h4 id="but-what-if-h2-is-zero"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#but-what-if-h2-is-zero">#</a>But what if <code>h2</code> is zero?</h4> <p>Yeah… You may have already noticed a potential issue in our formula:</p> <div class="math math-display"><!></div> <p>If <code>h2(x)</code> happens to be zero, all your hashes collapse into the same value:</p> <div class="math math-display"><!></div> <p>How likely is that? Well, it depends, but not impossible.</p> <p>To protect yourself, many implementations include a tiny fix like:</p> <!> <p>This guarantees forward progress: even in the worst case you still generate <code>k</code> distinct bit positions.</p> <h4 id="h2x-and-m-should-be-coprime"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#h2x-and-m-should-be-coprime">#</a><code>h2(x)</code> and <code>m</code> Should Be Coprime</h4> <p>There’s one more sneaky issue that’s often overlooked when using the double hashing formula:</p> <div class="math math-display"><!></div> <p>Everything seems fine… until one day your Bloom filter quietly becomes <em>less random than you expect</em>. This happens when <code>h2(x)</code> and <code>m</code> (the Bloom filter size) are not <strong>coprime</strong>.</p> <blockquote><p><strong>What does “coprime” mean?</strong> Two numbers are coprime if they don’t share any common divisors except 1.
For example:</p> <ul><li><code>9</code> and <code>16</code> are coprime.</li> <li><code>6</code> and <code>18</code> are <strong>not</strong> coprime (since they share divisor <code>6</code>).</li></ul></blockquote> <p>If <code>h2(x)</code> and <code>m</code> share a common divisor, the sequence of hashes generated</p> <!> <p>will only cover part of the bit array. In other words: <strong>you won’t reach all possible bit positions</strong>.</p> <p>This leads to: fewer unique bits set → more collisions → higher false-positive rates → sad stakeholders.</p> <p>Let’s say you have:</p> <ul><li><code>m = 10</code></li> <li><code>h1(x) = 2</code></li> <li><code>h2(x) = 4</code> (notice that both <code>4</code> and <code>10</code> share divisor <code>2</code>)</li></ul> <p>Now calculate the hashes:</p> <!> <p>You never touch bit positions <code>1, 3, 5, 7, 9</code> — half of your bit array is completely unused!</p> <p>Ideally, choose <code>m</code> to be a <strong>prime number</strong> — then any <code>h2(x)</code> is automatically coprime with <code>m</code> (except if <code>h2(x) = 0</code> which we already handled earlier).</p> <p>Or, when <code>m</code> is not prime, ensure that your hash function produces <code>h2(x)</code> values that are statistically unlikely to share factors with <code>m</code>. A simple safety net is to force <code>h2(x)</code> to always be odd:</p> <!> <p>This avoids most practical problems if <code>m</code> is a power of two (which is very common for bit arrays).</p> <p>Let’s walk through a small example where things work exactly as intended:</p> <ul><li><code>m = 10</code></li> <li><code>h1(x) = 2</code></li> <li><code>h2(x) = 7</code> (notice that <code>7</code> and <code>10</code> are coprime (they share no divisors except <code>1</code>)</li></ul> <p>Hash values be like that:</p> <!> <p>Full cycle, no repeats — the bit array is fully covered.</p> <h3 id="wide-hash-split"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#wide-hash-split">#</a>Wide Hash Split</h3> <p>There’s another technique that sometimes gets used, especially in high-performance Bloom filters - wide hash split. A good example is <a href="https://github.com/google/guava/blob/master/guava/src/com/google/common/hash/BloomFilterStrategies.java" rel="nofollow">Google Guava</a>, where it works nicely alongside the double hashing approach.</p> <p>The core idea is also simple - instead of generating multiple completely separate hash values, you generate <strong>one wide hash output</strong> (e.g. 128 or 256 bits), and then split it into multiple pieces to simulate multiple hash functions.</p> <!> <h4 id="why-does-hash-split-work"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#why-does-hash-split-work">#</a>Why does hash split work?</h4> <p>Good hash functions like <strong>MurmurHash3 128-bit</strong>, <strong>CityHash128</strong>, or <strong>xxHash3 128-bit</strong> are designed to spread randomness across all bits, i.e. have avalanche effect, when small input changes drastically alter all output bits. So, the upper bits are just as random as the lower bits.</p> <p>Of course, like everything in Bloom filters — no free lunch:</p> <ul><li>The resulting hashes are <strong>not truly independent</strong>, just decorrelated, i.e. different enough. This may theoretically increase false positives slightly if your input data is highly correlated and the hash function doesn’t have good avalanche effect.</li> <li>You’re limited by how many slices you can get — e.g., 128-bit hash gives you at most 4×32-bit slices (or more if you slice into smaller chunks).</li></ul> <h3 id="recap"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#recap">#</a>Recap</h3> <table><thead><tr><th>Method</th><th># of Hash Calls</th><th>Speed</th><th>Independence</th></tr></thead><tbody><tr><td>k hashes</td><td>k</td><td>Slow</td><td>True</td></tr><tr><td>Double hashing</td><td>2</td><td>Fast</td><td>Almost</td></tr><tr><td>Wide hash split</td><td>1</td><td>Even faster</td><td>Almost</td></tr></tbody></table> <h2 id="how-to-calculate-parameters"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#how-to-calculate-parameters">#</a>How to Calculate Parameters</h2> <p>Strictly speaking, this section should be at the very beginning — but I didn’t want to scare you away with formulas too early. Since you’re still here, let’s finally dive into how to properly configure your Bloom filter.</p> <p>Some of the parameters you’ve already met, but let’s quickly recap:</p> <ol><li><strong>m</strong> — the size of the bit array (in bits)</li> <li><strong>n</strong> — the expected number of inserted elements</li> <li><strong>k</strong> — the number of hash functions and bit positions to set</li> <li><strong>p</strong> — the false positive probability (also called <strong>FPP</strong>)</li></ol> <p>These parameters are tightly interconnected — changing one affects the others, leading to trade-offs between memory usage, query speed, and accuracy.</p> <h3 id="the-false-positive-rate"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#the-false-positive-rate">#</a>The False Positive Rate</h3> <p>The false positive rate is arguably the most important characteristic of a Bloom filter. It represents the probability that the filter incorrectly reports an element as present when it actually isn’t. The theoretical false positive probability can be approximated by:</p> <div class="math math-display"><!></div> <p>Where once again:</p> <ul><li><code>p</code> is the false positive probability</li> <li><code>k</code> is the number of hash functions and bit positions to set</li> <li><code>n</code> is the number of inserted elements</li> <li><code>m</code> is the size of the bit array</li></ul> <blockquote><p>It’s worth noting that this formula is an approximation. According to <a href="https://cglab.ca/~morin/publications/ds/bloom-submitted.pdf" rel="nofollow">detailed mathematical analysis</a>, the actual false positive rate is strictly larger than this approximation for any k ≥ 2.</p></blockquote> <h3 id="how-parameters-affect-performance"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#how-parameters-affect-performance">#</a>How Parameters Affect Performance</h3> <h4 id="memory-usage"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#memory-usage">#</a>Memory Usage</h4> <p>The memory usage of a Bloom filter is directly proportional to <code>m</code>. This is one of its key strengths — excellent space efficiency compared to hash tables or sets.</p> <p>For <a href="https://valkey.io/blog/introducing-bloom-filters/" rel="nofollow">example</a>, let’s say you want to maintain 500 Bloom filters, each capable of holding 5 million elements. The total memory depends heavily on your target false positive rate:</p> <table><thead><tr><th>False Positive Rate</th><th>Total Memory</th><th>Memory Savings vs SET</th></tr></thead><tbody><tr><td>0.01 (1 in 100)</td><td>2.9 GB</td><td>98.08% saved</td></tr><tr><td>0.001 (1 in 1,000)</td><td>4.9 GB</td><td>96.80% saved</td></tr><tr><td>0.00001 (1 in 100,000)</td><td>7.8 GB</td><td>94.88% saved</td></tr></tbody></table> <h4 id="query-performance"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#query-performance">#</a>Query Performance</h4> <p>Both insertions and lookups require computing <code>k</code> hash functions and updating or reading <code>k</code> bits. Therefore, both operations have time complexity <code>O(k)</code>, assuming that hash function is some constant time operation. Since <code>k</code> is typically small (usually between 5 and 12), Bloom filters are extremely fast for membership checks, regardless of how many elements they contain.</p> <h3 id="calculating-optimal-parameters"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#calculating-optimal-parameters">#</a>Calculating Optimal Parameters</h3> <h4 id="optimal-size-m"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#optimal-size-m">#</a>Optimal Size (m)</h4> <p>If you know the expected number of elements (<code>n</code>) and your target false positive probability (<code>p</code>), you can compute the optimal size of the bit array as:</p> <div class="math math-display"><!></div> <p>Or approximately:</p> <div class="math math-display"><!></div> <h4 id="optimal-number-of-hash-functions-k"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#optimal-number-of-hash-functions-k">#</a>Optimal Number of Hash Functions (k)</h4> <p>Once you have <code>m</code>, you can compute the optimal number of hash functions:</p> <div class="math math-display"><!></div> <p>Or approximately:</p> <div class="math math-display"><!></div> <p>Choosing this optimal <code>k</code> minimizes the false positive rate for your selected <code>m</code> and <code>n</code>.</p> <h3 id="examples-with-calculations"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#examples-with-calculations">#</a>Examples With Calculations</h3> <h4 id="example-1-calculating-size-and-hash-functions"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#example-1-calculating-size-and-hash-functions">#</a>Example 1: Calculating Size and Hash Functions</h4> <p>Given:</p> <ul><li><code>n = 100,000</code> (expected elements)</li> <li><code>p = 0.01</code> (1% false positive rate)</li></ul> <p>Calculate <code>m</code>:</p> <!> <p>Calculate <code>k</code>:</p> <!> <h4 id="example-2-calculating-false-positive-rate"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#example-2-calculating-false-positive-rate">#</a>Example 2: Calculating False Positive Rate</h4> <p>Given:</p> <ul><li><code>n = 100</code> (elements)</li> <li><code>m = 1,000</code> (bits)</li> <li><code>k = 4</code> (hash functions)</li></ul> <p>Calculate <code>p</code>:</p> <!> <p>So the false positive rate is approximately <strong>1.18%</strong>.</p> <h3 id="play-with-the-numbers"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#play-with-the-numbers">#</a>Play With The Numbers</h3> <p>If you’re getting bored (or dizzy) with all these formulas — don’t worry. Instead of torturing your brain, let’s just throw your numbers into the calculator below and let it crunch everything for you.</p> <p>After all, you’re sitting right next to one of the most advanced calculators humanity ever built — <strong>for Christ’s sake, let it do the math.</strong></p> <!> <h2 id="wrapping-up"><a class="header-anchor" aria-hidden="true" tabindex="-1" href="#wrapping-up">#</a>Wrapping Up</h2> <p>Every time I revisit Bloom filters, I’m reminded why computer science so often feels like magic. A simple structure — just a bit array and a handful of hash functions — yet it dances gracefully with probability to solve problems that could easily swallow gigabytes of memory if approached naively.</p> <p>And yet — this is only the beginning.</p> <p>As we move forward, we’ll see how this beautifully simple idea can be stretched, twisted, and extended to take on even bigger challenges.</p> <p>See you in the next parts — things are about to get even more interesting.</p>`,1);function XA(e,t){Ca(t,!1),Ry(()=>{eu.initialize({theme:"dark"}),eu.run({querySelector:".mermaid"})}),Ly();var r=VA(),i=j(Iy(r),28);Et(i,()=>`<pre class="mermaid">graph TD
    A["Element: 'apple'"] --> B["Hash Function 1<br/>h1('apple') = 3"]
    A --> C["Hash Function 2<br/>h2('apple') = 8"]  
    A --> D["Hash Function 3<br/>h3('apple') = 14"]
    
    B --> E["Bit Array Position 3"]
    C --> F["Bit Array Position 8"]
    D --> G["Bit Array Position 14"]
    
    E --> H["Set bit[3] = 1"]
    F --> I["Set bit[8] = 1"] 
    G --> J["Set bit[14] = 1"]
    
    H --> K["Bit Array:<br/>[0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0]"]
    I --> K
    J --> K
    
    style A fill:#5d5fef,color:#f8f9fa
    style K fill:#22d3ee,color:#212529</pre>`);var a=j(i,6);Et(a,()=>`<pre class="mermaid">graph TD
    A["Query: 'banana'"] --> B["Hash Function 1<br/>h1('banana') = 3"]
    A --> C["Hash Function 2<br/>h2('banana') = 7"]  
    A --> D["Hash Function 3<br/>h3('banana') = 14"]
    
    B --> E["Check bit[3]<br/>Result: 1 ✓"]
    C --> F["Check bit[7]<br/>Result: 0 ✗"]
    D --> G["Check bit[14]<br/>Result: 1 ✓"]
    
    E --> H["Current Bit Array:<br/>[0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0]"]
    F --> H
    G --> H
    
    H --> I{"All bits = 1?"}
    I -->|"No, bit[7] = 0"| J["DEFINITELY NOT in set<br/>(No false negative)"]
    
    style A fill:#5d5fef,color:#f8f9fa
    style J fill:#dc2626,color:#f8f9fa
    style I fill:#f59e0b,color:#212529</pre>`);var s=j(a,4);Et(s,()=>`<pre class="mermaid">graph TD
    A["Query: 'cherry'"] --> B["Hash Function 1<br/>h1('cherry') = 3"]
    A --> C["Hash Function 2<br/>h2('cherry') = 8"]  
    A --> D["Hash Function 3<br/>h3('cherry') = 14"]
    
    B --> E["Check bit[3]<br/>Result: 1 ✓"]
    C --> F["Check bit[8]<br/>Result: 1 ✓"]
    D --> G["Check bit[14]<br/>Result: 1 ✓"]
    
    E --> H["Current Bit Array:<br/>[0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0]"]
    F --> H
    G --> H
    
    H --> I{"All bits = 1?"}
    I -->|"Yes, all = 1"| J["POSSIBLY in set<br/>(Could be false positive)"]
    
    K["Note: 'cherry' was never inserted!<br/>But its hash positions match<br/>bits set by previous elements"]
    K -.-> J
    
    style A fill:#5d5fef,color:#f8f9fa
    style J fill:#fde047,color:#212529
    style I fill:#f59e0b,color:#212529
    style K fill:#d97706,color:#f8f9fa</pre>`);var o=j(s,18);i0(o,{});var n=j(o,20);Et(n,()=>`<pre class="mermaid">graph TD
    A["Alice moves in"] --> A1["Gets keys to rooms:<br/>3, 7, 12"]
    B["Bob moves in"] --> B1["Gets keys to rooms:<br/>7, 15, 23"]
    
    A1 --> R["Room occupancy:<br/>Room 3: Alice<br/>Room 7: Alice + Bob<br/>Room 12: Alice<br/>Room 15: Bob<br/>Room 23: Bob"]
    B1 --> R
    
    R --> D["Alice moves out<br/>(Naive deletion)"]
    D --> D1["Turn off lights in<br/>rooms 3, 7, 12"]
    
    D1 --> P["Problem: Room 7 light<br/>is turned off but<br/>Bob still needs it!"]
    
    P --> Q["Next query: 'Is Bob here?'<br/>Checks rooms 7, 15, 23<br/>Room 7 is dark (0)<br/>Answer: NO"]
    
    Q --> F["FALSE NEGATIVE<br/>Bob never left!"]
    
    style A fill:#22d3ee,color:#212529
    style B fill:#22d3ee,color:#212529
    style D fill:#dc2626,color:#f8f9fa
    style F fill:#dc2626,color:#f8f9fa
    style P fill:#f59e0b,color:#212529</pre>`);var c=j(n,28);Et(c,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h1 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#82AAFF;--shiki-dark:#B392F0"> hash_function_1</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">(</span><span style="color:#C792EA;--shiki-dark:#F97583">data</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h2 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#82AAFF;--shiki-dark:#B392F0"> hash_function_2</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">(</span><span style="color:#C792EA;--shiki-dark:#F97583">data</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">..</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">.</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> hk </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#82AAFF;--shiki-dark:#B392F0"> hash_function_k</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">(</span><span style="color:#C792EA;--shiki-dark:#F97583">data</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">)</span></span></code></pre>`);var l=j(c,14),h=ct(l);Et(h,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>position</mtext><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>i</mi><mo>⋅</mo><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi></mrow><annotation encoding="application/x-tex">\\text{position}_i(x) = (h_1(x) + i \\cdot h_2(x)) \\bmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">position</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>'),st(l);var u=j(l,8);Et(u,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h1 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#82AAFF;--shiki-dark:#B392F0"> hash1</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">(</span><span style="color:#C792EA;--shiki-dark:#F97583">data</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h2 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#82AAFF;--shiki-dark:#B392F0"> hash2</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">(</span><span style="color:#C792EA;--shiki-dark:#F97583">data</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;--shiki-dark:#F97583;--shiki-dark-font-style:inherit">for</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> (i </span><span style="color:#89DDFF;--shiki-dark:#F97583">in</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 0</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> until k) &#123;</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">    val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> position </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> (h1 </span><span style="color:#89DDFF;--shiki-dark:#F97583">+</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> i </span><span style="color:#89DDFF;--shiki-dark:#F97583">*</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h2) </span><span style="color:#89DDFF;--shiki-dark:#F97583">%</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> m</span></span>
<span class="line"><span style="color:#82AAFF;--shiki-dark:#B392F0">    setBit</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">(position)</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">&#125;</span></span>
<span class="line"></span></code></pre>`);var p=j(u,6);Et(p,()=>`<pre class="mermaid">graph LR
    A["Element: 'data'"] --> B["h1('data') = 5"]
    A --> C["h2('data') = 3"]
    
    B --> D["position_0 = (5 + 0×3) % 16 = 5"]
    B --> E["position_1 = (5 + 1×3) % 16 = 8"]  
    B --> F["position_2 = (5 + 2×3) % 16 = 11"]
    B --> G["position_3 = (5 + 3×3) % 16 = 14"]
    
    C --> D
    C --> E
    C --> F
    C --> G
    
    D --> H["Set bits: 5, 8, 11, 14"]
    E --> H
    F --> H
    G --> H
    
    style A fill:#5d5fef,color:#f8f9fa
    style B fill:#495057,color:#f8f9fa
    style C fill:#495057,color:#f8f9fa
    style H fill:#22d3ee,color:#212529</pre>`);var d=j(p,12),m=ct(d);Et(m,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>position</mtext><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>i</mi><mo>⋅</mo><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi></mrow><annotation encoding="application/x-tex">\\text{position}_i(x) = (h_1(x) + i \\cdot h_2(x)) \\bmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">position</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>'),st(d);var g=j(d,4),y=ct(g);Et(y,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>position</mtext><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>i</mi><mo>⋅</mo><mn>0</mn><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi><mo>=</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi></mrow><annotation encoding="application/x-tex">\\text{position}_i(x) = (h_1(x) + i \\cdot 0) \\bmod m = h_1(x) \\bmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">position</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>'),st(g);var b=j(g,6);Et(b,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;--shiki-dark:#F97583;--shiki-dark-font-style:inherit">if</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> (h2 </span><span style="color:#89DDFF;--shiki-dark:#F97583">==</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 0</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">) &#123;</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">    h2 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">&#125;</span></span></code></pre>`);var x=j(b,8),k=ct(x);Et(k,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>position</mtext><mi>i</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msub><mi>h</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>i</mi><mo>⋅</mo><msub><mi>h</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>m</mi></mrow><annotation encoding="application/x-tex">\\text{position}_i(x) = (h_1(x) + i \\cdot h_2(x)) \\bmod m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord text"><span class="mord">position</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.0556em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span></span>'),st(x);var C=j(x,8);Et(C,()=>'<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>h1(x), h1(x) + h2(x), h1(x) + 2*h2(x), ...</span></span></code></pre>');var S=j(C,12);Et(S,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>(2 + 0*4) % 10 → 2  </span></span>
<span class="line"><span>(2 + 1*4) % 10 → 6  </span></span>
<span class="line"><span>(2 + 2*4) % 10 → 0  </span></span>
<span class="line"><span>(2 + 3*4) % 10 → 4  </span></span>
<span class="line"><span>(2 + 4*4) % 10 → 8  </span></span>
<span class="line"><span>(2 + 5*4) % 10 → 2  (cycle repeats)</span></span></code></pre>`);var v=j(S,8);Et(v,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;--shiki-dark:#F97583;--shiki-dark-font-style:inherit">if</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> (h2 </span><span style="color:#89DDFF;--shiki-dark:#F97583">%</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 2</span><span style="color:#89DDFF;--shiki-dark:#F97583"> ==</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 0</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">) &#123;</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">    h2 </span><span style="color:#89DDFF;--shiki-dark:#F97583">+=</span><span style="color:#F78C6C;--shiki-dark:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#BABED8;--shiki-dark:#E1E4E8">&#125;</span></span></code></pre>`);var _=j(v,10);Et(_,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>(2 + 0*7) % 10 → 2  </span></span>
<span class="line"><span>(2 + 1*7) % 10 → 9  </span></span>
<span class="line"><span>(2 + 2*7) % 10 → 6  </span></span>
<span class="line"><span>(2 + 3*7) % 10 → 3  </span></span>
<span class="line"><span>(2 + 4*7) % 10 → 0  </span></span>
<span class="line"><span>(2 + 5*7) % 10 → 7  </span></span>
<span class="line"><span>(2 + 6*7) % 10 → 4  </span></span>
<span class="line"><span>(2 + 7*7) % 10 → 1  </span></span>
<span class="line"><span>(2 + 8*7) % 10 → 8  </span></span>
<span class="line"><span>(2 + 9*7) % 10 → 5</span></span></code></pre>`);var R=j(_,10);Et(R,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> wideHash </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#82AAFF;--shiki-dark:#B392F0"> hash128</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">(</span><span style="color:#C792EA;--shiki-dark:#F97583">data</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h1 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> (wideHash shr </span><span style="color:#F78C6C;--shiki-dark:#79B8FF">0</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">)  </span><span style="color:#89DDFF;--shiki-dark:#F97583">%</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> m </span><span style="color:#676E95;font-style:italic;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit">// or apply mask, if m is a power of two</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h2 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> (wideHash shr </span><span style="color:#F78C6C;--shiki-dark:#79B8FF">16</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">) </span><span style="color:#89DDFF;--shiki-dark:#F97583">%</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> m</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h3 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> (wideHash shr </span><span style="color:#F78C6C;--shiki-dark:#79B8FF">32</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">) </span><span style="color:#89DDFF;--shiki-dark:#F97583">%</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> m</span></span>
<span class="line"><span style="color:#89DDFF;--shiki-dark:#F97583">val</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> h4 </span><span style="color:#89DDFF;--shiki-dark:#F97583">=</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> (wideHash shr </span><span style="color:#F78C6C;--shiki-dark:#79B8FF">48</span><span style="color:#BABED8;--shiki-dark:#E1E4E8">) </span><span style="color:#89DDFF;--shiki-dark:#F97583">%</span><span style="color:#BABED8;--shiki-dark:#E1E4E8"> m</span></span></code></pre>`);var P=j(R,28),$=ct(P);Et($,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo>=</mo><msup><mrow><mo fence="true">(</mo><mn>1</mn><mo>−</mo><msup><mi>e</mi><mrow><mo>−</mo><mi>k</mi><mi>n</mi><mi mathvariant="normal">/</mi><mi>m</mi></mrow></msup><mo fence="true">)</mo></mrow><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">p = \\left(1 - e^{-kn/m}\\right)^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.039em;vertical-align:-0.65em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">kn</span><span class="mord mtight">/</span><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.389em;"><span style="top:-3.6029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span></span>'),st(P);var A=j(P,28),z=ct(A);Et(z,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mo>=</mo><mo>−</mo><mfrac><mrow><mi>n</mi><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">m = -\\frac{n \\ln(p)}{(\\ln(2))^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span>'),st(A);var I=j(A,4),F=ct(I);Et(F,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mo>≈</mo><mo>−</mo><mi>n</mi><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>⋅</mo><mn>2.08</mn></mrow><annotation encoding="application/x-tex">m \\approx -n \\ln(p) \\cdot 2.08</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2.08</span></span></span></span></span>'),st(I);var L=j(I,6),B=ct(L);Et(B,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>=</mo><mfrac><mi>m</mi><mi>n</mi></mfrac><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k = \\frac{m}{n} \\ln(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span>'),st(L);var D=j(L,4),E=ct(D);Et(E,()=>'<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>≈</mo><mfrac><mi>m</mi><mi>n</mi></mfrac><mo>⋅</mo><mn>0.693</mn></mrow><annotation encoding="application/x-tex">k \\approx \\frac{m}{n} \\cdot 0.693</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.7936em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.693</span></span></span></span></span>'),st(D);var W=j(D,14);Et(W,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>m = -(n * ln(p)) / (ln(2))^2</span></span>
<span class="line"><span>  = -(100,000 * ln(0.01)) / (ln(2))^2</span></span>
<span class="line"><span>  = -(100,000 * (-4.6052)) / (0.4809)</span></span>
<span class="line"><span>  ≈ 958,506 bits (≈ 117 KiB)</span></span></code></pre>`);var H=j(W,4);Et(H,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>k = (m / n) * ln(2)</span></span>
<span class="line"><span>  = (958,506 / 100,000) * 0.693</span></span>
<span class="line"><span>  ≈ 6.64 (≈ 7 hash functions)</span></span></code></pre>`);var G=j(H,10);Et(G,()=>`<pre class="shiki shiki-themes material-theme-palenight github-dark" style="background-color:#292D3E;--shiki-dark-bg:#24292e;color:#babed8;--shiki-dark:#e1e4e8" tabindex="0"><code><span class="line"><span>p = (1 - e^(-k * n / m))^k</span></span>
<span class="line"><span>  = (1 - e^(-4 * 100 / 1000))^4</span></span>
<span class="line"><span>  = (1 - e^(-0.4))^4</span></span>
<span class="line"><span>  = (1 - 0.6703)^4</span></span>
<span class="line"><span>  = (0.3297)^4</span></span>
<span class="line"><span>  ≈ 0.0118</span></span></code></pre>`);var Z=j(G,10);n0(Z,{}),Je(10),Dt(e,r),Sa()}const DL=Object.freeze(Object.defineProperty({__proto__:null,default:XA,metadata:vy},Symbol.toStringTag,{value:"Module"}));export{Fk as $,aa as A,z0 as B,Fb as C,Rl as D,ye as E,vu as F,EC as G,zT as H,Wh as I,zx as J,V0 as K,xi as L,aL as M,mn as N,el as O,Dc as P,Rk as Q,cs as R,BC as S,Ba as T,vb as U,Ta as V,Y as W,rt as X,Lu as Y,xC as Z,f as _,Tb as a,u0 as a$,nh as a0,sh as a1,mL as a2,hL as a3,dL as a4,pL as a5,lL as a6,Zr as a7,_l as a8,fL as a9,Q as aA,vL as aB,xT as aC,mT as aD,fT as aE,xS as aF,Dk as aG,o0 as aH,an as aI,h1 as aJ,c1 as aK,qr as aL,gC as aM,kf as aN,hn as aO,fn as aP,zs as aQ,wf as aR,vf as aS,Uw as aT,ge as aU,sv as aV,yl as aW,Bd as aX,La as aY,Ld as aZ,oL as a_,cL as aa,yL as ab,gL as ac,uL as ad,US as ae,Sg as af,_L as ag,ht as ah,Pe as ai,Wx as aj,qt as ak,xr as al,fl as am,Jf as an,jr as ao,Af as ap,DL as aq,mC as ar,ow as as,lC as at,Bl as au,Kh as av,IT as aw,kL as ax,wL as ay,xL as az,Sb as b,bl as b0,ur as b1,Jc as b2,pv as b3,ba as b4,fC as b5,oC as b6,V_ as b7,El as b8,Ww as b9,bC as ba,Fa as bb,Bi as bc,Is as bd,Jw as be,oB as bf,Ma as bg,Ns as bh,Gw as bi,ff as bj,Z_ as bk,Q_ as bl,Tr as bm,kh as bn,J_ as bo,Al as bp,K_ as bq,rw as br,Ei as bs,br as bt,gh as bu,Ll as bv,gf as bw,Xo as bx,yC as by,dn as bz,kt as c,bt as d,Au as e,Vt as f,Eb as g,nr as h,Or as i,f1 as j,Ti as k,O as l,Mf as m,sL as n,SL as o,Ab as p,Lb as q,CL as r,Bb as s,qx as t,Oe as u,uT as v,MC as w,bL as x,Cb as y,nL as z};
